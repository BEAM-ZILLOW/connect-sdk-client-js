!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){function t(){}function e(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function r(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function n(t){var e,n,i;if(r(t))return t;if(n=t.valueOf,"function"==typeof n&&(e=n.call(t),r(e)))return e;if(i=t.toString,"function"==typeof i&&(e=i.call(t),r(e)))return e;throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(e){var r=this;if("function"!=typeof r)throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var n=h.call(arguments,1),i=function(){if(this instanceof u){var t=r.apply(this,n.concat(h.call(arguments)));return Object(t)===t?t:this}return r.apply(e,n.concat(h.call(arguments)))},o=Math.max(0,r.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);var u=Function("binder","return function("+a.join(",")+"){return binder.apply(this,arguments)}")(i);return r.prototype&&(t.prototype=r.prototype,u.prototype=new t,t.prototype=null),u});var i,o,a,s,u,c=Function.prototype.call,l=Array.prototype,f=Object.prototype,h=l.slice,p=c.bind(f.toString),d=c.bind(f.hasOwnProperty);if((u=d(f,"__defineGetter__"))&&(i=c.bind(f.__defineGetter__),o=c.bind(f.__defineSetter__),a=c.bind(f.__lookupGetter__),s=c.bind(f.__lookupSetter__)),2!=[1,2].splice(0).length){var y=Array.prototype.splice,g=Array.prototype.push,m=Array.prototype.unshift;!function(){function t(t){for(var e=[];t--;)e.unshift(t);return e}var e,r=[];if(r.splice.bind(r,0,0).apply(null,t(20)),r.splice.bind(r,0,0).apply(null,t(26)),e=r.length,r.splice(5,0,"XXX"),e+1==r.length)return!0}()?Array.prototype.splice=function(t,e){var r,n=h.call(arguments,2),i=n.length;if(!arguments.length)return[];if(void 0===t&&(t=0),void 0===e&&(e=this.length-t),i>0){if(e<=0){if(t==this.length)return g.apply(this,n),[];if(0==t)return m.apply(this,n),[]}return r=h.call(this,t,t+e),n.push.apply(n,h.call(this,t+e,this.length)),n.unshift.apply(n,h.call(this,0,t)),n.unshift(0,this.length),y.apply(this,n),r}return y.call(this,t,e)}:Array.prototype.splice=function(t,e){return arguments.length?y.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(h.call(arguments,2))):[]}}if(1!=[].unshift(0)){var m=Array.prototype.unshift;Array.prototype.unshift=function(){return m.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(t){return"[object Array]"==p(t)});var v=Object("a"),b="a"!=v[0]||!(0 in v),B=function(t){var e=!0;return t&&t.call("foo",function(t,r,n){"object"!=typeof n&&(e=!1)}),!!t&&e};if(Array.prototype.forEach&&B(Array.prototype.forEach)||(Array.prototype.forEach=function(t){var e=x(this),r=b&&"[object String]"==p(this)?this.split(""):e,n=arguments[1],i=-1,o=r.length>>>0;if("[object Function]"!=p(t))throw new TypeError;for(;++i<o;)i in r&&t.call(n,r[i],i,e)}),Array.prototype.map&&B(Array.prototype.map)||(Array.prototype.map=function(t){var e=x(this),r=b&&"[object String]"==p(this)?this.split(""):e,n=r.length>>>0,i=Array(n),o=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var a=0;a<n;a++)a in r&&(i[a]=t.call(o,r[a],a,e));return i}),Array.prototype.filter&&B(Array.prototype.filter)||(Array.prototype.filter=function(t){var e,r=x(this),n=b&&"[object String]"==p(this)?this.split(""):r,i=n.length>>>0,o=[],a=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var s=0;s<i;s++)s in n&&(e=n[s],t.call(a,e,s,r)&&o.push(e));return o}),Array.prototype.every&&B(Array.prototype.every)||(Array.prototype.every=function(t){var e=x(this),r=b&&"[object String]"==p(this)?this.split(""):e,n=r.length>>>0,i=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var o=0;o<n;o++)if(o in r&&!t.call(i,r[o],o,e))return!1;return!0}),Array.prototype.some&&B(Array.prototype.some)||(Array.prototype.some=function(t){var e=x(this),r=b&&"[object String]"==p(this)?this.split(""):e,n=r.length>>>0,i=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var o=0;o<n;o++)if(o in r&&t.call(i,r[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=x(this),r=b&&"[object String]"==p(this)?this.split(""):e,n=r.length>>>0;if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in r){i=r[o++];break}if(++o>=n)throw new TypeError("reduce of empty array with no initial value")}for(;o<n;o++)o in r&&(i=t.call(void 0,i,r[o],o,e));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=x(this),r=b&&"[object String]"==p(this)?this.split(""):e,n=r.length>>>0;if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=n-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in r){i=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(o<0)return i;do o in this&&(i=t.call(void 0,i,r[o],o,e));while(o--);return i}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(t){var r=b&&"[object String]"==p(this)?this.split(""):x(this),n=r.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=e(arguments[1])),i=i>=0?i:Math.max(0,n+i);i<n;i++)if(i in r&&r[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(t){var r=b&&"[object String]"==p(this)?this.split(""):x(this),n=r.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,e(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in r&&t===r[i])return i;return-1}),!Object.keys){var S=!0,C=function(){}.propertyIsEnumerable("prototype"),A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],I=A.length;for(var w in{toString:null})S=!1;Object.keys=function O(t){var e="[object Function]"===p(t),r=null!==t&&"object"==typeof t;if(!r&&!e)throw new TypeError("Object.keys called on a non-object");var O=[],n=C&&e;for(var i in t)n&&"prototype"===i||!d(t,i)||O.push(i);if(S)for(var o=t.constructor,a=o&&o.prototype===t,s=0;s<I;s++){var u=A[s];a&&"constructor"===u||!d(t,u)||O.push(u)}return O}}var E=-621987552e5,T="-000001";Date.prototype.toISOString&&new Date(E).toISOString().indexOf(T)!==-1||(Date.prototype.toISOString=function(){var t,e,r,n,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(n=this.getUTCFullYear(),i=this.getUTCMonth(),n+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],n=(n<0?"-":n>9999?"+":"")+("00000"+Math.abs(n)).slice(0<=n&&n<=9999?-4:-6),e=t.length;e--;)r=t[e],r<10&&(t[e]="0"+r);return n+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var k=!1;try{k=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(E).toJSON().indexOf(T)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(P){}k||(Date.prototype.toJSON=function(t){var e,r=Object(this),i=n(r);if("number"==typeof i&&!isFinite(i))return null;if(e=r.toISOString,"function"!=typeof e)throw new TypeError("toISOString property is not callable");return e.call(r)}),!Date.parse,Date=function(t){function e(r,n,i,o,a,s,u){var c=arguments.length;if(this instanceof t){var l=1==c&&String(r)===r?new t(e.parse(r)):c>=7?new t(r,n,i,o,a,s,u):c>=6?new t(r,n,i,o,a,s):c>=5?new t(r,n,i,o,a):c>=4?new t(r,n,i,o):c>=3?new t(r,n,i):c>=2?new t(r,n):c>=1?new t(r):new t;return l.constructor=e,l}return t.apply(this,arguments)}function r(t,e){var r=e>1?1:0;return o[e]+Math.floor((t-1969+r)/4)-Math.floor((t-1901+r)/100)+Math.floor((t-1601+r)/400)+365*(t-1970)}function n(e){return Number(new t(1970,0,1,0,0,0,e))}var i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var a in t)e[a]=t[a];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var o=i.exec(e);if(o){var a,s=Number(o[1]),u=Number(o[2]||1)-1,c=Number(o[3]||1)-1,l=Number(o[4]||0),f=Number(o[5]||0),h=Number(o[6]||0),p=Math.floor(1e3*Number(o[7]||0)),d=Boolean(o[4]&&!o[8]),y="-"===o[9]?1:-1,g=Number(o[10]||0),m=Number(o[11]||0);return l<(f>0||h>0||p>0?24:25)&&f<60&&h<60&&p<1e3&&u>-1&&u<12&&g<24&&m<60&&c>-1&&c<r(s,u+1)-r(s,u)&&(a=60*(24*(r(s,u)+c)+l+g*y),a=1e3*(60*(a+f+m*y)+h)+p,d&&(a=n(a)),-864e13<=a&&a<=864e13)?a:NaN}return t.parse.apply(this,arguments)},e}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===(0xde0b6b3a7640080).toFixed(0)||!function(){function t(t,e){for(var r=-1;++r<a;)e+=t*s[r],s[r]=e%o,e=Math.floor(e/o)}function e(t){for(var e=a,r=0;--e>=0;)r+=s[e],s[e]=Math.floor(r/t),r=r%t*o}function r(){for(var t=a,e="";--t>=0;)if(""!==e||0===t||0!==s[t]){var r=String(s[t]);""===e?e=r:e+="0000000".slice(0,7-r.length)+r}return e}function n(t,e,r){return 0===e?r:e%2===1?n(t,e-1,r*t):n(t*t,e/2,r)}function i(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}var o,a,s;o=1e7,a=6,s=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var a,s,u,c,l,f,h,p;if(a=Number(o),a=a!==a?0:Math.floor(a),a<0||a>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(s=Number(this),s!==s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(u="",s<0&&(u="-",s=-s),c="0",s>1e-21)if(l=i(s*n(2,69,1))-69,f=l<0?s*n(2,-l,1):s/n(2,l,1),f*=4503599627370496,l=52-l,l>0){for(t(0,f),h=a;h>=7;)t(1e7,0),h-=7;for(t(n(10,h,1),0),h=l-1;h>=23;)e(1<<23),h-=23;e(1<<h),t(1,1),e(2),c=r()}else t(0,f),t(1<<-l,0),c=r()+"0.00000000000000000000".slice(2,2+a);return a>0?(p=c.length,c=p<=a?u+"0.0000000000000000000".slice(0,a-p+2)+c:u+c.slice(0,p-a)+"."+c.slice(p-a)):c=u+c,c}}();var _=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];String.prototype.split=function(e,r){var n=this;if(void 0===e&&0===r)return[];if("[object RegExp]"!==Object.prototype.toString.call(e))return _.apply(this,arguments);var i,o,a,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),l=0,e=new RegExp(e.source,c+"g");for(n+="",t||(i=new RegExp("^"+e.source+"$(?!\\s)",c)),r=void 0===r?-1>>>0:r>>>0;(o=e.exec(n))&&(a=o.index+o[0].length,!(a>l&&(u.push(n.slice(l,o.index)),!t&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<n.length&&Array.prototype.push.apply(u,o.slice(1)),s=o[0].length,l=a,u.length>=r)));)e.lastIndex===o.index&&e.lastIndex++;return l===n.length?!s&&e.test("")||u.push(""):u.push(n.slice(l)),u.length>r?u.slice(0,r):u}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,e){return void 0===t&&0===e?[]:_.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var R=String.prototype.substr;String.prototype.substr=function(t,e){return R.call(this,t<0&&(t=this.length+t)<0?0:t,e)}}var N="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||N.trim()){N="["+N+"]";var L=new RegExp("^"+N+N+"*"),D=new RegExp(N+N+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(L,"").replace(D,"")}}8===parseInt(N+"08")&&22===parseInt(N+"0x16")||(parseInt=function(t){var e=/^0[xX]/;return function(r,n){return r=String(r).trim(),+n||(n=e.test(r)?16:10),t(r,n)}}(parseInt));var x=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),function(){function t(t){function e(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(n.isArrayBuffer(t)||n.isArrayBufferView(t)){var r=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,r)}catch(i){for(var o=0;o<r.length;++o)this.putByte(r[o])}}else(t instanceof e||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}function r(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=n.isArrayBuffer(t),i=n.isArrayBufferView(t);return r||i?(r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),void("writeOffset"in e&&(this.write=e.writeOffset)))}var n=t.util=t.util||{};!function(){function t(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach(function(t){t()})}}if("undefined"!=typeof process&&process.nextTick)return n.nextTick=process.nextTick,void("function"==typeof setImmediate?n.setImmediate=setImmediate:n.setImmediate=n.nextTick);if("function"==typeof setImmediate)return n.setImmediate=setImmediate,void(n.nextTick=function(t){return setImmediate(t)});if(n.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];n.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),o=!0,a=document.createElement("div"),r=[];new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})}).observe(a,{attributes:!0});var s=n.setImmediate;n.setImmediate=function(t){Date.now()-i>15?(i=Date.now(),s(t)):(r.push(t),1===r.length&&a.setAttribute("a",o=!o))}}n.nextTick=n.setImmediate}(),n.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},n.isArrayBufferView=function(t){return t&&n.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},n.ByteBuffer=e,n.ByteStringBuffer=e;var i=4096;n.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>i&&(this.data.substr(0,1),this._constructedStringLength=0)},n.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},n.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},n.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},n.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},n.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(n.encodeUtf8(t))},n.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},n.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},n.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},n.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},n.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},n.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},n.ByteStringBuffer.prototype.putInt=function(t,e){var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)},n.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},n.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},n.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},n.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},n.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},n.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},n.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},n.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},n.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},n.ByteStringBuffer.prototype.getInt=function(t){var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e},n.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},n.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},n.ByteStringBuffer.prototype.bytes=function(t){return"undefined"==typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},n.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},n.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},n.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},n.ByteStringBuffer.prototype.copy=function(){var t=n.createBuffer(this.data);return t.read=this.read,t},n.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},n.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},n.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},n.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},n.ByteStringBuffer.prototype.toString=function(){return n.decodeUtf8(this.bytes())},n.DataBuffer=r,n.DataBuffer.prototype.length=function(){return this.write-this.read},n.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},n.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},n.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},n.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},n.DataBuffer.prototype.putBytes=function(t,e){if(n.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var o=new Uint8Array(this.data.buffer,this.write);return o.set(r),this.write+=i,this}if(n.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof n.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&n.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(r),this.write+=r.byteLength,this}if(t instanceof n.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var a;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.hex.decode(t,a,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.base64.decode(t,a,this.write),this;if("utf8"===e&&(t=n.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.raw.decode(a),this;if("utf16"===e)return this.accommodate(2*t.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=n.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},n.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},n.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},n.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},n.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},n.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},n.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},n.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},n.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},n.DataBuffer.prototype.putInt=function(t,e){this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this},n.DataBuffer.prototype.putSignedInt=function(t,e){return this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},n.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},n.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},n.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},n.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},n.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},n.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},n.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},n.DataBuffer.prototype.getInt=function(t){var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e},n.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},n.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},n.DataBuffer.prototype.bytes=function(t){return"undefined"==typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},n.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},n.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},n.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},n.DataBuffer.prototype.copy=function(){return new n.DataBuffer(this)},n.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},n.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},n.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},n.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},n.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8","binary"===t||"raw"===t)return n.binary.raw.encode(e);if("hex"===t)return n.binary.hex.encode(e);if("base64"===t)return n.binary.base64.encode(e);if("utf8"===t)return n.text.utf8.decode(e);if("utf16"===t)return n.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},n.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=n.encodeUtf8(t)),new n.ByteBuffer(t)},n.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return r},n.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,s=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),s>=10&&(n+=o,o="",s=0),o+=String.fromCharCode(i),++s;return n+=o},n.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},n.bytesToHex=function(t){return n.createBuffer(t).toHex()},n.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];n.encode64=function(t,e){for(var r,n,i,a="",s="",u=0;u<t.length;)r=t.charCodeAt(u++),n=t.charCodeAt(u++),i=t.charCodeAt(u++),a+=o.charAt(r>>2),a+=o.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=o.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":o.charAt(63&i)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},n.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,i,o="",s=0;s<t.length;)e=a[t.charCodeAt(s++)-43],r=a[t.charCodeAt(s++)-43],n=a[t.charCodeAt(s++)-43],i=a[t.charCodeAt(s++)-43],o+=String.fromCharCode(e<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},n.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},n.decodeUtf8=function(t){return decodeURIComponent(escape(t))},n.binary={raw:{},hex:{},base64:{}},n.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},n.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n},n.binary.hex.encode=n.bytesToHex,n.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(1&t.length&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n},n.binary.base64.encode=function(t,e){for(var r,n,i,a="",s="",u=0;u<t.byteLength;)r=t[u++],n=t[u++],i=t[u++],a+=o.charAt(r>>2),a+=o.charAt((3&r)<<4|n>>4),isNaN(n)?a+="==":(a+=o.charAt((15&n)<<2|i>>6),a+=isNaN(i)?"=":o.charAt(63&i)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},n.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,u,c=0,l=r;c<t.length;)i=a[t.charCodeAt(c++)-43],o=a[t.charCodeAt(c++)-43],s=a[t.charCodeAt(c++)-43],u=a[t.charCodeAt(c++)-43],n[l++]=i<<2|o>>4,64!==s&&(n[l++]=(15&o)<<4|s>>2,64!==u&&(n[l++]=(3&s)<<6|u));return e?l-r:n.subarray(0,l)},n.text={utf8:{},utf16:{}},n.text.utf8.encode=function(t,e,r){t=n.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a);return e?o-r:i},n.text.utf8.decode=function(t){return n.decodeUtf8(String.fromCharCode.apply(null,t))},n.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,s=0;s<t.length;++s)i[a++]=t.charCodeAt(s),o+=2;return e?o-r:n},n.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},n.deflate=function(t,e,r){if(e=n.decode64(t.deflate(n.encode64(e)).rval),r){var i=2,o=e.charCodeAt(1);32&o&&(i=6),e=e.substring(i,e.length-4)}return e},n.inflate=function(t,e,r){var i=t.inflate(n.encode64(e)).rval;return null===i?null:n.decode64(i)};var s=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(null===r?i=t.removeItem(e):(r=n.encode64(JSON.stringify(r)),i=t.setItem(e,r)),"undefined"!=typeof i&&i.rval!==!0){var o=new Error(i.error.message);throw o.id=i.error.id,o.name=i.error.name,o}},u=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(n.decode64(r))),r},c=function(t,e,r,n){var i=u(t,e);null===i&&(i={}),i[r]=n,s(t,e,i)},l=function(t,e,r){var n=u(t,e);return null!==n&&(n=r in n?n[r]:null),n},f=function(t,e,r){var n=u(t,e);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),s(t,e,n)}},h=function(t,e){s(t,e,null)},p=function(t,e,r){var n=null;"undefined"==typeof r&&(r=["web","flash"]);var i,o=!1,a=null;for(var s in r){i=r[s];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),o="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(u){a=u}if(o)break}if(!o)throw a;return n};n.setItem=function(t,e,r,n,i){p(c,arguments,i)},n.getItem=function(t,e,r,n){return p(l,arguments,n)},n.removeItem=function(t,e,r,n){p(f,arguments,n)},n.clearItems=function(t,e,r){p(h,arguments,r)},n.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var d=null;n.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),n=0;n<r.length;n++){var i,o,a=r[n].indexOf("=");a>0?(i=r[n].substring(0,a),o=r[n].substring(a+1)):(i=r[n],o=null),i in e||(e[i]=[]),i in Object.prototype||null===o||e[i].push(unescape(o))}return e};return"undefined"==typeof t?(null===d&&(d="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=d):e=r(t),e},n.parseFragment=function(t){
var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var o=e.split("/");o.length>0&&""===o[0]&&o.shift();var a=""===r?{}:n.getQueryVariables(r);return{pathString:e,queryString:r,path:o,query:a}},n.makeRequest=function(t){var e=n.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return"undefined"==typeof t?e.path:e.path[t]},getQuery:function(t,r){var n;return"undefined"==typeof t?n=e.query:(n=e.query[t],n&&"undefined"!=typeof r&&(n=n[r])),n},getQueryLast:function(t,e){var n,i=r.getQuery(t);return n=i?i[i.length-1]:e}};return r},n.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},n.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var n=0,i=e.length;n<i;){var o=e[n++];if(n==i)t[o]=r;else{var a=o in t;(!a||a&&"object"!=typeof t[o]||a&&null===t[o])&&(t[o]={}),t=t[o]}}},n.getPath=function(t,e,r){for(var n=0,i=e.length,o=!0;o&&n<i&&"object"==typeof t&&null!==t;){var a=e[n++];o=a in t,o&&(t=t[a])}return o?t:r},n.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,n=e.length;r<n;){var i=e[r++];if(r==n)delete t[i];else{if(!(i in t)||"object"!=typeof t[i]||null===t[i])break;t=t[i]}}},n.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},n.format=function(t){for(var e,r,n=/%./g,i=0,o=[],a=0;e=n.exec(t);){r=t.substring(a,n.lastIndex-2),r.length>0&&o.push(r),a=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":i<arguments.length?o.push(arguments[i++ +1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+s+"?>")}}return o.push(t.substring(a)),o.join("")},n.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=void 0===r?",":r,s=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(o?a+Math.abs(i-c).toFixed(o).slice(2):"")},n.formatSize=function(t){return t=t>=1073741824?n.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?n.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?n.formatNumber(t/1024,0)+" KiB":n.formatNumber(t,0)+" bytes"},n.bytesFromIP=function(t){return t.indexOf(".")!==-1?n.bytesFromIPv4(t):t.indexOf(":")!==-1?n.bytesFromIPv6(t):null},n.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=n.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()},n.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(t){return 0===t.length&&++e,!0});for(var r=2*(8-t.length+e),i=n.createBuffer(),o=0;o<8;++o)if(t[o]&&0!==t[o].length){var a=n.hexToBytes(t[o]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,r),r=0;return i.getBytes()},n.bytesToIP=function(t){return 4===t.length?n.bytesToIPv4(t):16===t.length?n.bytesToIPv6(t):null},n.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},n.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],i=0,o=0;o<t.length;o+=2){for(var a=n.bytesToHex(t[o]+t[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[i].end-r[i].start&&(i=r.length-1)):r.push({start:u,end:u})}e.push(a)}if(r.length>0){var c=r[i];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},n.estimateCores=function(t,e){function r(t,s,u){if(0===s){var c=Math.floor(t.reduce(function(t,e){return t+e},0)/t.length);return n.cores=Math.max(1,c),URL.revokeObjectURL(a),e(null,n.cores)}i(u,function(e,n){t.push(o(u,n)),r(t,s-1,u)})}function i(t,e){for(var r=[],n=[],i=0;i<t;++i){var o=new Worker(a);o.addEventListener("message",function(i){if(n.push(i.data),n.length===t){for(var o=0;o<t;++o)r[o].terminate();e(null,n)}}),r.push(o)}for(var i=0;i<t;++i)r[i].postMessage(i)}function o(t,e){for(var r=[],n=0;n<t;++n)for(var i=e[n],o=r[n]=[],a=0;a<t;++a)if(n!==a){var s=e[a];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&o.push(a)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in n&&!t.update)return e(null,n.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return n.cores=navigator.hardwareConcurrency,e(null,n.cores);if("undefined"==typeof Worker)return n.cores=1,e(null,n.cores);if("undefined"==typeof Blob)return n.cores=2,e(null,n.cores);var a=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)}}var e="util";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.cipher=t.cipher||{},t.cipher.algorithms=t.cipher.algorithms||{},t.cipher.createCipher=function(e,r){var n=e;if("string"==typeof n&&(n=t.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:n,key:r,decrypt:!1})},t.cipher.createDecipher=function(e,r){var n=e;if("string"==typeof n&&(n=t.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new t.cipher.BlockCipher({algorithm:n,key:r,decrypt:!0})},t.cipher.registerAlgorithm=function(e,r){e=e.toUpperCase(),t.cipher.algorithms[e]=r},t.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in t.cipher.algorithms?t.cipher.algorithms[e]:null};var e=t.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};e.prototype.start=function(e){e=e||{};var r={};for(var n in e)r[n]=e[n];r.decrypt=this._decrypt,this._finish=!1,this._input=t.util.createBuffer(),this.output=e.output||t.util.createBuffer(),this.mode.start(r)},e.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}}var e="cipher";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e){if("string"==typeof e&&(e=t.util.createBuffer(e)),t.util.isArray(e)&&e.length>4){var r=e;e=t.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}return t.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function r(t){t[t.length-1]=t[t.length-1]+1&4294967295}function n(t){return[t/4294967296|0,4294967295&t]}t.cipher=t.cipher||{};var i=t.cipher.modes=t.cipher.modes||{};i.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(t){},i.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2)&&(t.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=e(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(t,e,n){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}r(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var i=t.util.createBuffer(e.iv);this._cipherLength=0;var o;if(o="additionalData"in e?t.util.createBuffer(e.additionalData):t.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=t.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=i.length();if(12===a)this._j0=[i.getInt32(),i.getInt32(),i.getInt32(),1];else{for(this._j0=[0,0,0,0];i.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[i.getInt32(),i.getInt32(),i.getInt32(),i.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(n(8*a)))}this._inBlock=this._j0.slice(0),r(this._inBlock),this._partialBytes=0,o=t.util.createBuffer(o),this._aDataLength=n(8*o.length());var s=o.length()%this.blockSize;for(s&&o.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];o.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[o.getInt32(),o.getInt32(),o.getInt32(),o.getInt32()])},i.gcm.prototype.encrypt=function(t,e,n){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(0===a||n){if(n){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),r(this._inBlock)},i.gcm.prototype.decrypt=function(t,e,n){var i=t.length();if(i<this.blockSize&&!(n&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),r(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,r){var i=!0;r.decrypt&&r.overflow&&e.truncate(this.blockSize-r.overflow),this.tag=t.util.createBuffer();var o=this._aDataLength.concat(n(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var a=[];this.cipher.encrypt(this._j0,a);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^a[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),r.decrypt&&this.tag.bytes()!==this._tag&&(i=!1),i},i.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},i.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>4*(7-r%8)&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},i.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},i.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var s=[0,0,0,0],u=a/n|0,c=(n-1-a%n)*e;s[u]=1<<e-1<<c,o[a]=this.generateSubHashTable(this.multiply(s,t),e)}return o},i.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var s=i[o],u=i[a];i[o+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var c=i[o^n];i[o]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i}}var e="cipherModes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,r){var n=function(){return new t.aes.Algorithm(e,r)};t.cipher.registerAlgorithm(e,n)}function r(){f=!0,u=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;a=new Array(256),s=new Array(256),c=new Array(4),l=new Array(4);for(var e=0;e<4;++e)c[e]=new Array(256),l[e]=new Array(256);for(var r,n,i,o,h,p,d,y=0,g=0,e=0;e<256;++e){o=g^g<<1^g<<2^g<<3^g<<4,o=o>>8^255&o^99,a[y]=o,s[o]=y,h=t[o],r=t[y],n=t[r],i=t[n],p=h<<24^o<<16^o<<8^(o^h),d=(r^n^i)<<24^(y^i)<<16^(y^n^i)<<8^(y^r^i);for(var m=0;m<4;++m)c[m][y]=p,l[m][o]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===y?y=g=1:(y=r^t[t[t[r^i]]],g^=t[t[g]])}}function n(t,e){for(var r,n=t.slice(0),i=1,o=n.length,s=o+6+1,c=h*s,f=o;f<c;++f)r=n[f-1],f%o===0?(r=a[r>>>16&255]<<24^a[r>>>8&255]<<16^a[255&r]<<8^a[r>>>24]^u[i]<<24,i++):o>6&&f%o===4&&(r=a[r>>>24]<<24^a[r>>>16&255]<<16^a[r>>>8&255]<<8^a[255&r]),n[f]=n[f-o]^r;if(e){var p,d=l[0],y=l[1],g=l[2],m=l[3],v=n.slice(0);c=n.length;for(var f=0,b=c-h;f<c;f+=h,b-=h)if(0===f||f===c-h)v[f]=n[b],v[f+1]=n[b+3],v[f+2]=n[b+2],v[f+3]=n[b+1];else for(var B=0;B<h;++B)p=n[b+B],v[f+(3&-B)]=d[a[p>>>24]]^y[a[p>>>16&255]]^g[a[p>>>8&255]]^m[a[255&p]];n=v}return n}function i(t,e,r,n){var i,o,u,f,h,p=t.length/4-1;n?(i=l[0],o=l[1],u=l[2],f=l[3],h=s):(i=c[0],o=c[1],u=c[2],f=c[3],h=a);var d,y,g,m,v,b,B;d=e[0]^t[0],y=e[n?3:1]^t[1],g=e[2]^t[2],m=e[n?1:3]^t[3];for(var S=3,C=1;C<p;++C)v=i[d>>>24]^o[y>>>16&255]^u[g>>>8&255]^f[255&m]^t[++S],b=i[y>>>24]^o[g>>>16&255]^u[m>>>8&255]^f[255&d]^t[++S],B=i[g>>>24]^o[m>>>16&255]^u[d>>>8&255]^f[255&y]^t[++S],m=i[m>>>24]^o[d>>>16&255]^u[y>>>8&255]^f[255&g]^t[++S],d=v,y=b,g=B;r[0]=h[d>>>24]<<24^h[y>>>16&255]<<16^h[g>>>8&255]<<8^h[255&m]^t[++S],r[n?3:1]=h[y>>>24]<<24^h[g>>>16&255]<<16^h[m>>>8&255]<<8^h[255&d]^t[++S],r[2]=h[g>>>24]<<24^h[m>>>16&255]<<16^h[d>>>8&255]<<8^h[255&y]^t[++S],r[n?1:3]=h[m>>>24]<<24^h[d>>>16&255]<<16^h[y>>>8&255]<<8^h[255&g]^t[++S]}function o(e){e=e||{};var r,n=(e.mode||"CBC").toUpperCase(),i="AES-"+n;r=e.decrypt?t.cipher.createDecipher(i,e.key):t.cipher.createCipher(i,e.key);var o=r.start;return r.start=function(e,n){var i=null;n instanceof t.util.ByteBuffer&&(i=n,n={}),n=n||{},n.output=i,n.iv=e,o.call(r,n)},r}t.aes=t.aes||{},t.aes.startEncrypting=function(t,e,r,n){var i=o({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i},t.aes.createEncryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!1,mode:e})},t.aes.startDecrypting=function(t,e,r,n){var i=o({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i},t.aes.createDecryptionCipher=function(t,e){return o({key:t,output:null,decrypt:!0,mode:e})},t.aes.Algorithm=function(t,e){f||r();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return i(n._w,t,e,!1)},decrypt:function(t,e){return i(n._w,t,e,!0)}}}),n._init=!1},t.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var r,i=e.key;if("string"!=typeof i||16!==i.length&&24!==i.length&&32!==i.length){if(t.util.isArray(i)&&(16===i.length||24===i.length||32===i.length)){r=i,i=t.util.createBuffer();for(var o=0;o<r.length;++o)i.putByte(r[o])}}else i=t.util.createBuffer(i);if(!t.util.isArray(i)){r=i,i=[];var a=r.length();if(16===a||24===a||32===a){a>>>=2;for(var o=0;o<a;++o)i.push(r.getInt32())}}if(!t.util.isArray(i)||4!==i.length&&6!==i.length&&8!==i.length)throw new Error("Invalid key parameter.");var s=this.mode.name,u=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=n(i,e.decrypt&&!u),this._init=!0}},t.aes._expandKey=function(t,e){return f||r(),n(t,e)},t.aes._updateBlock=i,e("AES-ECB",t.cipher.modes.ecb),e("AES-CBC",t.cipher.modes.cbc),e("AES-CFB",t.cipher.modes.cfb),e("AES-OFB",t.cipher.modes.ofb),e("AES-CTR",t.cipher.modes.ctr),e("AES-GCM",t.cipher.modes.gcm);var a,s,u,c,l,f=!1,h=4}var e="aes";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./cipher","./cipherModes","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.pki=t.pki||{};var e=t.pki.oids=t.oids=t.oids||{};e["1.2.840.113549.1.1.1"]="rsaEncryption",e.rsaEncryption="1.2.840.113549.1.1.1",e["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",e.md5WithRSAEncryption="1.2.840.113549.1.1.4",e["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",e.sha1WithRSAEncryption="1.2.840.113549.1.1.5",e["1.2.840.113549.1.1.7"]="RSAES-OAEP",e["RSAES-OAEP"]="1.2.840.113549.1.1.7",e["1.2.840.113549.1.1.8"]="mgf1",e.mgf1="1.2.840.113549.1.1.8",e["1.2.840.113549.1.1.9"]="pSpecified",e.pSpecified="1.2.840.113549.1.1.9",e["1.2.840.113549.1.1.10"]="RSASSA-PSS",e["RSASSA-PSS"]="1.2.840.113549.1.1.10",e["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",e.sha256WithRSAEncryption="1.2.840.113549.1.1.11",e["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",e.sha384WithRSAEncryption="1.2.840.113549.1.1.12",e["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",e.sha512WithRSAEncryption="1.2.840.113549.1.1.13",e["1.3.14.3.2.7"]="desCBC",e.desCBC="1.3.14.3.2.7",e["1.3.14.3.2.26"]="sha1",e.sha1="1.3.14.3.2.26",e["2.16.840.1.101.3.4.2.1"]="sha256",e.sha256="2.16.840.1.101.3.4.2.1",e["2.16.840.1.101.3.4.2.2"]="sha384",e.sha384="2.16.840.1.101.3.4.2.2",e["2.16.840.1.101.3.4.2.3"]="sha512",e.sha512="2.16.840.1.101.3.4.2.3",e["1.2.840.113549.2.5"]="md5",e.md5="1.2.840.113549.2.5",e["1.2.840.113549.1.7.1"]="data",e.data="1.2.840.113549.1.7.1",e["1.2.840.113549.1.7.2"]="signedData",e.signedData="1.2.840.113549.1.7.2",e["1.2.840.113549.1.7.3"]="envelopedData",e.envelopedData="1.2.840.113549.1.7.3",e["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",e.signedAndEnvelopedData="1.2.840.113549.1.7.4",e["1.2.840.113549.1.7.5"]="digestedData",e.digestedData="1.2.840.113549.1.7.5",e["1.2.840.113549.1.7.6"]="encryptedData",e.encryptedData="1.2.840.113549.1.7.6",e["1.2.840.113549.1.9.1"]="emailAddress",e.emailAddress="1.2.840.113549.1.9.1",e["1.2.840.113549.1.9.2"]="unstructuredName",e.unstructuredName="1.2.840.113549.1.9.2",e["1.2.840.113549.1.9.3"]="contentType",e.contentType="1.2.840.113549.1.9.3",e["1.2.840.113549.1.9.4"]="messageDigest",e.messageDigest="1.2.840.113549.1.9.4",e["1.2.840.113549.1.9.5"]="signingTime",e.signingTime="1.2.840.113549.1.9.5",e["1.2.840.113549.1.9.6"]="counterSignature",e.counterSignature="1.2.840.113549.1.9.6",e["1.2.840.113549.1.9.7"]="challengePassword",e.challengePassword="1.2.840.113549.1.9.7",e["1.2.840.113549.1.9.8"]="unstructuredAddress",e.unstructuredAddress="1.2.840.113549.1.9.8",e["1.2.840.113549.1.9.14"]="extensionRequest",e.extensionRequest="1.2.840.113549.1.9.14",e["1.2.840.113549.1.9.20"]="friendlyName",e.friendlyName="1.2.840.113549.1.9.20",e["1.2.840.113549.1.9.21"]="localKeyId",e.localKeyId="1.2.840.113549.1.9.21",e["1.2.840.113549.1.9.22.1"]="x509Certificate",e.x509Certificate="1.2.840.113549.1.9.22.1",e["1.2.840.113549.1.12.10.1.1"]="keyBag",e.keyBag="1.2.840.113549.1.12.10.1.1",e["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",e.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",e["1.2.840.113549.1.12.10.1.3"]="certBag",e.certBag="1.2.840.113549.1.12.10.1.3",e["1.2.840.113549.1.12.10.1.4"]="crlBag",e.crlBag="1.2.840.113549.1.12.10.1.4",e["1.2.840.113549.1.12.10.1.5"]="secretBag",e.secretBag="1.2.840.113549.1.12.10.1.5",e["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",e.safeContentsBag="1.2.840.113549.1.12.10.1.6",e["1.2.840.113549.1.5.13"]="pkcs5PBES2",e.pkcs5PBES2="1.2.840.113549.1.5.13",e["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",e.pkcs5PBKDF2="1.2.840.113549.1.5.12",e["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",e.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",e["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",e.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",e["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",e["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",e["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",e["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",e["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",e["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",e["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",e["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",e["1.2.840.113549.3.7"]="des-EDE3-CBC",e["des-EDE3-CBC"]="1.2.840.113549.3.7",e["2.16.840.1.101.3.4.1.2"]="aes128-CBC",e["aes128-CBC"]="2.16.840.1.101.3.4.1.2",e["2.16.840.1.101.3.4.1.22"]="aes192-CBC",e["aes192-CBC"]="2.16.840.1.101.3.4.1.22",e["2.16.840.1.101.3.4.1.42"]="aes256-CBC",e["aes256-CBC"]="2.16.840.1.101.3.4.1.42",e["2.5.4.3"]="commonName",e.commonName="2.5.4.3",e["2.5.4.5"]="serialName",e.serialName="2.5.4.5",e["2.5.4.6"]="countryName",e.countryName="2.5.4.6",e["2.5.4.7"]="localityName",e.localityName="2.5.4.7",e["2.5.4.8"]="stateOrProvinceName",e.stateOrProvinceName="2.5.4.8",e["2.5.4.10"]="organizationName",e.organizationName="2.5.4.10",e["2.5.4.11"]="organizationalUnitName",e.organizationalUnitName="2.5.4.11",e["2.16.840.1.113730.1.1"]="nsCertType",e.nsCertType="2.16.840.1.113730.1.1",e["2.5.29.1"]="authorityKeyIdentifier",e["2.5.29.2"]="keyAttributes",e["2.5.29.3"]="certificatePolicies",e["2.5.29.4"]="keyUsageRestriction",e["2.5.29.5"]="policyMapping",e["2.5.29.6"]="subtreesConstraint",e["2.5.29.7"]="subjectAltName",e["2.5.29.8"]="issuerAltName",e["2.5.29.9"]="subjectDirectoryAttributes",e["2.5.29.10"]="basicConstraints",e["2.5.29.11"]="nameConstraints",e["2.5.29.12"]="policyConstraints",e["2.5.29.13"]="basicConstraints",e["2.5.29.14"]="subjectKeyIdentifier",e.subjectKeyIdentifier="2.5.29.14",e["2.5.29.15"]="keyUsage",e.keyUsage="2.5.29.15",e["2.5.29.16"]="privateKeyUsagePeriod",e["2.5.29.17"]="subjectAltName",e.subjectAltName="2.5.29.17",e["2.5.29.18"]="issuerAltName",e.issuerAltName="2.5.29.18",e["2.5.29.19"]="basicConstraints",e.basicConstraints="2.5.29.19",e["2.5.29.20"]="cRLNumber",e["2.5.29.21"]="cRLReason",e["2.5.29.22"]="expirationDate",e["2.5.29.23"]="instructionCode",e["2.5.29.24"]="invalidityDate",e["2.5.29.25"]="cRLDistributionPoints",e["2.5.29.26"]="issuingDistributionPoint",e["2.5.29.27"]="deltaCRLIndicator",e["2.5.29.28"]="issuingDistributionPoint",e["2.5.29.29"]="certificateIssuer",
e["2.5.29.30"]="nameConstraints",e["2.5.29.31"]="cRLDistributionPoints",e["2.5.29.32"]="certificatePolicies",e["2.5.29.33"]="policyMappings",e["2.5.29.34"]="policyConstraints",e["2.5.29.35"]="authorityKeyIdentifier",e.authorityKeyIdentifier="2.5.29.35",e["2.5.29.36"]="policyConstraints",e["2.5.29.37"]="extKeyUsage",e.extKeyUsage="2.5.29.37",e["2.5.29.46"]="freshestCRL",e["2.5.29.54"]="inhibitAnyPolicy",e["1.3.6.1.5.5.7.3.1"]="serverAuth",e.serverAuth="1.3.6.1.5.5.7.3.1",e["1.3.6.1.5.5.7.3.2"]="clientAuth",e.clientAuth="1.3.6.1.5.5.7.3.2",e["1.3.6.1.5.5.7.3.3"]="codeSigning",e.codeSigning="1.3.6.1.5.5.7.3.3",e["1.3.6.1.5.5.7.3.4"]="emailProtection",e.emailProtection="1.3.6.1.5.5.7.3.4",e["1.3.6.1.5.5.7.3.8"]="timeStamping",e.timeStamping="1.3.6.1.5.5.7.3.8"}var e="oids";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e=t.asn1=t.asn1||{};e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},e.create=function(e,r,n,i){if(t.util.isArray(i)){for(var o=[],a=0;a<i.length;++a)void 0!==i[a]&&o.push(i[a]);i=o}return{tagClass:e,type:r,constructed:n,composed:n||t.util.isArray(i),value:i}};var r=e.getBerValueLength=function(t){var e=t.getByte();if(128!==e){var r,n=128&e;return r=n?t.getInt((127&e)<<3):e}};e.fromDer=function(n,i){if(void 0===i&&(i=!0),"string"==typeof n&&(n=t.util.createBuffer(n)),n.length()<2){var o=new Error("Too few bytes to parse DER.");throw o.bytes=n.length(),o}var a=n.getByte(),s=192&a,u=31&a,c=r(n);if(n.length()<c){if(i){var o=new Error("Too few bytes to read ASN.1 value.");throw o.detail=n.length()+" < "+c,o}c=n.length()}var l,f=32===(32&a),h=f;if(!h&&s===e.Class.UNIVERSAL&&u===e.Type.BITSTRING&&c>1){var p=n.read,d=n.getByte();if(0===d){a=n.getByte();var y=192&a;if(y===e.Class.UNIVERSAL||y===e.Class.CONTEXT_SPECIFIC)try{var g=r(n);h=g===c-(n.read-p),h&&(++p,--c)}catch(m){}}n.read=p}if(h)if(l=[],void 0===c)for(;;){if(n.bytes(2)===String.fromCharCode(0,0)){n.getBytes(2);break}l.push(e.fromDer(n,i))}else for(var v=n.length();c>0;)l.push(e.fromDer(n,i)),c-=v-n.length(),v=n.length();else{if(void 0===c){if(i)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=n.length()}if(u===e.Type.BMPSTRING){l="";for(var b=0;b<c;b+=2)l+=String.fromCharCode(n.getInt16())}else l=n.getBytes(c)}return e.create(s,u,f,l)},e.toDer=function(r){var n=t.util.createBuffer(),i=r.tagClass|r.type,o=t.util.createBuffer();if(r.composed){r.constructed?i|=32:o.putByte(0);for(var a=0;a<r.value.length;++a)void 0!==r.value[a]&&o.putBuffer(e.toDer(r.value[a]))}else if(r.type===e.Type.BMPSTRING)for(var a=0;a<r.value.length;++a)o.putInt16(r.value.charCodeAt(a));else o.putBytes(r.value);if(n.putByte(i),o.length()<=127)n.putByte(127&o.length());else{var s=o.length(),u="";do u+=String.fromCharCode(255&s),s>>>=8;while(s>0);n.putByte(128|u.length);for(var a=u.length-1;a>=0;--a)n.putByte(u.charCodeAt(a))}return n.putBuffer(o),n},e.oidToDer=function(e){var r=e.split("."),n=t.util.createBuffer();n.putByte(40*parseInt(r[0],10)+parseInt(r[1],10));for(var i,o,a,s,u=2;u<r.length;++u){i=!0,o=[],a=parseInt(r[u],10);do s=127&a,a>>>=7,i||(s|=128),o.push(s),i=!1;while(a>0);for(var c=o.length-1;c>=0;--c)n.putByte(o[c])}return n},e.derToOid=function(e){var r;"string"==typeof e&&(e=t.util.createBuffer(e));var n=e.getByte();r=Math.floor(n/40)+"."+n%40;for(var i=0;e.length()>0;)n=e.getByte(),i<<=7,128&n?i+=127&n:(r+="."+(i+n),i=0);return r},e.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,s,0),c&&(u=t.charAt(c),"+"===u||"-"===u)){var l=parseInt(t.substr(c+1,2),10),f=parseInt(t.substr(c+4,2),10),h=60*l+f;h*=6e4,"+"===u?e.setTime(+e-h):e.setTime(+e+h)}return e},e.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var f=t.length-5,h=t.charAt(f);if("+"===h||"-"===h){var p=parseInt(t.substr(f+1,2),10),d=parseInt(t.substr(f+4,2),10);c=60*p+d,c*=6e4,"+"===h&&(c*=-1),l=!0}return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,s,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(o,a,s,u)),e},e.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},e.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z"},e.integerToDer=function(e){var r=t.util.createBuffer();if(e>=-128&&e<128)return r.putSignedInt(e,8);if(e>=-32768&&e<32768)return r.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return r.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return r.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},e.derToInteger=function(e){"string"==typeof e&&(e=t.util.createBuffer(e));var r=8*e.length();if(r>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(r)},e.validate=function(r,n,i,o){var a=!1;if(r.tagClass!==n.tagClass&&"undefined"!=typeof n.tagClass||r.type!==n.type&&"undefined"!=typeof n.type)o&&(r.tagClass!==n.tagClass&&o.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+r.tagClass+'"'),r.type!==n.type&&o.push("["+n.name+'] Expected type "'+n.type+'", got "'+r.type+'"'));else if(r.constructed===n.constructed||"undefined"==typeof n.constructed){if(a=!0,n.value&&t.util.isArray(n.value))for(var s=0,u=0;a&&u<n.value.length;++u)a=n.value[u].optional||!1,r.value[s]&&(a=e.validate(r.value[s],n.value[u],i,o),a?++s:n.value[u].optional&&(a=!0)),!a&&o&&o.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+r.value.length+'"');a&&i&&(n.capture&&(i[n.capture]=r.value),n.captureAsn1&&(i[n.captureAsn1]=r))}else o&&o.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+r.constructed+'"');return a};var n=/[^\\u0000-\\u00ff]/;e.prettyPrint=function(r,i,o){var a="";i=i||0,o=o||2,i>0&&(a+="\n");for(var s="",u=0;u<i*o;++u)s+=" ";switch(a+=s+"Tag: ",r.tagClass){case e.Class.UNIVERSAL:a+="Universal:";break;case e.Class.APPLICATION:a+="Application:";break;case e.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case e.Class.PRIVATE:a+="Private:"}if(r.tagClass===e.Class.UNIVERSAL)switch(a+=r.type,r.type){case e.Type.NONE:a+=" (None)";break;case e.Type.BOOLEAN:a+=" (Boolean)";break;case e.Type.BITSTRING:a+=" (Bit string)";break;case e.Type.INTEGER:a+=" (Integer)";break;case e.Type.OCTETSTRING:a+=" (Octet string)";break;case e.Type.NULL:a+=" (Null)";break;case e.Type.OID:a+=" (Object Identifier)";break;case e.Type.ODESC:a+=" (Object Descriptor)";break;case e.Type.EXTERNAL:a+=" (External or Instance of)";break;case e.Type.REAL:a+=" (Real)";break;case e.Type.ENUMERATED:a+=" (Enumerated)";break;case e.Type.EMBEDDED:a+=" (Embedded PDV)";break;case e.Type.UTF8:a+=" (UTF8)";break;case e.Type.ROID:a+=" (Relative Object Identifier)";break;case e.Type.SEQUENCE:a+=" (Sequence)";break;case e.Type.SET:a+=" (Set)";break;case e.Type.PRINTABLESTRING:a+=" (Printable String)";break;case e.Type.IA5String:a+=" (IA5String (ASCII))";break;case e.Type.UTCTIME:a+=" (UTC time)";break;case e.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case e.Type.BMPSTRING:a+=" (BMP String)"}else a+=r.type;if(a+="\n",a+=s+"Constructed: "+r.constructed+"\n",r.composed){for(var c=0,l="",u=0;u<r.value.length;++u)void 0!==r.value[u]&&(c+=1,l+=e.prettyPrint(r.value[u],i+1,o),u+1<r.value.length&&(l+=","));a+=s+"Sub values: "+c+l}else{if(a+=s+"Value: ",r.type===e.Type.OID){var f=e.derToOid(r.value);a+=f,t.pki&&t.pki.oids&&f in t.pki.oids&&(a+=" ("+t.pki.oids[f]+") ")}if(r.type===e.Type.INTEGER)try{a+=e.derToInteger(r.value)}catch(h){a+="0x"+t.util.bytesToHex(r.value)}else r.type===e.Type.OCTETSTRING?(n.test(r.value)||(a+="("+r.value+") "),a+="0x"+t.util.bytesToHex(r.value)):a+=r.type===e.Type.UTF8?t.util.decodeUtf8(r.value):r.type===e.Type.PRINTABLESTRING||r.type===e.Type.IA5String?r.value:n.test(r.value)?"0x"+t.util.bytesToHex(r.value):0===r.value.length?"[null]":r.value}return a}}var e="asn1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./oids"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){i=String.fromCharCode(128),i+=t.util.fillString(String.fromCharCode(0),64),o=!0}function r(t,e,r){for(var n,i,o,a,s,u,c,l,f=r.length();f>=64;){for(i=t.h0,o=t.h1,a=t.h2,s=t.h3,u=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,c=s^o&(a^s),n=(i<<5|i>>>27)+c+u+1518500249+n,u=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;l<20;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,c=s^o&(a^s),n=(i<<5|i>>>27)+c+u+1518500249+n,u=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;l<32;++l)n=e[l-3]^e[l-8]^e[l-14]^e[l-16],n=n<<1|n>>>31,e[l]=n,c=o^a^s,n=(i<<5|i>>>27)+c+u+1859775393+n,u=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;l<40;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=o^a^s,n=(i<<5|i>>>27)+c+u+1859775393+n,u=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;l<60;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=o&a|s&(o^a),n=(i<<5|i>>>27)+c+u+2400959708+n,u=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;l<80;++l)n=e[l-6]^e[l-16]^e[l-28]^e[l-32],n=n<<2|n>>>30,e[l]=n,c=o^a^s,n=(i<<5|i>>>27)+c+u+3395469782+n,u=s,s=a,a=o<<30|o>>>2,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,f-=64}}var n=t.sha1=t.sha1||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha1=t.md.algorithms.sha1=n,n.create=function(){o||e();var n=null,a=t.util.createBuffer(),s=new Array(80),u={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,r=0;r<e;++r)u.fullMessageLength.push(0);return a=t.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},u},u.start(),u.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e));var o=e.length;u.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=o[1],o[1]=o[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),r(n,s,a),(a.read>2048||0===a.length())&&a.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(a.bytes());var o=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=o&u.blockLength-1;e.putBytes(i.substr(0,u.blockLength-c));for(var l,f,h=(t.util.createBuffer(),8*u.fullMessageLength[0]),p=0;p<u.fullMessageLength.length;++p)l=8*u.fullMessageLength[p+1],f=l/4294967296>>>0,h+=f,e.putInt32(h>>>0),h=l;var d={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4};r(d,s,e);var y=t.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y},u};var i=null,o=!1}var e="sha1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){i=String.fromCharCode(128),i+=t.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function r(t,e,r){for(var n,i,o,s,u,c,l,f,h,p,d,y,g,m,v,b=r.length();b>=64;){for(l=0;l<16;++l)e[l]=r.getInt32();for(;l<64;++l)n=e[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[l]=n+e[l-7]+i+e[l-16]|0;for(f=t.h0,h=t.h1,p=t.h2,d=t.h3,y=t.h4,g=t.h5,m=t.h6,v=t.h7,l=0;l<64;++l)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),u=m^y&(g^m),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&h|p&(f^h),n=v+s+u+a[l]+e[l],i=o+c,v=m,m=g,g=y,y=d+n|0,d=p,p=h,h=f,f=n+i|0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+p|0,t.h3=t.h3+d|0,t.h4=t.h4+y|0,t.h5=t.h5+g|0,t.h6=t.h6+m|0,t.h7=t.h7+v|0,b-=64}}var n=t.sha256=t.sha256||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha256=t.md.algorithms.sha256=n,n.create=function(){o||e();var n=null,a=t.util.createBuffer(),s=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var e=u.messageLengthSize/4,r=0;r<e;++r)u.fullMessageLength.push(0);return a=t.util.createBuffer(),n={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u},u.start(),u.update=function(e,i){"utf8"===i&&(e=t.util.encodeUtf8(e));var o=e.length;u.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=u.fullMessageLength.length-1;c>=0;--c)u.fullMessageLength[c]+=o[1],o[1]=o[0]+(u.fullMessageLength[c]/4294967296>>>0),u.fullMessageLength[c]=u.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return a.putBytes(e),r(n,s,a),(a.read>2048||0===a.length())&&a.compact(),u},u.digest=function(){var e=t.util.createBuffer();e.putBytes(a.bytes());var o=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,c=o&u.blockLength-1;e.putBytes(i.substr(0,u.blockLength-c));for(var l,f,h=(t.util.createBuffer(),8*u.fullMessageLength[0]),p=0;p<u.fullMessageLength.length;++p)l=8*u.fullMessageLength[p+1],f=l/4294967296>>>0,h+=f,e.putInt32(h>>>0),h=l;var d={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4,h5:n.h5,h6:n.h6,h7:n.h7};r(d,s,e);var y=t.util.createBuffer();return y.putInt32(d.h0),y.putInt32(d.h1),y.putInt32(d.h2),y.putInt32(d.h3),y.putInt32(d.h4),y.putInt32(d.h5),y.putInt32(d.h6),y.putInt32(d.h7),y},u};var i=null,o=!1,a=null}var e="sha256";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(){o=String.fromCharCode(128),o+=t.util.fillString(String.fromCharCode(0),128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function r(t,e,r){for(var n,i,o,a,u,c,l,f,h,p,d,y,g,m,v,b,B,S,C,A,I,w,E,T,k,P,_,R,N,L,D,x,O,F,M,G=r.length();G>=128;){for(N=0;N<16;++N)e[N][0]=r.getInt32()>>>0,e[N][1]=r.getInt32()>>>0;for(;N<80;++N)x=e[N-2],L=x[0],D=x[1],n=((L>>>19|D<<13)^(D>>>29|L<<3)^L>>>6)>>>0,i=((L<<13|D>>>19)^(D<<3|L>>>29)^(L<<26|D>>>6))>>>0,F=e[N-15],L=F[0],D=F[1],o=((L>>>1|D<<31)^(L>>>8|D<<24)^L>>>7)>>>0,a=((L<<31|D>>>1)^(L<<24|D>>>8)^(L<<25|D>>>7))>>>0,O=e[N-7],M=e[N-16],D=i+O[1]+a+M[1],e[N][0]=n+O[0]+o+M[0]+(D/4294967296>>>0)>>>0,e[N][1]=D>>>0;for(g=t[0][0],m=t[0][1],v=t[1][0],b=t[1][1],B=t[2][0],S=t[2][1],C=t[3][0],A=t[3][1],I=t[4][0],w=t[4][1],E=t[5][0],T=t[5][1],k=t[6][0],P=t[6][1],_=t[7][0],R=t[7][1],N=0;N<80;++N)l=((I>>>14|w<<18)^(I>>>18|w<<14)^(w>>>9|I<<23))>>>0,f=((I<<18|w>>>14)^(I<<14|w>>>18)^(w<<23|I>>>9))>>>0,h=(k^I&(E^k))>>>0,p=(P^w&(T^P))>>>0,u=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,c=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,d=(g&v|B&(g^v))>>>0,y=(m&b|S&(m^b))>>>0,D=R+f+p+s[N][1]+e[N][1],n=_+l+h+s[N][0]+e[N][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=c+y,o=u+d+(D/4294967296>>>0)>>>0,a=D>>>0,_=k,R=P,k=E,P=T,E=I,T=w,D=A+i,I=C+n+(D/4294967296>>>0)>>>0,w=D>>>0,C=B,A=S,B=v,S=b,v=g,b=m,D=i+a,g=n+o+(D/4294967296>>>0)>>>0,m=D>>>0;D=t[0][1]+m,t[0][0]=t[0][0]+g+(D/4294967296>>>0)>>>0,t[0][1]=D>>>0,D=t[1][1]+b,t[1][0]=t[1][0]+v+(D/4294967296>>>0)>>>0,t[1][1]=D>>>0,D=t[2][1]+S,t[2][0]=t[2][0]+B+(D/4294967296>>>0)>>>0,t[2][1]=D>>>0,D=t[3][1]+A,t[3][0]=t[3][0]+C+(D/4294967296>>>0)>>>0,t[3][1]=D>>>0,D=t[4][1]+w,t[4][0]=t[4][0]+I+(D/4294967296>>>0)>>>0,t[4][1]=D>>>0,D=t[5][1]+T,t[5][0]=t[5][0]+E+(D/4294967296>>>0)>>>0,t[5][1]=D>>>0,D=t[6][1]+P,t[6][0]=t[6][0]+k+(D/4294967296>>>0)>>>0,t[6][1]=D>>>0,D=t[7][1]+R,t[7][0]=t[7][0]+_+(D/4294967296>>>0)>>>0,t[7][1]=D>>>0,G-=128}}var n=t.sha512=t.sha512||{};t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},t.md.sha512=t.md.algorithms.sha512=n;var i=t.sha384=t.sha512.sha384=t.sha512.sha384||{};i.create=function(){return n.create("SHA-384")},t.md.sha384=t.md.algorithms.sha384=i,t.sha512.sha256=t.sha512.sha256||{create:function(){return n.create("SHA-512/256")}},t.md["sha512/256"]=t.md.algorithms["sha512/256"]=t.sha512.sha256,t.sha512.sha224=t.sha512.sha224||{create:function(){return n.create("SHA-512/224")}},t.md["sha512/224"]=t.md.algorithms["sha512/224"]=t.sha512.sha224,n.create=function(n){if(a||e(),"undefined"==typeof n&&(n="SHA-512"),!(n in u))throw new Error("Invalid SHA-512 algorithm: "+n);for(var i=u[n],s=null,c=t.util.createBuffer(),l=new Array(80),f=0;f<80;++f)l[f]=new Array(2);var h={algorithm:n.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,fullMessageLength:null,messageLengthSize:16};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var e=h.messageLengthSize/4,r=0;r<e;++r)h.fullMessageLength.push(0);c=t.util.createBuffer(),s=new Array(i.length);for(var r=0;r<i.length;++r)s[r]=i[r].slice(0);return h},h.start(),h.update=function(e,n){"utf8"===n&&(e=t.util.encodeUtf8(e));var i=e.length;h.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var o=h.fullMessageLength.length-1;o>=0;--o)h.fullMessageLength[o]+=i[1],i[1]=i[0]+(h.fullMessageLength[o]/4294967296>>>0),h.fullMessageLength[o]=h.fullMessageLength[o]>>>0,i[0]=i[1]/4294967296>>>0;return c.putBytes(e),r(s,l,c),(c.read>2048||0===c.length())&&c.compact(),h},h.digest=function(){var e=t.util.createBuffer();e.putBytes(c.bytes());var i=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,a=i&h.blockLength-1;e.putBytes(o.substr(0,h.blockLength-a));for(var u,f,p=(t.util.createBuffer(),8*h.fullMessageLength[0]),d=0;d<h.fullMessageLength.length;++d)u=8*h.fullMessageLength[d+1],f=u/4294967296>>>0,p+=f,e.putInt32(p>>>0),p=u;for(var y=new Array(s.length),d=0;d<s.length;++d)y[d]=s[d].slice(0);r(y,l,e);var g,m=t.util.createBuffer();g="SHA-512"===n?y.length:"SHA-384"===n?y.length-2:y.length-4;for(var d=0;d<g;++d)m.putInt32(y[d][0]),d===g-1&&"SHA-512/224"===n||m.putInt32(y[d][1]);return m},h};var o=null,a=!1,s=null,u=null}var e="sha512";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.md=t.md||{},t.md.algorithms={md5:t.md5,sha1:t.sha1,sha256:t.sha256},t.md.md5=t.md5,t.md.sha1=t.sha1,t.md.sha256=t.sha256}var e="md";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md5","./sha1","./sha256","./sha512"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e=t.hmac=t.hmac||{};e.create=function(){var e=null,r=null,n=null,i=null,o={};return o.start=function(o,a){if(null!==o)if("string"==typeof o){if(o=o.toLowerCase(),!(o in t.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');r=t.md.algorithms[o].create()}else r=o;if(null===a)a=e;else{if("string"==typeof a)a=t.util.createBuffer(a);else if(t.util.isArray(a)){var s=a;a=t.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var c=a.length();c>r.blockLength&&(r.start(),r.update(a.bytes()),a=r.digest()),n=t.util.createBuffer(),i=t.util.createBuffer(),c=a.length();for(var u=0;u<c;++u){var s=a.at(u);n.putByte(54^s),i.putByte(92^s)}if(c<r.blockLength)for(var s=r.blockLength-c,u=0;u<s;++u)n.putByte(54),i.putByte(92);e=a,n=n.bytes(),i=i.bytes()}r.start(),r.update(n)},o.update=function(t){r.update(t)},o.getMac=function(){var t=r.digest().bytes();return r.start(),r.update(i),r.update(t),r.digest()},o.digest=o.getMac,o}}var e="hmac";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){var e="undefined"!=typeof process&&process.versions&&process.versions.node,r=null;t.disableNativeCode||!e||process.versions["node-webkit"]||(r=require("crypto"));var n=t.prng=t.prng||{};n.create=function(e){function n(t){if(s.pools[0].messageLength>=32)return o(),t();var e=32-s.pools[0].messageLength<<5;s.seedFile(e,function(e,r){return e?t(e):(s.collect(r),o(),void t())})}function i(){if(s.pools[0].messageLength>=32)return o();var t=32-s.pools[0].messageLength<<5;s.collect(s.seedFileSync(t)),o()}function o(){var t=s.plugin.md.create();t.update(s.pools[0].digest().getBytes()),s.pools[0].start();for(var e=1,r=1;r<32;++r)e=31===e?2147483648:e<<2,e%s.reseeds===0&&(t.update(s.pools[r].digest().getBytes()),s.pools[r].start());var n=t.digest().getBytes();t.start(),t.update(n);var i=t.digest().getBytes();s.key=s.plugin.formatKey(n),s.seed=s.plugin.formatSeed(i),s.reseeds=4294967295===s.reseeds?0:s.reseeds+1,s.generated=0}function a(e){var r=null;if("undefined"!=typeof window){var n=window.crypto||window.msCrypto;n&&n.getRandomValues&&(r=function(t){return n.getRandomValues(t)})}var i=t.util.createBuffer();if(r)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{r(a);for(var s=0;s<a.length;++s)i.putInt32(a[s])}catch(u){if(!("undefined"!=typeof QuotaExceededError&&u instanceof QuotaExceededError))throw u}}if(i.length()<e)for(var c,l,f,h=Math.floor(65536*Math.random());i.length()<e;){l=16807*(65535&h),c=16807*(h>>16),l+=(32767&c)<<16,l+=c>>15,l=(2147483647&l)+(l>>31),h=4294967295&l;for(var s=0;s<3;++s)f=h>>>(s<<3),f^=Math.floor(256*Math.random()),i.putByte(String.fromCharCode(255&f))}return i.getBytes(e)}for(var s={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},u=e.md,c=new Array(32),l=0;l<32;++l)c[l]=u.create();return s.pools=c,s.pool=0,s.generate=function(e,r){function i(f){if(f)return r(f);if(l.length()>=e)return r(null,l.getBytes(e));if(s.generated>1048575&&(s.key=null),null===s.key)return t.util.nextTick(function(){n(i)});var h=o(s.key,s.seed);s.generated+=h.length,l.putBytes(h),s.key=u(o(s.key,a(s.seed))),s.seed=c(o(s.key,s.seed)),t.util.setImmediate(i)}if(!r)return s.generateSync(e);var o=s.plugin.cipher,a=s.plugin.increment,u=s.plugin.formatKey,c=s.plugin.formatSeed,l=t.util.createBuffer();s.key=null,i()},s.generateSync=function(e){var r=s.plugin.cipher,n=s.plugin.increment,o=s.plugin.formatKey,a=s.plugin.formatSeed;s.key=null;for(var u=t.util.createBuffer();u.length()<e;){s.generated>1048575&&(s.key=null),null===s.key&&i();var c=r(s.key,s.seed);s.generated+=c.length,u.putBytes(c),s.key=o(r(s.key,n(s.seed))),s.seed=a(r(s.key,s.seed))}return u.getBytes(e)},r?(s.seedFile=function(t,e){r.randomBytes(t,function(t,r){return t?e(t):void e(null,r.toString())})},s.seedFileSync=function(t){return r.randomBytes(t).toString()}):(s.seedFile=function(t,e){try{e(null,a(t))}catch(r){e(r)}},s.seedFileSync=a),s.collect=function(t){for(var e=t.length,r=0;r<e;++r)s.pools[s.pool].update(t.substr(r,1)),s.pool=31===s.pool?0:s.pool+1},s.collectInt=function(t,e){for(var r="",n=0;n<e;n+=8)r+=String.fromCharCode(t>>n&255);s.collect(r)},s.registerWorker=function(t){if(t===self)s.seedFile=function(t,e){function r(t){var n=t.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),e(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:t}}})};else{var e=function(e){var r=e.data;r.forge&&r.forge.prng&&s.seedFile(r.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})};t.addEventListener("message",e)}},s}}var e="prng";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e];
}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./md","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){t.random&&t.random.getBytes||!function(e){function r(){var e=t.prng.create(n);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}var n={},i=new Array(4),o=t.util.createBuffer();n.formatKey=function(e){var r=t.util.createBuffer(e);return e=new Array(4),e[0]=r.getInt32(),e[1]=r.getInt32(),e[2]=r.getInt32(),e[3]=r.getInt32(),t.aes._expandKey(e,!1)},n.formatSeed=function(e){var r=t.util.createBuffer(e);return e=new Array(4),e[0]=r.getInt32(),e[1]=r.getInt32(),e[2]=r.getInt32(),e[3]=r.getInt32(),e},n.cipher=function(e,r){return t.aes._updateBlock(e,r,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},n.increment=function(t){return++t[3],t},n.md=t.md.sha256;var a=r(),s="undefined"!=typeof process&&process.versions&&process.versions.node,u=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)})}if(t.disableNativeCode||!s&&!u){if("undefined"==typeof window||void 0===window.document,a.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var f in navigator)try{"string"==typeof navigator[f]&&(l+=navigator[f])}catch(h){}a.collect(l),l=null}e&&(e().mousemove(function(t){a.collectInt(t.clientX,16),a.collectInt(t.clientY,16)}),e().keypress(function(t){a.collectInt(t.charCode,8)}))}if(t.random)for(var f in a)t.random[f]=a[f];else t.random=a;t.random.createInstance=r}("undefined"!=typeof jQuery?jQuery:null)}var e="random";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./md","./prng","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function r(){return new e(null)}function n(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=67108863&a}return i}function i(t,e,r,n,i,o){for(var a=32767&e,s=e>>15;--o>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,l=s*u+c*a;u=a*u+((32767&l)<<15)+r.data[n]+(1073741823&i),i=(u>>>30)+(l>>>15)+s*c+(i>>>30),r.data[n++]=1073741823&u}return i}function o(t,e,r,n,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,l=s*u+c*a;u=a*u+((16383&l)<<14)+r.data[n]+i,i=(u>>28)+(l>>14)+s*c,r.data[n++]=268435455&u}return i}function a(t){return oe.charAt(t)}function s(t,e){var r=ae[t.charCodeAt(e)];return null==r?-1:r}function u(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function c(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function l(t){var e=r();return e.fromInt(t),e}function f(t,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(t,r);n=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var u=8==n?255&t[i]:s(t,i);u<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this.data[this.t++]=u:a+n>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-a)-1)<<a,this.data[this.t++]=u>>this.DB-a):this.data[this.t-1]|=u<<a,a+=n,a>=this.DB&&(a-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&e.ZERO.subTo(this,this)}function h(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function p(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(r=this.data[s]>>u)>0&&(i=!0,o=a(r));s>=0;)u<e?(r=(this.data[s]&(1<<u)-1)<<e-u,r|=this.data[--s]>>(u+=this.DB-e)):(r=this.data[s]>>(u-=e)&n,u<=0&&(u+=this.DB,--s)),r>0&&(i=!0),i&&(o+=a(r));return i?o:"0"}function d(){var t=r();return e.ZERO.subTo(this,t),t}function y(){return this.s<0?this.negate():this}function g(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0}function m(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function v(){return this.t<=0?0:this.DB*(this.t-1)+m(this.data[this.t-1]^this.s&this.DM)}function b(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function B(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function S(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+a+1]=this.data[r]>>i|s,s=(this.data[r]&o)<<n;for(r=a-1;r>=0;--r)e.data[r]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function C(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)return void(e.t=0);var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function A(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function I(t,r){var n=this.abs(),i=t.abs(),o=n.t;for(r.t=o+i.t;--o>=0;)r.data[o]=0;for(o=0;o<i.t;++o)r.data[o+n.t]=n.am(0,i.data[o],r,o,0,n.t);r.s=0,r.clamp(),this.s!=t.s&&e.ZERO.subTo(r,r)}function w(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function E(t,n,i){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=n&&n.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),u=this.s,c=t.s,l=this.DB-m(o.data[o.t-1]);l>0?(o.lShiftTo(l,s),a.lShiftTo(l,i)):(o.copyTo(s),a.copyTo(i));var f=s.t,h=s.data[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,g=1<<this.F2,v=i.t,b=v-f,B=null==n?r():n;for(s.dlShiftTo(b,B),i.compareTo(B)>=0&&(i.data[i.t++]=1,i.subTo(B,i)),e.ONE.dlShiftTo(f,B),B.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--b>=0;){var S=i.data[--v]==h?this.DM:Math.floor(i.data[v]*d+(i.data[v-1]+g)*y);if((i.data[v]+=s.am(0,S,i,b,0,f))<S)for(s.dlShiftTo(b,B),i.subTo(B,i);i.data[v]<--S;)i.subTo(B,i)}null!=n&&(i.drShiftTo(f,n),u!=c&&e.ZERO.subTo(n,n)),i.t=f,i.clamp(),l>0&&i.rShiftTo(l,i),u<0&&e.ZERO.subTo(i,i)}}}function T(t){var n=r();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n}function k(t){this.m=t}function P(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function _(t){return t}function R(t){t.divRemTo(this.m,null,t)}function N(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function L(t,e){t.squareTo(e),this.reduce(e)}function D(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function x(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O(t){var n=r();return t.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),t.s<0&&n.compareTo(e.ZERO)>0&&this.m.subTo(n,n),n}function F(t){var e=r();return t.copyTo(e),this.reduce(e),e}function M(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function G(t,e){t.squareTo(e),this.reduce(e)}function U(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function V(){return 0==(this.t>0?1&this.data[0]:this.s)}function j(t,n){if(t>4294967295||t<1)return e.ONE;var i=r(),o=r(),a=n.convert(this),s=m(t)-1;for(a.copyTo(i);--s>=0;)if(n.sqrTo(i,o),(t&1<<s)>0)n.mulTo(o,a,i);else{var u=i;i=o,o=u}return n.revert(i)}function K(t,e){var r;return r=t<256||e.isEven()?new k(e):new x(e),this.exp(t,r)}function q(){var t=r();return this.copyTo(t),t}function z(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function H(){return 0==this.t?this.s:this.data[0]<<24>>24}function J(){return 0==this.t?this.s:this.data[0]<<16>>16}function W(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function X(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function Q(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),i=l(n),o=r(),a=r(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(n+a.intValue()).toString(t).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(t)+s}function Z(t,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),i=Math.pow(r,n),o=!1,a=0,u=0,c=0;c<t.length;++c){var l=s(t,c);l<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(u=r*u+l,++a>=n&&(this.dMultiply(i),this.dAddOffset(u,0),a=0,u=0))}a>0&&(this.dMultiply(Math.pow(r,a)),this.dAddOffset(u,0)),o&&e.ZERO.subTo(this,this)}function Y(t,r,n){if("number"==typeof r)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),at,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=new Array,o=7&t;i.length=(t>>3)+1,r.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function $(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}function tt(t){return 0==this.compareTo(t)}function et(t){return this.compareTo(t)<0?this:t}function rt(t){return this.compareTo(t)>0?this:t}function nt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function it(t,e){return t&e}function ot(t){var e=r();return this.bitwiseTo(t,it,e),e}function at(t,e){return t|e}function st(t){var e=r();return this.bitwiseTo(t,at,e),e}function ut(t,e){return t^e}function ct(t){var e=r();return this.bitwiseTo(t,ut,e),e}function lt(t,e){return t&~e}function ft(t){var e=r();return this.bitwiseTo(t,lt,e),e}function ht(){for(var t=r(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function pt(t){var e=r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function dt(t){var e=r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function yt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function gt(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+yt(this.data[t]);return this.s<0?this.t*this.DB:-1}function mt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function vt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=mt(this.data[r]^e);return t}function bt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)}function Bt(t,r){var n=e.ONE.shiftLeft(t);return this.bitwiseTo(n,r,n),n}function St(t){return this.changeBit(t,at)}function Ct(t){return this.changeBit(t,lt)}function At(t){return this.changeBit(t,ut)}function It(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function wt(t){var e=r();return this.addTo(t,e),e}function Et(t){var e=r();return this.subTo(t,e),e}function Tt(t){var e=r();return this.multiplyTo(t,e),e}function kt(t){var e=r();return this.divRemTo(t,e,null),e}function Pt(t){var e=r();return this.divRemTo(t,null,e),e}function _t(t){var e=r(),n=r();return this.divRemTo(t,e,n),new Array(e,n)}function Rt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Nt(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Lt(){}function Dt(t){return t}function xt(t,e,r){t.multiplyTo(e,r)}function Ot(t,e){t.squareTo(e)}function Ft(t){return this.exp(t,new Lt)}function Mt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function Gt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Ut(t){this.r2=r(),this.q3=r(),e.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Vt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e}function jt(t){return t}function Kt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function qt(t,e){t.squareTo(e),this.reduce(e)}function zt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Ht(t,e){var n,i,o=t.bitLength(),a=l(1);if(o<=0)return a;n=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new k(e):e.isEven()?new Ut(e):new x(e);var s=new Array,u=3,c=n-1,f=(1<<n)-1;if(s[1]=i.convert(this),n>1){var h=r();for(i.sqrTo(s[1],h);u<=f;)s[u]=r(),i.mulTo(h,s[u-2],s[u]),u+=2}var p,d,y=t.t-1,g=!0,v=r();for(o=m(t.data[y])-1;y>=0;){for(o>=c?p=t.data[y]>>o-c&f:(p=(t.data[y]&(1<<o+1)-1)<<c-o,y>0&&(p|=t.data[y-1]>>this.DB+o-c)),u=n;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--y),g)s[p].copyTo(a),g=!1;else{for(;u>1;)i.sqrTo(a,v),i.sqrTo(v,a),u-=2;u>0?i.sqrTo(a,v):(d=a,a=v,v=d),i.mulTo(v,s[p],a)}for(;y>=0&&0==(t.data[y]&1<<o);)i.sqrTo(a,v),d=a,a=v,v=d,--o<0&&(o=this.DB-1,--y)}return i.revert(a)}function Jt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Wt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function Xt(t){var r=t.isEven();if(this.isEven()&&r||0==t.signum())return e.ZERO;for(var n=t.clone(),i=this.clone(),o=l(1),a=l(0),s=l(0),u=l(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),r?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),r?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),r&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(n,i),r&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(e.ONE)?e.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function Qt(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=se[se.length-1]){for(e=0;e<se.length;++e)if(r.data[0]==se[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<se.length;){for(var n=se[e],i=e+1;i<se.length&&n<ue;)n*=se[i++];for(n=r.modInt(n);e<i;)if(n%se[e++]==0)return!1}return r.millerRabin(t)}function Zt(t){var r=this.subtract(e.ONE),n=r.getLowestSetBit();if(n<=0)return!1;for(var i,o=r.shiftRight(n),a=Yt(),s=0;s<t;++s){do i=new e(this.bitLength(),a);while(i.compareTo(e.ONE)<=0||i.compareTo(r)>=0);var u=i.modPow(o,this);if(0!=u.compareTo(e.ONE)&&0!=u.compareTo(r)){for(var c=1;c++<n&&0!=u.compareTo(r);)if(u=u.modPowInt(2,this),0==u.compareTo(e.ONE))return!1;if(0!=u.compareTo(r))return!1}}return!0}function Yt(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}}}var $t,te=0xdeadbeefcafe,ee=15715070==(16777215&te);"undefined"==typeof navigator?(e.prototype.am=o,$t=28):ee&&"Microsoft Internet Explorer"==navigator.appName?(e.prototype.am=i,$t=30):ee&&"Netscape"!=navigator.appName?(e.prototype.am=n,$t=26):(e.prototype.am=o,$t=28),e.prototype.DB=$t,e.prototype.DM=(1<<$t)-1,e.prototype.DV=1<<$t;var re=52;e.prototype.FV=Math.pow(2,re),e.prototype.F1=re-$t,e.prototype.F2=2*$t-re;var ne,ie,oe="0123456789abcdefghijklmnopqrstuvwxyz",ae=new Array;for(ne="0".charCodeAt(0),ie=0;ie<=9;++ie)ae[ne++]=ie;for(ne="a".charCodeAt(0),ie=10;ie<36;++ie)ae[ne++]=ie;for(ne="A".charCodeAt(0),ie=10;ie<36;++ie)ae[ne++]=ie;k.prototype.convert=P,k.prototype.revert=_,k.prototype.reduce=R,k.prototype.mulTo=N,k.prototype.sqrTo=L,x.prototype.convert=O,x.prototype.revert=F,x.prototype.reduce=M,x.prototype.mulTo=U,x.prototype.sqrTo=G,e.prototype.copyTo=u,e.prototype.fromInt=c,e.prototype.fromString=f,e.prototype.clamp=h,e.prototype.dlShiftTo=b,e.prototype.drShiftTo=B,e.prototype.lShiftTo=S,e.prototype.rShiftTo=C,e.prototype.subTo=A,e.prototype.multiplyTo=I,e.prototype.squareTo=w,e.prototype.divRemTo=E,e.prototype.invDigit=D,e.prototype.isEven=V,e.prototype.exp=j,e.prototype.toString=p,e.prototype.negate=d,e.prototype.abs=y,e.prototype.compareTo=g,e.prototype.bitLength=v,e.prototype.mod=T,e.prototype.modPowInt=K,e.ZERO=l(0),e.ONE=l(1),Lt.prototype.convert=Dt,Lt.prototype.revert=Dt,Lt.prototype.mulTo=xt,Lt.prototype.sqrTo=Ot,Ut.prototype.convert=Vt,Ut.prototype.revert=jt,Ut.prototype.reduce=Kt,Ut.prototype.mulTo=zt,Ut.prototype.sqrTo=qt;var se=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ue=(1<<26)/se[se.length-1];e.prototype.chunkSize=W,e.prototype.toRadix=Q,e.prototype.fromRadix=Z,e.prototype.fromNumber=Y,e.prototype.bitwiseTo=nt,e.prototype.changeBit=Bt,e.prototype.addTo=It,e.prototype.dMultiply=Rt,e.prototype.dAddOffset=Nt,e.prototype.multiplyLowerTo=Mt,e.prototype.multiplyUpperTo=Gt,e.prototype.modInt=Wt,e.prototype.millerRabin=Zt,e.prototype.clone=q,e.prototype.intValue=z,e.prototype.byteValue=H,e.prototype.shortValue=J,e.prototype.signum=X,e.prototype.toByteArray=$,e.prototype.equals=tt,e.prototype.min=et,e.prototype.max=rt,e.prototype.and=ot,e.prototype.or=st,e.prototype.xor=ct,e.prototype.andNot=ft,e.prototype.not=ht,e.prototype.shiftLeft=pt,e.prototype.shiftRight=dt,e.prototype.getLowestSetBit=gt,e.prototype.bitCount=vt,e.prototype.testBit=bt,e.prototype.setBit=St,e.prototype.clearBit=Ct,e.prototype.flipBit=At,e.prototype.add=wt,e.prototype.subtract=Et,e.prototype.multiply=Tt,e.prototype.divide=kt,e.prototype.remainder=Pt,e.prototype.divideAndRemainder=_t,e.prototype.modPow=Ht,e.prototype.modInverse=Xt,e.prototype.pow=Ft,e.prototype.gcd=Jt,e.prototype.isProbablePrime=Qt,t.jsbn=t.jsbn||{},t.jsbn.BigInteger=e}var e="jsbn";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,r,n){n||(n=t.md.sha1.create());for(var i="",o=Math.ceil(r/n.digestLength),a=0;a<o;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);n.start(),n.update(e+s),i+=n.digest().getBytes()}return i.substring(0,r)}var r=t.pkcs1=t.pkcs1||{};r.encode_rsa_oaep=function(r,n,i){var o,a,s,u;"string"==typeof i?(o=i,a=arguments[3]||void 0,s=arguments[4]||void 0):i&&(o=i.label||void 0,a=i.seed||void 0,s=i.md||void 0,i.mgf1&&i.mgf1.md&&(u=i.mgf1.md)),s?s.start():s=t.md.sha1.create(),u||(u=s);var c=Math.ceil(r.n.bitLength()/8),l=c-2*s.digestLength-2;if(n.length>l){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=n.length,f.maxLength=l,f}o||(o=""),s.update(o,"raw");for(var h=s.digest(),p="",d=l-n.length,y=0;y<d;y++)p+="\0";var g=h.getBytes()+p+""+n;if(a){if(a.length!==s.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=a.length,f.digestLength=s.digestLength,f}}else a=t.random.getBytes(s.digestLength);var m=e(a,c-s.digestLength-1,u),v=t.util.xorBytes(g,m,g.length),b=e(v,s.digestLength,u),B=t.util.xorBytes(a,b,a.length);return"\0"+B+v},r.decode_rsa_oaep=function(r,n,i){var o,a,s;"string"==typeof i?(o=i,a=arguments[3]||void 0):i&&(o=i.label||void 0,a=i.md||void 0,i.mgf1&&i.mgf1.md&&(s=i.mgf1.md));var u=Math.ceil(r.n.bitLength()/8);if(n.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=n.length,c.expectedLength=u,c}if(void 0===a?a=t.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),f=n.charAt(0),h=n.substring(1,a.digestLength+1),p=n.substring(1+a.digestLength),d=e(p,a.digestLength,s),y=t.util.xorBytes(h,d,h.length),g=e(y,u-a.digestLength-1,s),m=t.util.xorBytes(p,g,p.length),v=m.substring(0,a.digestLength),c="\0"!==f,b=0;b<a.digestLength;++b)c|=l.charAt(b)!==v.charAt(b);for(var B=1,S=a.digestLength,C=a.digestLength;C<m.length;C++){var A=m.charCodeAt(C),I=1&A^1,w=B?65534:0;c|=A&w,B&=I,S+=B}if(c||1!==m.charCodeAt(S))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(S+1)}}var e="pkcs1";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./util","./random","./sha1"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){function t(t){function e(e,r,n){var i=t.util.createBuffer(),o=Math.ceil(r.n.bitLength()/8);if(e.length>o-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=o-11,a}i.putByte(0),i.putByte(n);var s,u=o-3-e.length;if(0===n||1===n){s=0===n?0:255;for(var c=0;c<u;++c)i.putByte(s)}else for(;u>0;){for(var l=0,f=t.random.getBytes(u),c=0;c<u;++c)s=f.charCodeAt(c),0===s?++l:i.putByte(s);u=l}return i.putByte(0),i.putBytes(e),i}function r(e,r,n,i){var o=Math.ceil(r.n.bitLength()/8),a=t.util.createBuffer(e),s=a.getByte(),u=a.getByte();if(0!==s||n&&0!==u&&1!==u||!n&&2!=u||n&&0===u&&"undefined"==typeof i)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=o-3-i;for(var l=0;l<c;++l)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++c}else if(2===u)for(c=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++c}var f=a.getByte();if(0!==f||c!==o-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function n(e,r,n){function i(){o(e.pBits,function(t,r){return t?n(t):(e.p=r,null!==e.q?s(t,e.q):void o(e.qBits,s))})}function o(e,r){t.prime.generateProbablePrime(e,c,r)}function s(t,r){if(t)return n(t);if(e.q=r,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(0!==e.p.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.p=null,void i();if(0!==e.q.subtract(a.ONE).gcd(e.e).compareTo(a.ONE))return e.q=null,void o(e.qBits,s);if(e.p1=e.p.subtract(a.ONE),e.q1=e.q.subtract(a.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(a.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,s);var l=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}"function"==typeof r&&(n=r,r={}),r=r||{};var c={algorithm:{name:r.algorithm||"PRIMEINC",options:{workers:r.workers||2,workLoad:r.workLoad||100,workerScript:r.workerScript}}};"prng"in r&&(c.prng=r.prng),i()}function i(e){var r=e.toString(16);return r[0]>="8"&&(r="00"+r),t.util.hexToBytes(r)}function o(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}if("undefined"==typeof a)var a=t.jsbn.BigInteger;var s=t.asn1;t.pki=t.pki||{},t.pki.rsa=t.rsa=t.rsa||{};var u=t.pki,c=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},f={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=t.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d=function(t){var e;if(!(t.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=u.oids[t.algorithm];var n=s.oidToDer(e).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},y=function(e,r,n){if(n)return e.modPow(r.e,r.n);if(!r.p||!r.q)return e.modPow(r.d,r.n);r.dP||(r.dP=r.d.mod(r.p.subtract(a.ONE))),r.dQ||(r.dQ=r.d.mod(r.q.subtract(a.ONE))),r.qInv||(r.qInv=r.q.modInverse(r.p));var i;do i=new a(t.util.bytesToHex(t.random.getBytes(r.n.bitLength()/8)),16);while(i.compareTo(r.n)>=0||!i.gcd(r.n).equals(a.ONE));e=e.multiply(i.modPow(r.e,r.n)).mod(r.n);for(var o=e.mod(r.p).modPow(r.dP,r.p),s=e.mod(r.q).modPow(r.dQ,r.q);o.compareTo(s)<0;)o=o.add(r.p);var u=o.subtract(s).multiply(r.qInv).mod(r.p).multiply(r.q).add(s);return u=u.multiply(i.modInverse(r.n)).mod(r.n)};u.rsa.encrypt=function(r,n,i){var o,s=i,u=Math.ceil(n.n.bitLength()/8);i!==!1&&i!==!0?(s=2===i,o=e(r,n,i)):(o=t.util.createBuffer(),o.putBytes(r));for(var c=new a(o.toHex(),16),l=y(c,n,s),f=l.toString(16),h=t.util.createBuffer(),p=u-Math.ceil(f.length/2);p>0;)h.putByte(0),--p;return h.putBytes(t.util.hexToBytes(f)),h.getBytes()},u.rsa.decrypt=function(e,n,i,o){var s=Math.ceil(n.n.bitLength()/8);if(e.length!==s){var u=new Error("Encrypted message length is invalid.");throw u.length=e.length,
u.expected=s,u}var c=new a(t.util.createBuffer(e).toHex(),16);if(c.compareTo(n.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=y(c,n,i),f=l.toString(16),h=t.util.createBuffer(),p=s-Math.ceil(f.length/2);p>0;)h.putByte(0),--p;return h.putBytes(t.util.hexToBytes(f)),o!==!1?r(h.getBytes(),n,i):h.getBytes()},u.rsa.createKeyPairGenerationState=function(e,r,n){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048,n=n||{};var i,o=n.prng||t.random,s={nextBytes:function(t){for(var e=o.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=n.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return i={algorithm:u,state:0,bits:e,rng:s,eInt:r||65537,e:new a(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},i.e.fromInt(i.eInt),i},u.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new a(null);r.fromInt(30);for(var n,i=0,s=function(t,e){return t|e},l=+new Date,f=0;null===t.keys&&(e<=0||f<e);){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,p=h-1;0===t.pqState?(t.num=new a(h,t.rng),t.num.testBit(p)||t.num.bitwiseTo(a.ONE.shiftLeft(p),s,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(o(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(a.ONE).gcd(t.e).compareTo(a.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(a.ONE),t.q1=t.q.subtract(a.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(a.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var d=t.e.modInverse(t.phi);t.keys={privateKey:u.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:u.rsa.setPublicKey(t.n,t.e)}}n=+new Date,f+=n-l,l=n}return null!==t.keys},u.rsa.generateKeyPair=function(t,e,r,i){1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(i=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(i=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537);var o=u.rsa.createKeyPairGenerationState(t,e,r);return i?void n(o,r,i):(u.rsa.stepKeyPairGenerationState(o,0),o.keys)},u.setRsaPublicKey=u.rsa.setPublicKey=function(n,i){var o={n:n,e:i};return o.encrypt=function(r,n,i){if("string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===n)n={encode:function(t,r,n){return e(t,r,2).getBytes()}};else if("RSA-OAEP"===n||"RSAES-OAEP"===n)n={encode:function(e,r){return t.pkcs1.encode_rsa_oaep(r,e,i)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(t){return t}};else if("string"==typeof n)throw new Error('Unsupported encryption scheme: "'+n+'".');var a=n.encode(r,o,!0);return u.rsa.encrypt(a,o,!0)},o.verify=function(t,e,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(t,e){e=r(e,o,!0);var n=s.fromDer(e);return t===n.value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(t,e){return e=r(e,o,!0),t===e}});var i=u.rsa.decrypt(e,o,!0,!1);return n.verify(t,i,o.n.bitLength())},o},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(e,n,i,o,a,s,c,l){var f={n:e,e:n,d:i,p:o,q:a,dP:s,dQ:c,qInv:l};return f.decrypt=function(e,n,i){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSAES-PKCS1-V1_5");var o=u.rsa.decrypt(e,f,!1,!1);if("RSAES-PKCS1-V1_5"===n)n={decode:r};else if("RSA-OAEP"===n||"RSAES-OAEP"===n)n={decode:function(e,r){return t.pkcs1.decode_rsa_oaep(r,e,i)}};else{if(["RAW","NONE","NULL",null].indexOf(n)===-1)throw new Error('Unsupported encryption scheme: "'+n+'".');n={decode:function(t){return t}}}return n.decode(o,f,!1)},f.sign=function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:d},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,f.n.bitLength());return u.rsa.encrypt(n,f,r)},f},u.wrapRsaPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(t).getBytes())])},u.privateKeyFromAsn1=function(e){var r={},n=[];if(s.validate(e,l,r,n)&&(e=s.fromDer(t.util.createBuffer(r.privateKey))),r={},n=[],!s.validate(e,f,r,n)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=n,i}var o,c,h,p,d,y,g,m;return o=t.util.createBuffer(r.privateKeyModulus).toHex(),c=t.util.createBuffer(r.privateKeyPublicExponent).toHex(),h=t.util.createBuffer(r.privateKeyPrivateExponent).toHex(),p=t.util.createBuffer(r.privateKeyPrime1).toHex(),d=t.util.createBuffer(r.privateKeyPrime2).toHex(),y=t.util.createBuffer(r.privateKeyExponent1).toHex(),g=t.util.createBuffer(r.privateKeyExponent2).toHex(),m=t.util.createBuffer(r.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new a(o,16),new a(c,16),new a(h,16),new a(p,16),new a(d,16),new a(y,16),new a(g,16),new a(m,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.qInv))])},u.publicKeyFromAsn1=function(e){var r={},n=[];if(s.validate(e,p,r,n)){var i=s.derToOid(r.publicKeyOid);if(i!==u.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=i,o}e=r.rsaPublicKey}if(n=[],!s.validate(e,h,r,n)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=n,o}var c=t.util.createBuffer(r.publicKeyModulus).toHex(),l=t.util.createBuffer(r.publicKeyExponent).toHex();return u.setRsaPublicKey(new a(c,16),new a(l,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(t)])])},u.publicKeyToRSAPublicKey=function(t){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,i(t.e))])}}var e="rsa";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,i=function(r,i){i.exports=function(i){var o=n.map(function(t){return r(t)}).concat(t);if(i=i||{},i.defined=i.defined||{},i.defined[e])return i[e];i.defined[e]=!0;for(var a=0;a<o.length;++a)o[a](i);return i[e]}},o=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,o.apply(null,Array.prototype.slice.call(arguments,0))):(define=o,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./asn1","./jsbn","./oids","./pkcs1","./prime","./random","./util"],function(){i.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(){var t="forge";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return void("undefined"==typeof forge&&(forge={disableNativeCode:!1}));var e=!0;define=function(t,e){e(require,module)}}var r,n=function(e,n){n.exports=function(n){var i=r.map(function(t){return e(t)});if(n=n||{},n.defined=n.defined||{},n.defined[t])return n[t];n.defined[t]=!0;for(var o=0;o<i.length;++o)i[o](n);return n},n.exports.disableNativeCode=!1,n.exports(n.exports)},i=define;define=function(t,n){return r="string"==typeof t?n.slice(2):t.slice(2),e?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module","./aes","./aesCipherSuites","./asn1","./cipher","./cipherModes","./debug","./des","./hmac","./kem","./log","./md","./mgf1","./pbkdf2","./pem","./pkcs7","./pkcs1","./pkcs12","./pki","./prime","./prng","./pss","./random","./rc2","./ssh","./task","./tls","./util"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})}(),function(t){var e={},r={},n={},i={};e.addDetectionTest=function(t,e){i[t]||(i[t]=e)},e.detect=function(t){return"undefined"==typeof n[n]&&(n[t]=i[t]()),n[t]},e.define=function(t,e,n){if("function"==typeof define&&define.amd)define(t,e,n);else{if(e&&e.length)for(var i=0;i<e.length;i++)e[i]=r[e[i]];r[t]=n.apply(this,e||[])}},t.GCsdk=e,"undefined"!=typeof exports&&(exports.GCsdk=e),e.define("GCsdk.core",[],function(){return e}),"undefined"==typeof define&&(t.define=e.define)}("undefined"==typeof window?this:window),define("GCsdk.promise",["GCsdk.core"],function(t){function e(t){function e(t){var e=this;this.pending=[],this.resolve=function(t){e.complete("resolve",t)},this.reject=function(t){e.complete("reject",t)},t&&(this.isSingleton=!0)}e.prototype={then:function(t,e){return this.pending.push({resolve:t,reject:e}),this},complete:function(t,e){for(;this.pending[0];)this.pending.shift()[t](e)}},t.Promise=e}return"undefined"!=typeof module?module.exports=function(t){return e(t)}:e(GCsdk),GCsdk.Promise}),define("GCsdk.net",["GCsdk.core"],function(t){function e(){if(!("undefined"==typeof XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function r(t){return t.status>=200&&t.status<300||304==t.status||0==t.status&&t.responseText}function n(n,i){function a(t){if(4==f.readyState){var e=f.mimeType||f.getResponseHeader("content-type")||"";if(h.status=f.status,h.responseText=f.responseText,/json/.test(e)?h.responseJSON=o.parseJSON(f.responseText):/xml/.test(e)&&(h.responseXML=o.parseXML(f.responseText)),h.success=r(f),i.callback)return i.callback(h,f);h.success?(i.success&&i.success(h,f),c&&c.resolve(h,f)):(i.error&&i.error(h,f),c&&c.reject(h,f))}}function s(){var t={Accept:"text/javascript, application/json, text/html, application/xml, text/xml, */*","Content-Type":"application/json"};for(var e in t)i.headers.hasOwnProperty(e)||(i.headers[e]=t[e]);for(var e in i.headers)f.setRequestHeader(e,i.headers[e])}function u(){try{s(),f.send(i.postBody)}catch(t){i.error&&i.error()}}var c,l,f=e(),h={};return t.Promise&&(c=new t.Promise),"undefined"==typeof i&&(i={}),i.method=i.method?i.method.toLowerCase():"get",i.asynchronous=i.asynchronous||!0,i.postBody=i.postBody||"",f.onreadystatechange=a,f.open(i.method,n,i.asynchronous),i.headers=i.headers||{},i.contentType&&(i.headers["Content-Type"]=i.contentType),"string"!=typeof i.postBody&&(i.postBody=o.serialize(i.postBody)),l={set:function(t,e){return i.headers[t]=e,l},send:function(t,e){return i.postBody=o.serialize(t),i.callback=e,u(),l},end:function(t){return i.callback=t,u(),l},data:function(t){return i.postBody=o.serialize(t),l},then:function(){return l.end(),c&&c.then.apply(c,arguments),l}}}function i(t,e,r){function n(t){i.success(t),i.teardown()}var i=this;this.url=t,this.methodName="__GCsdk_jsonp_"+parseInt((new Date).getTime()),this.success=e,this.failure=r,window[this.methodName]=n}var o={},a="".trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};return o.serialize=function(t){if(t){if("string"==typeof t)return t;var e=[];for(var r in t)e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}},t.addDetectionTest("JSON.parse",function(){return window.JSON&&window.JSON.parse}),o.parseJSON=function(e){return"string"==typeof e&&e?(e=a(e),t.detect("JSON.parse")?window.JSON.parse(e):new Function("return "+e)()):null},window.DOMParser?o.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")}:o.parseXML=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},i.prototype.run=function(){this.scriptTag=document.createElement("script"),this.scriptTag.id=this.methodName,this.scriptTag.src=this.url.replace("{callback}",this.methodName);var t=this;this.scriptTag.onerror=function(){t.failure()},document.body.appendChild(this.scriptTag)},i.prototype.teardown=function(){window[this.methodName]=null;try{delete window[this.methodName]}catch(t){}this.scriptTag&&document.body.removeChild(this.scriptTag)},o.get=function(t,e){return"undefined"==typeof e&&(e={}),e.method="get",n(t,e)},o.post=function(t,e){return"undefined"==typeof e&&(e={}),e.method="post",n(t,e)},o.jsonp=function(t,e){"undefined"==typeof e&&(e={});var r=new i(t,e.success,e.failure);r.run()},t.get=o.get,t.post=o.post,t.jsonp=o.jsonp,o.ajax=n,t.net=o,o}),define("GCsdk.Util",["GCsdk.core"],function(t){var e=function(){this.getMetadata=function(){return{screenSize:window.innerWidth+"x"+window.innerHeight,platformIdentifier:window.navigator.userAgent,sdkIdentifier:(document.GC&&document.GC.rppEnabledPage?"rpp-":"")+"JavaScriptClientSDK/v2.1.0",sdkCreator:"Ingenico"}},this.base64Encode=function(t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){throw"data must be either a String or a JSON object"}var r,n,i,o,a,s,u,c,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,h=0,p="",d=[];if(!t)return t;do r=t.charCodeAt(f++),n=t.charCodeAt(f++),i=t.charCodeAt(f++),c=r<<16|n<<8|i,o=c>>18&63,a=c>>12&63,s=c>>6&63,u=63&c,d[h++]=l.charAt(o)+l.charAt(a)+l.charAt(s)+l.charAt(u);while(f<t.length);p=d.join("");var y=t.length%3;return(y?p.slice(0,y-3):p)+"===".slice(y||3)}};return t.Util=e,e}),define("GCsdk.PublicKeyResponse",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.keyId=t.keyId,this.publicKey=t.publicKey};return t.PublicKeyResponse=e,e}),define("GCsdk.C2SCommunicatorConfiguration",["GCsdk.core"],function(t){var e=function(t){this.endpoints={PROD:{EU:{API:"https://api-eu.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.poweredbyglobalcollect.com"},US:{API:"https://api-us.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.poweredbyglobalcollect.com"}},PREPROD:{EU:{API:"https://api-eu-preprod.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.preprod.poweredbyglobalcollect.com"},US:{API:"https://api-us-preprod.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.preprod.poweredbyglobalcollect.com"}},SANDBOX:{EU:{API:"https://api-eu-sandbox.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.sandbox.poweredbyglobalcollect.com"},US:{API:"https://api-us-sandbox.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.sandbox.poweredbyglobalcollect.com"}},INTEGRATION:{EU:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},US:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"}},DEV_NAMI:{EU:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},US:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"}},DEV_ISC:{EU:{API:"http://api.gc-dev.isaac.local/client/v1",ASSETS:"http://rpp.gc-dev.isaac.local"},US:{API:"http://api.gc-dev.isaac.local/client/v1",ASSETS:"http://rpp.gc-dev.isaac.local"}}},this.region=t.region,this.environment=t.environment||"RPP",this.clientSessionId=t.clientSessionID,this.customerId=t.customerId,this.apiBaseUrl=t.apiBaseUrl||""===t.apiBaseUrl?t.apiBaseUrl:this.endpoints[this.environment][this.region].API,this.assetsBaseUrl=t.assetsBaseUrl||""===t.assetsBaseUrl?t.assetsBaseUrl:this.endpoints[this.environment][this.region].ASSETS};return t.C2SCommunicatorConfiguration=e,e}),define("GCsdk.IinDetailsResponse",["GCsdk.core","GCsdk.promise"],function(t,e){var r=function(){this.status="",this.countryCode="",this.paymentProductId="",this.isAllowedInContext="",this.coBrands=[]};return t.IinDetailsResponse=r,r}),define("GCsdk.C2SCommunicator",["GCsdk.core","GCsdk.promise","GCsdk.net","GCsdk.Util","GCsdk.PublicKeyResponse","GCsdk.IinDetailsResponse"],function(t,e,r,n,i,o){var a=function(t,a){var s=t,u=new n,c={},l=a,f={expirydate:"tel",string:"text",numericstring:"tel",integer:"number",expirationDate:"tel"},h=function(t,e){for(var r=0,n=t.fields.length;r<n;r++){var i=t.fields[r];i.type=i.displayHints.obfuscate?"password":f[i.type];for(validatorKey in i.dataRestrictions.validators)i.validators=i.validators||[],i.validators.push(validatorKey);"list"===i.displayHints.formElement.type&&(i.displayHints.formElement.list=!0),i.displayHints.tooltip&&i.displayHints.tooltip.image&&(i.displayHints.tooltip.image=e+"/"+i.displayHints.tooltip.image)}return t.fields.sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t.displayHints.logo=e+"/"+t.displayHints.logo,t},p=function(t,e,r){for(var n=0,i=t["paymentProduct"+r].length;n<i;n++){var o=t["paymentProduct"+r][n];o.displayHints.logo=e+"/"+o.displayHints.logo}return t["paymentProduct"+r].sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t},d=u.getMetadata();this.getBasicPaymentProducts=function(t){var n=new e,i=(new Date).getTime(),o="getPaymentProducts-"+t.totalAmount+"_"+t.countryCode+"_"+t.locale+"_"+t.isRecurring+"_"+t.currency;return c[o]?setTimeout(function(){n.resolve(c[o])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/products?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields&locale="+t.locale+"&cacheBust="+i).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){if(t.success){var e=p(t.responseJSON,s.assetsBaseUrl,"s");c[o]=e,n.resolve(e)}else n.reject()}),n},this.getBasicPaymentProductGroups=function(t){var n=new e,i=(new Date).getTime(),o="getPaymentProductGroups-"+t.totalAmount+"_"+t.countryCode+"_"+t.locale+"_"+t.isRecurring+"_"+t.currency;return c[o]?setTimeout(function(){n.resolve(c[o])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/productgroups?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields&locale="+t.locale+"&cacheBust="+i).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){if(t.success){var e=p(t.responseJSON,s.assetsBaseUrl,"Groups");c[o]=e,n.resolve(e)}else n.reject()}),n},this.getPaymentProduct=function(n,i){var o=new e,a=(new Date).getTime(),f="getPaymentProduct-"+n+"_"+i.totalAmount+"_"+i.countryCode+"__"+i.locale+"_"+i.isRecurring+"_"+i.currency;if(l&&l.id===n)if(c[f])setTimeout(function(){o.resolve(c[f])},0);else{var p=h(l,s.assetsBaseUrl);c[f]=p,setTimeout(function(){o.resolve(c[f])},0)}else c[f]?setTimeout(function(){o.resolve(c[f])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/products/"+n+"?countryCode="+i.countryCode+"&isRecurring="+i.isRecurring+"&amount="+i.totalAmount+"&currencyCode="+i.currency+"&locale="+i.locale+"&cacheBust="+a).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(e){if(e.success){var r=h(e.responseJSON,t.assetsBaseUrl);c[f]=r,o.resolve(r)}else o.reject()});return o},this.getPaymentProductGroup=function(n,i){var o=new e,a=(new Date).getTime(),f="getPaymentProductGroup-"+n+"_"+i.totalAmount+"_"+i.countryCode+"__"+i.locale+"_"+i.isRecurring+"_"+i.currency;if(l&&l.id===n)if(c[f])setTimeout(function(){o.resolve(c[f])},0);else{var p=h(l,s.assetsBaseUrl);c[f]=p,setTimeout(function(){o.resolve(c[f])},0)}else c[f]?setTimeout(function(){o.resolve(c[f])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/productgroups/"+n+"?countryCode="+i.countryCode+"&isRecurring="+i.isRecurring+"&amount="+i.totalAmount+"&currencyCode="+i.currency+"&locale="+i.locale+"&cacheBust="+a).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(e){if(e.success){var r=h(e.responseJSON,t.assetsBaseUrl);c[f]=r,o.resolve(r)}else o.reject()});return o},this.getPaymentProductIdByCreditCardNumber=function(t,n){var i=new e,a=new o,l="getPaymentProductIdByCreditCardNumber-"+t,f=this;if(this.context=n,c[l])setTimeout(function(){i.resolve(c[l])},0);else{var h=function(t){return!(t.length<6)};h(t)?r.post(s.apiBaseUrl+"/"+s.customerId+"/services/getIINdetails").data(JSON.stringify(this.convertContextToIinDetailsContext(t,this.context))).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){t.success?(a.json=t.responseJSON,a.countryCode=t.responseJSON.countryCode,a.paymentProductId=t.responseJSON.paymentProductId,a.isAllowedInContext=t.responseJSON.isAllowedInContext,a.coBrands=t.responseJSON.coBrands,t.responseJSON.hasOwnProperty("isAllowedInContext")?(a.status="SUPPORTED",a.isAllowedInContext===!1&&(a.status="EXISTING_BUT_NOT_ALLOWED"),c[l]=a,i.resolve(a)):f.getPaymentProduct(a.paymentProductId,f.context).then(function(t){t?a.status="SUPPORTED":a.status="UNSUPPORTED",c[l]=a,i.resolve(a)},function(){a.status="UNKNOWN",i.reject(a)})):(a.status="UNKNOWN",i.reject(a))}):(a.status="NOT_ENOUGH_DIGITS",setTimeout(function(){i.resolve(a)},0))}return i},this.convertContextToIinDetailsContext=function(t,e){return{bin:t,paymentContext:{countryCode:e.countryCode,isRecurring:e.isRecurring,amountOfMoney:{amount:e.totalAmount,currencyCode:e.currency}}}},this.getPublicKey=function(){var t=new e,n="publicKey";return c[n]?setTimeout(function(){t.resolve(c[n])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/crypto/publickey").set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(e){if(e.success){var r=new i(e.responseJSON);c[n]=r,t.resolve(r)}else t.reject("unable to get public key")}),t},this.getPaymentProductDirectory=function(t,n,i){var o=new e,a="getPaymentProductDirectory-"+t+"_"+n+"_"+i;return c[a]?setTimeout(function(){o.resolve(c[a])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/products/"+t+"/directory?countryCode="+i+"&currencyCode="+n).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){t.success?(c[a]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to retrieve payment product directory")}),o},this.convertAmount=function(t,n,i){var o=new e,a="convertAmount-"+t+"_"+n+"_"+i;return c[a]?setTimeout(function(){o.resolve(c[a])},0):r.get(s.apiBaseUrl+"/"+s.customerId+"/services/convert/amount?source="+n+"&target="+i+"&amount="+t).set("X-GCS-ClientMetaInfo",u.base64Encode(d)).set("Authorization","GCS v1Client:"+s.clientSessionId).end(function(t){t.success?(c[a]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to convert amount")}),o}};return t.C2SCommunicator=a,a}),define("GCsdk.LabelTemplateElement",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.attributeKey=t.attributeKey,this.mask=t.mask,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.LabelTemplateElement=e,e}),define("GCsdk.Attribute",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.key=t.key,this.value=t.value,this.status=t.status,this.mustWriteReason=t.mustWriteReason};return t.Attribute=e,e}),define("GCsdk.AccountOnFileDisplayHints",["GCsdk.core","GCsdk.LabelTemplateElement"],function(t,e){var r=function(t,r,n){if(t.labelTemplate)for(var i=0,o=t.labelTemplate.length;i<o;i++){var a=new e(t.labelTemplate[i]);r.push(a),n[a.attributeKey]=a}},n=function(t){this.json=t,this.labelTemplate=[],this.labelTemplateElementByAttributeKey={},r(t,this.labelTemplate,this.labelTemplateElementByAttributeKey)};return t.AccountOnFileDisplayHints=n,n}),define("GCsdk.AccountOnFile",["GCsdk.core","GCsdk.AccountOnFileDisplayHints","GCsdk.Attribute"],function(t,e,r){var n=function(t,e,n){if(t.attributes)for(var i=0,o=t.attributes.length;i<o;i++){var a=new r(t.attributes[i]);e.push(a),n[a.key]=a}},i=function(r){this.json=r,this.attributes=[],this.attributeByKey={},this.displayHints=new e(r.displayHints),this.id=r.id,this.paymentProductId=r.paymentProductId,this.getMaskedValueByAttributeKey=function(e){var r,n=this.attributeByKey[e].value;try{r=this.displayHints.labelTemplateElementByAttributeKey[e].wildcardMask}catch(i){}if(void 0!==n&&void 0!==r){var o=new t.MaskingUtil;return o.applyMask(r,n)}},n(r,this.attributes,this.attributeByKey)};return t.AccountOnFile=i,i}),define("GCsdk.PaymentProductDisplayHints",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.displayOrder=t.displayOrder,this.label=t.label,this.logo=t.logo};return t.PaymentProductDisplayHints=e,e}),define("GCsdk.BasicPaymentProduct",["GCsdk.core","GCsdk.AccountOnFile","GCsdk.PaymentProductDisplayHints"],function(t,e,r){var n=function(t,r,n){if(t.accountsOnFile)for(var i=0,o=t.accountsOnFile.length;i<o;i++){var a=new e(t.accountsOnFile[i]);r.push(a),n[a.id]=a}},i=function(t){this.json=t,this.json.type="product",this.accountsOnFile=[],this.accountOnFileById={},this.allowsRecurring=t.allowsRecurring,this.allowsTokenization=t.allowsTokenization,this.autoTokenized=t.autoTokenized,this.displayHints=new r(t.displayHints),this.id=t.id,this.maxAmount=t.maxAmount,this.minAmount=t.minAmount,this.paymentMethod=t.paymentMethod,this.mobileIntegrationLevel=t.mobileIntegrationLevel,this.usesRedirectionTo3rdParty=t.usesRedirectionTo3rdParty,this.paymentProductGroup=t.paymentProductGroup,n(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProduct=i,i}),define("GCsdk.BasicPaymentProductGroup",["GCsdk.core","GCsdk.AccountOnFile","GCsdk.PaymentProductDisplayHints"],function(t,e,r){var n=function(t,r,n){if(t.accountsOnFile)for(var i=0,o=t.accountsOnFile.length;i<o;i++){var a=new e(t.accountsOnFile[i]);r.push(a),n[a.id]=a}},i=function(t){this.json=t,this.json.type="group",this.id=t.id,this.displayHints=new r(t.displayHints),this.accountsOnFile=[],this.accountOnFileById={},n(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProductGroup=i,i}),define("GCsdk.MaskedString",["GCsdk.core"],function(t){var e=function(t,e){this.formattedValue=t,this.cursorIndex=e};return t.MaskedString=e,e}),define("GCsdk.MaskingUtil",["GCsdk.core","GCsdk.MaskedString"],function(t,e){var r=function(t,e,n,i,o){t+e<o.length&&t<i.length&&("9"===i[t]&&Number(o[t+e])>-1&&" "!==o[t+e]||"*"===i[t]?n.push(o[t+e]):o[t+e]===i[t]?n.push(o[t+e]):"9"!==i[t]&&"*"!==i[t]?(n.push(i[t]),e--):(o.splice(t+e,1),t--),r(t+1,e,n,i,o))},n=function(){this.applyMask=function(t,n,i){var o=[],a=n.split("");if(t){for(var s=t.split(""),u=[],c=0,l=s.length;c<l;c++){var f=s[c];"{"===f||"}"===f||u.push(f)}r(0,0,o,u,a)}else for(var c=0,l=a.length;c<l;c++){var f=a[c];o.push(f)}n=o.join("");var h=1;if(i)for(var p=i.split(""),c=0,l=o.length;c<l;c++)if(o[c]!==p[c]){h=c+1;break}return n.substring(0,n.length-1)===i&&(h=n.length+1),new e(n,h)},this.getMaxLengthBasedOnMask=function(t){if(t){for(var e=t.split(""),r=-1,n=0,i=e.length;n<i;n++){r++;var o=e[n];"{"!==o&&"}"!==o||r--}return r}},this.removeMask=function(t,e){var r=[],n=e?e.split(""):[];if(t)for(var i=t.split(""),o=-1,a=!1,s=0,u=i.length;s<u;s++){o++;var c=i[s];"{"===c||"}"===c?(o--,"{"===c?a=!0:"}"===c&&(a=!1)):a&&n[o]&&r.push(n[o])}else for(var s=0,u=n.length;s<u;s++){var c=n[s];r.push(c)}return r.join("").trim()}};return t.MaskingUtil=n,n}),define("GCsdk.ValidationRuleLuhn",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]],r=0;return t.replace(/\D+/g,"").replace(/[\d]/g,function(t,n,i){r+=e[i.length-n&1][parseInt(t,10)]}),r%10===0&&r>0}};return t.ValidationRuleLuhn=e,e}),define("GCsdk.ValidationRuleExpirationDate",["GCsdk.core"],function(t){var e=function(t){var e=/\d{4}|\d{6}$/g;return e.test(t)},r=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){if(t=t.replace(/[^\d]/g,""),4===t.length)split=[t.substring(0,2),"20"+t.substring(2,4)];else{if(6!==t.length)return!1;split=[t.substring(0,2),t.substring(2,6)]}if(e(t)){var r=new Date((new Date).getFullYear(),(new Date).getMonth(),1),n=new Date(split[1],split[0]-1,1);return n.getMonth()===Number(split[0]-1)&&n.getFullYear()===Number(split[1])&&n>=r}return!1}};return t.ValidationRuleExpirationDate=r,r}),define("GCsdk.ValidationRuleFixedList",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.allowedValues=t.attributes.allowedValues,this.validate=function(t){for(var e=0,r=this.allowedValues.length;e<r;e++)if(this.allowedValues[e]===t)return!0;return!1}};return t.ValidationRuleFixedList=e,e}),define("GCsdk.ValidationRuleLength",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxLength=t.attributes.maxLength,this.minLength=t.attributes.minLength,this.validate=function(t){return this.minLength<=t.length&&t.length<=this.maxLength}};return t.ValidationRuleLength=e,e}),define("GCsdk.ValidationRuleRange",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxValue=t.attributes.maxValue,this.minValue=t.attributes.minValue,this.validate=function(t){return!isNaN(t)&&(t=Number(t),this.minValue<=t&&t<=this.maxValue)}};return t.ValidationRuleRange=e,e}),define("GCsdk.ValidationRuleRegularExpression",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.regularExpression=t.attributes.regularExpression,this.validate=function(t){var e=new RegExp(this.regularExpression);return e.test(t)}};return t.ValidationRuleRegularExpression=e,e}),define("GCsdk.ValidationRuleEmailAddress",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return e.test(t)}};return t.ValidationRuleEmailAddress=e,e}),define("GCsdk.ValidationRuleFactory",["GCsdk.core","GCsdk.ValidationRuleEmailAddress","GCsdk.ValidationRuleExpirationDate","GCsdk.ValidationRuleFixedList","GCsdk.ValidationRuleLength","GCsdk.ValidationRuleLuhn","GCsdk.ValidationRuleRange","GCsdk.ValidationRuleRegularExpression"],function(GCsdk,ValidationRuleEmailAddress,ValidationRuleExpirationDate,ValidationRuleFixedList,ValidationRuleLength,ValidationRuleLuhn,ValidationRuleRange,ValidationRuleRegularExpression){
var ValidationRuleFactory=function(){this.makeValidator=function(json){var classType=json.type.charAt(0).toUpperCase()+json.type.slice(1),className=eval("ValidationRule"+classType);return new className(json)}};return GCsdk.ValidationRuleFactory=ValidationRuleFactory,ValidationRuleFactory}),define("GCsdk.DataRestrictions",["GCsdk.core","GCsdk.ValidationRuleExpirationDate","GCsdk.ValidationRuleFixedList","GCsdk.ValidationRuleLength","GCsdk.ValidationRuleLuhn","GCsdk.ValidationRuleRange","GCsdk.ValidationRuleRegularExpression","GCsdk.ValidationRuleEmailAddress","GCsdk.ValidationRuleFactory"],function(t,e,r,n,i,o,a,s,u){var c=function(t,e){var r=function(t,e,r){var n=new u;if(t.validators)for(var i in t.validators){var o=n.makeValidator({type:i,attributes:t.validators[i]});e.push(o),r[o.type]=o}};this.json=t,this.isRequired=t.isRequired,this.validationRules=[],this.validationRuleByType={},r(t,this.validationRules,this.validationRuleByType)};return t.DataRestrictions=c,c}),define("GCsdk.ValueMappingElement",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.displayName=t.displayName,this.value=t.value};return t.ValueMappingElement=e,e}),define("GCsdk.FormElement",["GCsdk.core","GCsdk.ValueMappingElement"],function(t,e){var r=function(t){var r=function(t,r){if(t.valueMapping)for(var n=0,i=t.valueMapping.length;n<i;n++)r.push(new e(t.valueMapping[n]))};this.json=t,this.type=t.type,this.valueMapping=[],r(t,this.valueMapping)};return t.FormElement=r,r}),define("GCsdk.Tooltip",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.image=t.image,this.label=t.label};return t.Tooltip=e,e}),define("GCsdk.PaymentProductFieldDisplayHints",["GCsdk.core","GCsdk.Tooltip","GCsdk.FormElement"],function(t,e,r){var n=function(t){this.json=t,this.displayOrder=t.displayOrder,this.formElement=new r(t.formElement),this.label=t.label,this.mask=t.mask,this.obfuscate=t.obfuscate,this.placeholderLabel=t.placeholderLabel,this.preferredInputType=t.preferredInputType,this.tooltip=t.tooltip?new e(t.tooltip):void 0,this.alwaysShow=t.alwaysShow,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.PaymentProductFieldDisplayHints=n,n}),define("GCsdk.PaymentProductField",["GCsdk.core","GCsdk.PaymentProductFieldDisplayHints","GCsdk.DataRestrictions","GCsdk.MaskingUtil"],function(t,e,r,n){var i=function(t){this.json=t,this.displayHints=new e(t.displayHints),this.dataRestrictions=new r(t.dataRestrictions,this.displayHints.mask),this.id=t.id,this.type=t.type;var i=[];this.getErrorCodes=function(t){return t&&(i=[],this.isValid(t)),i},this.isValid=function(t){var e=this.dataRestrictions.validationRules,r=!1;t=this.removeMask(t);for(var n=0,o=e.length;n<o;n++){var a=e[n];a.validate(t)||(r=!0,i.push(a.errorMessageId))}return!r},this.applyMask=function(t,e){var r=new n;return r.applyMask(this.displayHints.mask,t,e)},this.applyWildcardMask=function(t,e){var r=new n;return r.applyMask(this.displayHints.wildcardMask,t,e)},this.removeMask=function(t){var e=new n;return e.removeMask(this.displayHints.mask,t)}};return t.PaymentProductField=i,i}),define("GCsdk.PaymentProduct",["GCsdk.core","GCsdk.BasicPaymentProduct","GCsdk.PaymentProductField"],function(t,e,r){var n=function(t,e,n){if(t.fields)for(var i=0,o=t.fields.length;i<o;i++){var a=new r(t.fields[i]);e.push(a),n[a.id]=a}},i=function(t){var r=new e(t);return r.json=t,r.paymentProductFields=[],r.paymentProductFieldById={},n(r.json,r.paymentProductFields,r.paymentProductFieldById),r};return t.PaymentProduct=i,i}),define("GCsdk.PaymentProductGroup",["GCsdk.core","GCsdk.BasicPaymentProduct","GCsdk.PaymentProductField"],function(t,e,r){var n=function(t,e,n){if(t.fields)for(var i=0,o=t.fields.length;i<o;i++){var a=new r(t.fields[i]);e.push(a),n[a.id]=a}},i=function(t){var r=new e(t);return r.json=t,r.json.type="group",r.paymentProductFields=[],r.paymentProductFieldById={},n(r.json,r.paymentProductFields,r.paymentProductFieldById),r};return t.PaymentProductGroup=i,i}),define("GCsdk.BasicPaymentProducts",["GCsdk.core","GCsdk.BasicPaymentProduct"],function(t,e){var r=function(t,r,n,i,o,a){if(t.paymentProducts)for(var s=0,u=t.paymentProducts.length;s<u;s++){var c=new e(t.paymentProducts[s]);if(r.push(c),i[c.id]=c,c.accountsOnFile)for(var l=c.accountsOnFile,f=0,h=l.length;f<h;f++){var p=l[f];n.push(p),o[p.id]=p,a[p.id]=c}}},n=function(t){this.basicPaymentProducts=[],this.basicPaymentProductById={},this.basicPaymentProductByAccountOnFileId={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,r(t,this.basicPaymentProducts,this.accountsOnFile,this.basicPaymentProductById,this.accountOnFileById,this.basicPaymentProductByAccountOnFileId)};return t.BasicPaymentProducts=n,n}),define("GCsdk.BasicPaymentProductGroups",["GCsdk.core","GCsdk.BasicPaymentProductGroup"],function(t,e){var r=function(t,r,n,i,o){if(t.paymentProductGroups)for(var a=0,s=t.paymentProductGroups.length;a<s;a++){var u=new e(t.paymentProductGroups[a]);if(r.push(u),i[u.id]=u,u.accountsOnFile)for(var c=u.accountsOnFile,l=0,f=c.length;l<f;l++){var h=c[l];n.push(h),o[h.id]=h}}},n=function(t){this.basicPaymentProductGroups=[],this.basicPaymentProductGroupById={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,r(t,this.basicPaymentProductGroups,this.accountsOnFile,this.basicPaymentProductGroupById,this.accountOnFileById)};return t.BasicPaymentProductGroups=n,n}),define("GCsdk.BasicPaymentItems",["GCsdk.core"],function(t){"use strict";var e=function(t,e,r){var n=[];if(e){for(var i=0,o=e.basicPaymentProductGroups.length;i<o;i++)for(var a=e.basicPaymentProductGroups[i].id,s=!1,u=0,c=t.basicPaymentProducts.length;u<c;u++){var l=t.basicPaymentProducts[u].paymentProductGroup;l===a&&s===!1?(t.basicPaymentProducts.splice(u,1,e.basicPaymentProductGroups[i]),s=!0):l===a&&s===!0&&n.push(u)}for(var i=n.length-1,o=0;i>=o;i--)t.basicPaymentProducts.splice(n[i],1)}r.basicPaymentItems=JSON.parse(JSON.stringify(t.basicPaymentProducts));for(var i=0,o=r.basicPaymentItems.length;i<o;i++){var f=r.basicPaymentItems[i];if(r.basicPaymentItemById[f.id]=f,f.accountsOnFile)for(var h=f.accountsOnFile,u=0,c=h.length;u<c;u++){var p=h[u];r.accountsOnFile.push(p),r.accountOnFileById[p.id]=p}}},r=function(t,r){this.basicPaymentItems=[],this.basicPaymentItemById={},this.accountsOnFile=[],this.accountOnFileById={},e(t,r,this)};return t.BasicPaymentItems=r,r}),define("GCsdk.PaymentRequest",["GCsdk.core"],function(t){var e=function(t){var e={},r=null,n=null,i=!1;this.isValid=function(){var t=this.getErrorMessageIds(),e=this.getPaymentProduct();if(!e)return!1;for(var r=!0,n=0;n<e.paymentProductFields.length;n++){var i=e.paymentProductFields[n];if(i.dataRestrictions.isRequired){var o=this.getValue(i.id);o||this.getAccountOnFile()||(r=!1)}}return 0===t.length&&r},this.setValue=function(t,r){e[t]=r},this.setTokenize=function(t){i=t},this.getTokenize=function(){return i},this.getErrorMessageIds=function(){var t=[];for(key in e){var n=r.paymentProductFieldById[key];n&&(t=t.concat(n.getErrorCodes(e[key])))}return t},this.getValue=function(t){return e[t]},this.getValues=function(){return e},this.getMaskedValue=function(t){var e=r.paymentProductFieldById[t],n=e.applyMask(this.getValue(t));return n.formattedValue()},this.getMaskedValues=function(){var t=e,n=[];for(var i in t){var o=r.paymentProductFieldById[i],a=o.applyMask(this.getValue(i));n[i]=a.formattedValue}return n},this.getUnmaskedValues=function(){var t=e,n=[];for(var i in t){var o=r.paymentProductFieldById[i];if(o){var a=o.applyMask(this.getValue(i)),s=a.formattedValue;n[i]=o.removeMask(s)}}return n},this.setPaymentProduct=function(t){"group"!==t.type&&(r=t)},this.getPaymentProduct=function(){return r},this.setAccountOnFile=function(t){for(var r=0,i=t.attributes.length;r<i;r++){var o=t.attributes[r];delete e[o.key]}n=t},this.getAccountOnFile=function(){return n},this.getClientSessionID=function(){return t}};return t.PaymentRequest=e,e}),define("GCsdk.C2SPaymentProductContext",["GCsdk.core"],function(t){var e=function(t){this.totalAmount=t.totalAmount,this.countryCode=t.countryCode,this.isRecurring=t.isRecurring,this.currency=t.currency,this.locale=t.locale};return t.C2SPaymentProductContext=e,e}),define("GCsdk.JOSEEncryptor",["GCsdk.core"],function(t){var e=forge.pki,r=(forge.asn1,512),n=128,i=function(t){return t=forge.util.encode64(t),t=t.split("=")[0],t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_")},o=function(t){var e={alg:"RSA-OAEP",enc:"A256CBC-HS512",kid:t};return JSON.stringify(e)},a=function(t){var r=forge.util.decode64(t),n=forge.util.createBuffer(r,"raw"),i=forge.asn1.fromDer(n),o=e.publicKeyFromAsn1(i);return o},s=function(t,e){var r=e.encrypt(t,"RSA-OAEP");return r},u=function(t,e,r){var n=forge.cipher.createCipher("AES-CBC",e);return n.start({iv:r}),n.update(forge.util.createBuffer(t)),n.finish(),n.output.bytes()},c=function(t){var e=forge.util.createBuffer(t),r=8*e.length(),n=forge.util.createBuffer();return n.putInt32(0),n.putInt32(r),n.bytes()},l=function(t,e,r,n,i){var o=forge.util.createBuffer();o.putBytes(e),o.putBytes(r),o.putBytes(n),o.putBytes(i);var a=o.bytes(),s=forge.hmac.create();return s.start(forge.sha512.create(),t),s.update(a),s.digest().bytes()},f=function(){this.encrypt=function(t,e){var f=JSON.stringify(t),h=o(e.keyId),p=i(h),d=forge.random.getBytesSync(r/8),y=a(e.publicKey),g=s(d,y),m=i(g),v=d.substring(0,r/2/8),b=d.substring(r/2/8),B=forge.random.getBytesSync(n/8),S=i(B),C=u(f,b,B),A=i(C),I=c(p),w=l(v,p,B,C,I),E=w.substring(0,w.length/2),T=i(E);return p+"."+m+"."+S+"."+A+"."+T}};return t.JOSEEncryptor=f,f}),define("GCsdk.Encryptor",["GCsdk.core","GCsdk.promise","GCsdk.JOSEEncryptor"],function(t,e,r){var n=function(t){this.encrypt=function(n){var i=new e,o="";return t.then(function(t){if(n.isValid()){var e={clientSessionId:n.getClientSessionID(),nonce:forge.util.bytesToHex(forge.random.getBytesSync(16)),paymentProductId:n.getPaymentProduct().id,tokenize:n.getTokenize()};n.getAccountOnFile()&&(e.accountOnFileId=n.getAccountOnFile().id);var a=[],s=n.getUnmaskedValues();for(var u in s)a.push({key:u,value:s[u]});e.paymentValues=a;var c=new r;o=c.encrypt(e,t),i.resolve(o)}else i.reject(n.getErrorMessageIds())},function(t){i.reject(t)}),i}};return t.Encryptor=n,n}),define("GCsdk.Session",["GCsdk.core","GCsdk.C2SCommunicator","GCsdk.C2SCommunicatorConfiguration","GCsdk.IinDetailsResponse","GCsdk.promise","GCsdk.C2SPaymentProductContext","GCsdk.BasicPaymentProducts","GCsdk.BasicPaymentProductGroups","GCsdk.PaymentProduct","GCsdk.PaymentProductGroup","GCsdk.BasicPaymentItems","GCsdk.PaymentRequest","GCsdk.Encryptor"],function(t,e,r,n,i,o,a,s,u,c,l,f,h){var p=function(t,n){var p,d,y,g,m,v,b=new r(t),B=new e(b,n),S=this;this.apiBaseUrl=b.apiBaseUrl,this.assetsBaseUrl=b.assetsBaseUrl,this.getBasicPaymentProducts=function(t){var e=new i,r=new o(t);return B.getBasicPaymentProducts(r).then(function(r){y=t;var n=new a(r);e.resolve(n)},function(){e.reject()}),e},this.getBasicPaymentProductGroups=function(t){var e=new i,r=new o(t);return B.getBasicPaymentProductGroups(r).then(function(r){y=t;var n=new s(r);e.resolve(n)},function(){e.reject()}),e},this.getBasicPaymentItems=function(t,e){var r=new i;return e?S.getBasicPaymentProducts(t).then(function(e){S.getBasicPaymentProductGroups(t).then(function(t){var n=new l(e,t);r.resolve(n)},function(){r.reject()})},function(){r.reject()}):S.getBasicPaymentProducts(t).then(function(t){var e=new l(t,null);r.resolve(e)},function(){r.reject()}),r},this.getPaymentProduct=function(t,e){var r=new i;p=t;var n=new o(y||e);return B.getPaymentProduct(t,n).then(function(t){d=new u(t),r.resolve(d)},function(){d=null,r.reject()}),r},this.getPaymentProductGroup=function(t,e){var r=new i;m=t;var n=new o(y||e);return B.getPaymentProductGroup(t,n).then(function(t){v=new c(t),r.resolve(v)},function(){v=null,r.reject()}),r},this.getIinDetails=function(t,e){t=t.replace(/ /g,"").substring(0,6);var r=new o(y||e);return B.getPaymentProductIdByCreditCardNumber(t,r)},this.getPublicKey=function(){return B.getPublicKey()},this.getPaymentProductDirectory=function(t,e,r){return B.getPaymentProductDirectory(t,e,r)},this.convertAmount=function(t,e,r){return B.convertAmount(t,e,r)},this.getPaymentRequest=function(){return g||(g=new f(t.clientSessionID)),g},this.getEncryptor=function(){var t=B.getPublicKey();return new h(t)}};return t.Session=p,p});
//# sourceMappingURL=gcsdk.min.js.map
