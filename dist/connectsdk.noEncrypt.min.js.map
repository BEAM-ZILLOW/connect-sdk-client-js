{"version":3,"sources":["core.js","promise.js","net.js","util.js","PublicKeyResponse.js","C2SCommunicatorConfiguration.js","IinDetailsResponse.js","C2SCommunicator.js","LabelTemplateElement.js","Attribute.js","AccountOnFileDisplayHints.js","AccountOnFile.js","PaymentProductDisplayHints.js","BasicPaymentProduct.js","BasicPaymentProductGroup.js","MaskedString.js","MaskingUtil.js","ValidationRuleLuhn.js","ValidationRuleExpirationDate.js","ValidationRuleFixedList.js","ValidationRuleLength.js","ValidationRuleRange.js","ValidationRuleRegularExpression.js","ValidationRuleEmailAddress.js","ValidationRuleBoletoBancarioRequiredness.js","ValidationRuleFactory.js","DataRestrictions.js","ValueMappingElement.js","FormElement.js","Tooltip.js","PaymentProductFieldDisplayHints.js","PaymentProductField.js","PaymentProduct.js","PaymentProductGroup.js","BasicPaymentProducts.js","BasicPaymentProductGroups.js","BasicPaymentItems.js","PaymentRequest.js","C2SPaymentProductContext.js","JOSEEncryptor.js","Encryptor.js","session.js"],"names":["global","connectsdk","modules","define","module","dependencies","fn","length","i","apply","this","exports","window","turing","PromiseModule","Promise","singleton","self","pending","resolve","result","complete","reject","isSingleton","prototype","then","success","failure","push","type","shift","xhr","XMLHttpRequest","location","protocol","ActiveXObject","e","successfulRequest","request","status","responseText","ajax","url","options","respondToReadyState","readyState","contentType","mimeType","getResponseHeader","response","test","responseJSON","net","parseJSON","responseXML","parseXML","callback","promise","error","setHeaders","defaults","Accept","Content-Type","name","headers","hasOwnProperty","setRequestHeader","send","postBody","chain","method","toLowerCase","asynchronous","onreadystatechange","open","serialize","set","key","value","data","end","arguments","JSONPCallback","runCallback","json","teardown","methodName","parseInt","Date","getTime","trim","s","replace","object","results","encodeURIComponent","join","string","JSON","parse","DOMParser","text","parseFromString","xml","async","loadXML","run","scriptTag","document","createElement","id","src","that","onerror","body","appendChild","removeChild","get","post","jsonp","Util","getMetadata","screenSize","innerWidth","innerHeight","platformIdentifier","navigator","userAgent","sdkIdentifier","GC","rppEnabledPage","sdkCreator","base64Encode","stringify","o1","o2","o3","h1","h2","h3","h4","bits","b64","ac","enc","tmp_arr","charCodeAt","charAt","r","slice","PublicKeyResponse","keyId","publicKey","C2SCommunicatorConfiguration","sessionDetails","endpoints","PROD","EU","API","ASSETS","US","PREPROD","SANDBOX","INTEGRATION","DEV_NAMI","DEV_ISC","region","environment","clientSessionId","clientSessionID","customerId","apiBaseUrl","assetsBaseUrl","IinDetailsResponse","countryCode","paymentProductId","isAllowedInContext","coBrands","Net","C2SCommunicator","c2SCommunicatorConfiguration","paymentProduct","_c2SCommunicatorConfiguration","_util","_cache","_providedPaymentProduct","_removedPaymentProductIds","_mapType","expirydate","numericstring","integer","expirationDate","_cleanJSON","il","fields","field","displayHints","validatorKey","dataRestrictions","validators","formElement","list","tooltip","image","sort","a","b","displayOrder","logo","_removeProducts","paymentProducts","product","indexOf","splice","_extendLogoUrl","postfix","metadata","getBasicPaymentProducts","context","cacheBust","cacheKey","totalAmount","locale","isRecurring","currency","setTimeout","res","getBasicPaymentProductGroups","getPaymentProduct","errorId","errors","code","propertyName","message","httpStatusCode","cleanedJSON","getPaymentProductGroup","paymentProductGroupId","getPaymentProductIdByCreditCardNumber","partialCreditCardNumber","iinDetailsResponse","isEnoughDigits","convertContextToIinDetailsContext","bin","paymentContext","amountOfMoney","amount","currencyCode","getPublicKey","publicKeyResponse","getPaymentProductDirectory","convertAmount","source","target","LabelTemplateElement","attributeKey","mask","wildcardMask","Attribute","mustWriteReason","_parseJSON","_json","_labelTemplate","_labelTemplateElementByAttributeKey","labelTemplate","l","labelTemplateElement","AccountOnFileDisplayHints","labelTemplateElementByAttributeKey","_attributes","_attributeByKey","attributes","attribute","AccountOnFile","attributeByKey","getMaskedValueByAttributeKey","undefined","maskingUtil","MaskingUtil","applyMask","PaymentProductDisplayHints","label","_accountsOnFile","_accountOnFileById","accountsOnFile","accountOnFile","BasicPaymentProduct","accountOnFileById","allowsRecurring","allowsTokenization","autoTokenized","maxAmount","minAmount","paymentMethod","mobileIntegrationLevel","usesRedirectionTo3rdParty","paymentProductGroup","BasicPaymentProductGroup","MaskedString","formattedValue","cursorIndex","_fillBuffer","index","offset","buffer","tempMask","valuec","Number","newValue","oldValue","split","maskc","c","cursor","tester","substring","getMaxLengthBasedOnMask","newLength","removeMask","valueIndex","inMask","ValidationRuleLuhn","errorMessageId","validate","luhnArr","sum","p","o","_validateDateFormat","pattern","ValidationRuleExpirationDate","now","getFullYear","getMonth","ValidationRuleFixedList","allowedValues","ValidationRuleLength","maxLength","minLength","ValidationRuleRange","maxValue","minValue","isNaN","ValidationRuleRegularExpression","regularExpression","regexp","RegExp","ValidationRuleEmailAddress","ValidationRuleBoletoBancarioRequiredness","fiscalNumberLength","fiscalNumberValue","ValidationRuleFactory","makeValidator","classType","toUpperCase","className","eval","DataRestrictions","_validationRules","_validationRuleByType","validationRuleFactory","validationRule","isRequired","validationRules","validationRuleByType","ValueMappingElement","displayName","FormElement","_valueMapping","valueMapping","Tooltip","PaymentProductFieldDisplayHints","obfuscate","placeholderLabel","preferredInputType","alwaysShow","PaymentProductField","_errorCodes","getErrorCodes","isValid","hasError","validator","applyWildcardMask","_paymentProductFields","_paymentProductFieldById","paymentProductField","PaymentProduct","basicPaymentProduct","paymentProductFields","paymentProductFieldById","PaymentProductGroup","_parseJson","_paymentProducts","_paymentProductById","_paymentProductByAccountOnFileId","aofs","j","jl","aof","BasicPaymentProducts","basicPaymentProducts","basicPaymentProductById","basicPaymentProductByAccountOnFileId","_paymentProductGroups","_paymentProductGroupById","paymentProductGroups","BasicPaymentProductGroups","basicPaymentProductGroups","basicPaymentProductGroupById","_products","_groups","_basicPaymentItems","doRemove","groupId","groupReplaced","productMethod","basicPaymentItems","basicPaymentItem","basicPaymentItemById","BasicPaymentItems","products","groups","PaymentRequest","_fieldValues","_paymentProduct","_accountOnFile","_tokenize","getErrorMessageIds","allRequiredFieldsPresent","storedValue","getValue","getAccountOnFile","setValue","paymentProductFieldId","setTokenize","tokenize","getTokenize","concat","getValues","getMaskedValue","maskedString","getMaskedValues","getUnmaskedValues","setPaymentProduct","setAccountOnFile","getClientSessionID","C2SPaymentProductContext","payload","pki","forge","CEKKEYLENGTH","asn1","IVLENGTH","base64UrlEncode","str","util","encode64","createProtectedHeader","kid","JOSEHeader","alg","decodePemPublicKey","publickeyB64Encoded","publickeyB64Decoded","decode64","buffer2","createBuffer","publickeyObject2","fromDer","publicKey2","publicKeyFromAsn1","encryptContentEncryptionKey","CEK","encryptedCEK","encrypt","encryptPayload","encKey","initializationVector","cipher","createCipher","start","iv","update","finish","output","bytes","calculateAdditionalAuthenticatedDataLength","encodededProtectedHeader","lengthInBits","putInt32","calculateHMAC","macKey","cipherText","al","putBytes","hmacInput","hmac","create","sha512","digest","JOSEEncryptor","plainTextValues","protectedHeader","random","getBytesSync","encryptedContentEncryptionKey","encodedEncryptedContentEncryptionKey","encodededinitializationVector","encodedCipherText","calculatedHmac","authenticationTag","encodedAuthenticationTag","Encryptor","publicKeyResponsePromise","paymentRequest","encryptedString","blob","nonce","bytesToHex","paymentValues","values","ownValues","Object","getOwnPropertyNames","joseEncryptor","session","_paymentProductId","_paymentRequestPayload","_paymentRequest","_paymentProductGroupId","_paymentProductGroup","_c2sCommunicator","_session","paymentRequestPayload","c2SPaymentProductContext","getBasicPaymentItems","useGroups","getIinDetails","getPaymentRequest","getEncryptor","Session"],"mappings":"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","file":"connectsdk.noEncrypt.min.js","sourcesContent":["(function (global) {\n    var connectsdk = {}, modules = {};\n\n    /* SDK internal function */\n    connectsdk.define = function (module, dependencies, fn) {\n        if (dependencies && dependencies.length) {\n            for (var i = 0; i < dependencies.length; i++) {\n                dependencies[i] = modules[dependencies[i]];\n            }\n        }\n        modules[module] = fn.apply(this, dependencies || []);\n    };\n\n    // Export `connectsdk` based on environment.\n    global.connectsdk = connectsdk;\n\n    if (typeof exports !== 'undefined') {\n        exports.connectsdk = connectsdk;\n    }\n\n    connectsdk.define('connectsdk.core', [], function () {\n        return connectsdk;\n    });\n\n    // use require.js if available otherwise we use our own\n    if (typeof define === 'undefined') {\n        global.define = connectsdk.define;\n    }\n} (typeof window === 'undefined' ? this : window));\n\n// (re)define core\ndefine(\"connectsdk.core\", [], function () {\n    var global = typeof window === 'undefined' ? this : window;\n    var connectsdk = {};\n    global.connectsdk = connectsdk;\n    if (typeof exports !== 'undefined') {\n        exports.connectsdk = connectsdk;\n    }\n    return connectsdk;\n});\n","define('connectsdk.promise', ['connectsdk.core'], function(turing) {\n\tfunction PromiseModule(global) {\n\t\t/**\n\t\t * The Promise class.\n\t\t */\n\t\tfunction Promise(singleton) {\n\t\t\tvar self = this;\n\t\t\tthis.pending = [];\n\n\t\t\t/**\n\t\t\t * Resolves a promise.\n\t\t\t *\n\t\t\t * @param {Object} A value\n\t\t\t */\n\t\t\tthis.resolve = function(result) {\n\t\t\t\tself.complete('resolve', result);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Rejects a promise.\n\t\t\t *\n\t\t\t * @param {Object} A value\n\t\t\t */\n\t\t\tthis.reject = function(result) {\n\t\t\t\tself.complete('reject', result);\n\t\t\t};\n\n\t\t\tif (singleton) {\n\t\t\t\tthis.isSingleton = true;\n\t\t\t}\n\t\t}\n\n\n\t\tPromise.prototype = {\n\t\t\t/**\n\t\t\t * Adds a success and failure handler for completion of this Promise object.\n\t\t\t *\n\t\t\t * @param {Function} success The success handler\n\t\t\t * @param {Function} success The failure handler\n\t\t\t * @returns {Promise} `this`\n\t\t\t */\n\t\t\tthen : function(success, failure) {\n\t\t\t\tthis.pending.push({\n\t\t\t\t\tresolve : success,\n\t\t\t\t\treject : failure\n\t\t\t\t});\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Runs through each pending 'thenable' based on type (resolve, reject).\n\t\t\t *\n\t\t\t * @param {String} type The thenable type\n\t\t\t * @param {Object} result A value\n\t\t\t */\n\t\t\tcomplete : function(type, result) {\n\t\t\t\twhile (this.pending[0]) {\n\t\t\t\t\tthis.pending.shift()[type](result);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tglobal.Promise = Promise;\n\t}\n\tPromiseModule(connectsdk);\n\n\treturn connectsdk.Promise;\n});","define('connectsdk.net', ['connectsdk.core'], function(connectsdk) {\n  var net = {};\n\n  /**\n    * Ajax request options:\n    *\n    *   - `method`: {String} HTTP method - GET, POST, etc.\n    *   - `success`: {Function} A callback to run when a request is successful\n    *   - `error`: {Function} A callback to run when the request fails\n    *   - `asynchronous`: {Boolean} Defaults to asynchronous\n    *   - `postBody`: {String} The HTTP POST body\n    *   - `contentType`: {String} The content type of the request, default is `application/x-www-form-urlencoded`\n    *\n    */\n\n  /**\n    * Removes leading and trailing whitespace.\n    * @param {String}\n    * @return {String}\n    */\n  var trim = ''.trim\n    ? function(s) { return s.trim(); }\n    : function(s) { return s.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''); };\n\n  function xhr() {\n    if (typeof XMLHttpRequest !== 'undefined' && (window.location.protocol !== 'file:' || !window.ActiveXObject)) {\n      return new XMLHttpRequest();\n    } else {\n      try {\n        return new ActiveXObject('Msxml2.XMLHTTP.6.0');\n      } catch(e) { }\n      try {\n        return new ActiveXObject('Msxml2.XMLHTTP.3.0');\n      } catch(e) { }\n      try {\n        return new ActiveXObject('Msxml2.XMLHTTP');\n      } catch(e) { }\n    }\n    return false;\n  }\n\n  function successfulRequest(request) {\n    return (request.status >= 200 && request.status < 300) ||\n        request.status == 304 ||\n        (request.status == 0 && request.responseText);\n  }\n\n  /**\n    * Serialize JavaScript for HTTP requests.\n    *\n    * @param {Object} object An Array or Object\n    * @returns {String} A string suitable for a GET or POST request\n    */\n  net.serialize = function(object) {\n    if (!object) return;\n\n    if (typeof object === 'string') {\n      return object;\n    }\n\n    var results = [];\n    for (var key in object) {\n      results.push(encodeURIComponent(key) + '=' + encodeURIComponent(object[key]));\n    }\n    return results.join('&');\n  };\n\n  /**\n    * JSON.parse support can be inferred using `connectsdk.detect('JSON.parse')`.\n    */\n  //connectsdk.addDetectionTest('JSON.parse', function() {\n  //  return window.JSON && window.JSON.parse;\n  //});\n\n  /**\n    * Parses JSON represented as a string.\n    *\n    * @param {String} string The original string\n    * @returns {Object} A JavaScript object\n    */\n  net.parseJSON = function(string) {\n    if (typeof string !== 'string' || !string) return null;\n    string = trim(string);\n    /*\n    return connectsdk.detect('JSON.parse') ?\n      window.JSON.parse(string) :\n      (new Function('return ' + string))();\n    */\n    return window.JSON.parse(string);\n  };\n\n  /**\n    * Parses XML represented as a string.\n    *\n    * @param {String} string The original string\n    * @returns {Object} A JavaScript object\n    */\n  if (window.DOMParser) {\n    net.parseXML = function(text) {\n      return new DOMParser().parseFromString(text, 'text/xml');\n    };\n  } else {\n    net.parseXML = function(text) {\n      var xml = new ActiveXObject('Microsoft.XMLDOM');\n      xml.async = 'false';\n      xml.loadXML(text);\n      return xml;\n    };\n  }\n\n  /**\n    * Creates an Ajax request.  Returns an object that can be used\n    * to chain calls.  For example:\n    *\n    *      $t.post('/post-test')\n    *        .data({ key: 'value' })\n    *        .end(function(res) {\n    *          assert.equal('value', res.responseText);\n    *        });\n    *\n    *      $t.get('/get-test')\n    *        .set('Accept', 'text/html')\n    *        .end(function(res) {\n    *          assert.equal('Sample text', res.responseText);\n    *        });\n    *\n    * The available chained methods are:\n    *\n    * `set` -- set a HTTP header\n    * `data` -- the postBody\n    * `end` -- send the request over the network, and calls your callback with a `res` object\n    * `send` -- sends the request and calls `data`: `.send({ data: value }, function(res) { });`\n    *\n    * @param {String} The URL to call\n    * @param {Object} Optional settings\n    * @returns {Object} A chainable object for further configuration\n    */\n  function ajax(url, options) {\n    var request = xhr(),\n        promise,\n        then,\n        response = {},\n        chain;\n    if (connectsdk.Promise) {\n      promise = new connectsdk.Promise();\n    }\n\n\n    function respondToReadyState(readyState) {\n      if (request.readyState == 4) {\n        var contentType = request.mimeType || request.getResponseHeader('content-type') || '';\n\n        response.status = request.status;\n        response.responseText = request.responseText;\n        if (/json/.test(contentType)) {\n          response.responseJSON = net.parseJSON(request.responseText);\n        } else if (/xml/.test(contentType)) {\n          response.responseXML = net.parseXML(request.responseText);\n      \t}\n\n        response.success = successfulRequest(request);\n\n        if (options.callback) {\n          return options.callback(response, request);\n        }\n\n        if (response.success) {\n          if (options.success) options.success(response, request);\n          if (promise) promise.resolve(response, request);\n        } else {\n          if (options.error) options.error(response, request);\n          if (promise) promise.reject(response, request);\n        }\n      }\n    }\n\n    // Set the HTTP headers\n    function setHeaders() {\n      var defaults = {\n        'Accept': 'text/javascript, application/json, text/html, application/xml, text/xml, */*',\n        'Content-Type': 'application/json'\n      };\n\n      /**\n       * Merge headers with defaults.\n       */\n      for (var name in defaults) {\n        if (!options.headers.hasOwnProperty(name))\n          options.headers[name] = defaults[name];\n      }\n      for (var name in options.headers) {\n        request.setRequestHeader(name, options.headers[name]);\n      }\n\n    }\n\n    if (typeof options === 'undefined') options = {};\n\n    options.method = options.method ? options.method.toLowerCase() : 'get';\n    options.asynchronous = options.asynchronous || true;\n    options.postBody = options.postBody || '';\n    request.onreadystatechange = respondToReadyState;\n    request.open(options.method, url, options.asynchronous);\n\n    options.headers = options.headers || {};\n    if (options.contentType) {\n      options.headers['Content-Type'] = options.contentType;\n    }\n\n    if (typeof options.postBody !== 'string') {\n      // Serialize JavaScript\n      options.postBody = net.serialize(options.postBody);\n    }\n\n    // setHeaders();\n\n    function send() {\n      try {\n      \tsetHeaders();\n        request.send(options.postBody);\n      } catch (e) {\n        if (options.error) {\n          options.error();\n        }\n      }\n    }\n\n    chain = {\n      set: function(key, value) {\n        options.headers[key] = value;\n        return chain;\n      },\n\n      send: function(data, callback) {\n        options.postBody = net.serialize(data);\n        options.callback = callback;\n        send();\n        return chain;\n      },\n\n      end: function(callback) {\n        options.callback = callback;\n        send();\n        return chain;\n      },\n\n      data: function(data) {\n        options.postBody = net.serialize(data);\n        return chain;\n      },\n\n      then: function() {\n        chain.end();\n        if (promise) promise.then.apply(promise, arguments);\n        return chain;\n      }\n    };\n\n    return chain;\n  }\n\n  function JSONPCallback(url, success, failure) {\n    var self = this;\n    this.url = url;\n    this.methodName = '__connectsdk_jsonp_' + parseInt(new Date().getTime());\n    this.success = success;\n    this.failure = failure;\n\n    function runCallback(json) {\n      self.success(json);\n      self.teardown();\n    }\n\n    window[this.methodName] = runCallback;\n  }\n\n  JSONPCallback.prototype.run = function() {\n    this.scriptTag = document.createElement('script');\n    this.scriptTag.id = this.methodName;\n    this.scriptTag.src = this.url.replace('{callback}', this.methodName);\n    var that = this;\n    this.scriptTag.onerror = function() {\n    \tthat.failure();\n    };\n    document.body.appendChild(this.scriptTag);\n  };\n\n  JSONPCallback.prototype.teardown = function() {\n    window[this.methodName] = null;\n    try {\n    \tdelete window[this.methodName];\n    } catch (e) {}\n    if (this.scriptTag) {\n      document.body.removeChild(this.scriptTag);\n    }\n  };\n\n  /**\n   * An Ajax GET request.\n   *\n   *      $t.get('/get-test')\n   *        .set('Accept', 'text/html')\n   *        .end(function(res) {\n   *          assert.equal('Sample text', res.responseText);\n   *        });\n   *\n   * @param {String} url The URL to request\n   * @param {Object} options The Ajax request options\n   * @returns {Object} A chainable object for further configuration\n   */\n  net.get = function(url, options) {\n    if (typeof options === 'undefined') options = {};\n    options.method = 'get';\n    return ajax(url, options);\n  };\n\n  /**\n   * An Ajax POST request.\n   *\n   *      $t.post('/post-test')\n   *        .data({ key: 'value' })\n   *        .end(function(res) {\n   *          assert.equal('value', res.responseText);\n   *        });\n   *\n   * @param {String} url The URL to request\n   * @param {Object} options The Ajax request options (`postBody` may come in handy here)\n   * @returns {Object} An object for further chaining with promises\n   */\n  net.post = function(url, options) {\n    if (typeof options === 'undefined') options = {};\n    options.method = 'post';\n    return ajax(url, options);\n  };\n\n  /**\n   * A jsonp request.  Example:\n   *\n   *     var url = 'http://feeds.delicious.com/v1/json/';\n   *     url += 'alex_young/javascript?callback={callback}';\n   *\n   *     connectsdk.net.jsonp(url, {\n   *       success: function(json) {\n   *         console.log(json);\n   *       }\n   *     });\n   *\n   * @param {String} url The URL to request\n   */\n  net.jsonp = function(url, options) {\n    if (typeof options === 'undefined') options = {};\n    var callback = new JSONPCallback(url, options.success, options.failure);\n    callback.run();\n  };\n\n  /**\n    * The Ajax methods are mapped to the `connectsdk` object:\n    *\n    *      connectsdk.get();\n    *      connectsdk.post();\n    *      connectsdk.json();\n    *\n    */\n  connectsdk.get = net.get;\n  connectsdk.post = net.post;\n  connectsdk.jsonp = net.jsonp;\n\n  net.ajax = ajax;\n  connectsdk.net = net;\n  return net;\n});","define(\"connectsdk.Util\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar Util = function() {\n\t\tthis.getMetadata = function() {\n\t\t\treturn {\n\t\t\t\tscreenSize : window.innerWidth + \"x\" + window.innerHeight,\n\t\t\t\tplatformIdentifier : window.navigator.userAgent,\n\t\t\t\tsdkIdentifier : ((document.GC && document.GC.rppEnabledPage) ? 'rpp-' : '') + 'JavaScriptClientSDK/v${version}',\n\t\t\t\tsdkCreator: 'Ingenico'\n\t\t\t};\n\t\t};\n\n\t\tthis.base64Encode = function(data) {\n\t\t\tif (typeof data === \"object\") {\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.stringify(data);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow \"data must be either a String or a JSON object\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\t\t\tvar o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc = '', tmp_arr = [];\n\n\t\t\tif (!data) {\n\t\t\t\treturn data;\n\t\t\t}\n\n\t\t\tdo {// pack three octets into four hexets\n\t\t\t\to1 = data.charCodeAt(i++);\n\t\t\t\to2 = data.charCodeAt(i++);\n\t\t\t\to3 = data.charCodeAt(i++);\n\n\t\t\t\tbits = o1 << 16 | o2 << 8 | o3;\n\n\t\t\t\th1 = bits >> 18 & 0x3f;\n\t\t\t\th2 = bits >> 12 & 0x3f;\n\t\t\t\th3 = bits >> 6 & 0x3f;\n\t\t\t\th4 = bits & 0x3f;\n\n\t\t\t\t// use hexets to index into b64, and append result to encoded string\n\t\t\t\ttmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n\t\t\t} while (i < data.length);\n\n\t\t\tenc = tmp_arr.join('');\n\n\t\t\tvar r = data.length % 3;\n\n\t\t\treturn ( r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n\t\t};\n\t};\n\tconnectsdk.Util = Util;\n\treturn Util;\n});","define(\"connectsdk.PublicKeyResponse\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar PublicKeyResponse = function(json) {\n\t\tthis.json = json;\n\t\tthis.keyId = json.keyId;\n\t\tthis.publicKey = json.publicKey;\n\t};\n\n\tconnectsdk.PublicKeyResponse = PublicKeyResponse;\n\treturn PublicKeyResponse;\n});","define(\"connectsdk.C2SCommunicatorConfiguration\", [\"connectsdk.core\"], function(connectsdk) {\n\n    var C2SCommunicatorConfiguration = function (sessionDetails) {\n        this.endpoints = {\n                            PROD: {\n                                EU: {\n                                    API: \"https://api-eu.globalcollect.com/client/v1\"\n                                    ,ASSETS: \"https://assets.pay1.poweredbyglobalcollect.com\"\n                                }\n                                ,US: {\n                                    API: \"https://api-us.globalcollect.com/client/v1\"\n                                    ,ASSETS: \"https://assets.pay2.poweredbyglobalcollect.com\"\n                                }\n                            }\n                            ,PREPROD: {\n                                EU: {\n                                    API: \"https://api-eu-preprod.globalcollect.com/client/v1\"\n                                    ,ASSETS: \"https://assets.pay1.preprod.poweredbyglobalcollect.com\"\n                                }\n                                ,US: {\n                                    API: \"https://api-us-preprod.globalcollect.com/client/v1\"\n                                    ,ASSETS: \"https://assets.pay2.preprod.poweredbyglobalcollect.com\"\n                                }\n                            }\n                            ,SANDBOX: {\n                                EU: {\n                                    API: \"https://api-eu-sandbox.globalcollect.com/client/v1\"\n                                    ,ASSETS: \"https://assets.pay1.sandbox.poweredbyglobalcollect.com\"\n                                }\n                                ,US: {\n                                    API: \"https://api-us-sandbox.globalcollect.com/client/v1\"\n                                    ,ASSETS: \"https://assets.pay2.sandbox.poweredbyglobalcollect.com\"\n                                }\n                            }\n\n                            // Non public settings. Only needed in GC development environment. Do not use\n                            // these, they will not work outside GC.\n                            ,INTEGRATION: {\n                                EU: {\n                                    API: \"https://int-test-api.gcsip.nl:4443/client/v1\"\n                                    ,ASSETS: \"https://assets.int-test-rpp.gcsip.nl:4443\"\n                                }\n                                ,US: {\n                                    API: \"https://int-test-api.gcsip.nl:4443/client/v1\"\n                                    ,ASSETS: \"https://assets.int-test-rpp.gcsip.nl:4443\"\n                                }\n                            }\n                            ,DEV_NAMI: {\n                                EU: {\n                                    API: \"https://nami-test-api.gcsip.nl:4443/client/v1\"\n                                    ,ASSETS: \"https://assets.nami-test-rpp.gcsip.nl:4443\"\n                                }\n                                ,US: {\n                                    API: \"https://nami-test-api.gcsip.nl:4443/client/v1\"\n                                    ,ASSETS: \"https://assets.nami-test-rpp.gcsip.nl:4443\"\n                                }\n                            }\n                            ,DEV_ISC: {\n                                EU: {\n                                    API: \"http://api.gc-dev.isaac.local/client/v1\"\n                                    ,ASSETS: \"http://rpp.gc-dev.isaac.local\"\n                                }\n                                ,US: {\n                                    API: \"http://api.gc-dev.isaac.local/client/v1\"\n                                    ,ASSETS: \"http://rpp.gc-dev.isaac.local\"\n                                }\n                            }\n                        };\n\n        this.region = sessionDetails.region;\n        this.environment = sessionDetails.environment || 'RPP'; // in case this is used in the RPP; the RPP will override the endpoints; by using the apiBaseUrl\n        this.clientSessionId = sessionDetails.clientSessionID;\n        this.customerId = sessionDetails.customerId;\n        this.apiBaseUrl = (sessionDetails.apiBaseUrl || sessionDetails.apiBaseUrl === '') ? sessionDetails.apiBaseUrl : this.endpoints[this.environment][this.region].API;\n        this.assetsBaseUrl = (sessionDetails.assetsBaseUrl || sessionDetails.assetsBaseUrl === '' ) ? sessionDetails.assetsBaseUrl : this.endpoints[this.environment][this.region].ASSETS;\n    };\n\n    connectsdk.C2SCommunicatorConfiguration = C2SCommunicatorConfiguration;\n    return C2SCommunicatorConfiguration;\n});","define(\"connectsdk.IinDetailsResponse\", [\"connectsdk.core\", \"connectsdk.promise\"], function(connectsdk, Promise) {\n\n\tvar IinDetailsResponse = function () {\n\t\tthis.status = '';\n\t\tthis.countryCode = '';\n\t\tthis.paymentProductId = '';\n\t\tthis.isAllowedInContext = '';\n\t\tthis.coBrands = [];\n\t};\n\tconnectsdk.IinDetailsResponse = IinDetailsResponse;\n\treturn IinDetailsResponse;\n});","define(\"connectsdk.C2SCommunicator\", [\"connectsdk.core\", \"connectsdk.promise\", \"connectsdk.net\", \"connectsdk.Util\", \"connectsdk.PublicKeyResponse\", \"connectsdk.IinDetailsResponse\"], function (connectsdk, Promise, Net, Util, PublicKeyResponse, IinDetailsResponse) {\n\tvar C2SCommunicator = function (c2SCommunicatorConfiguration, paymentProduct) {\n\t\tvar _c2SCommunicatorConfiguration = c2SCommunicatorConfiguration;\n\t\tvar _util = new Util();\n\t\tvar _cache = {};\n\t\tvar _providedPaymentProduct = paymentProduct;\n\t\tvar that = this;\n\t\tvar _removedPaymentProductIds = [302, 320];\n\n\t\tvar _mapType = {\n\t\t\t\"expirydate\": \"tel\",\n\t\t\t\"string\": \"text\",\n\t\t\t\"numericstring\": \"tel\",\n\t\t\t\"integer\": \"number\",\n\t\t\t\"expirationDate\": \"tel\"\n\t\t};\n\n\t\tvar _cleanJSON = function (json, url) {\n\t\t\tfor (var i = 0, il = json.fields.length; i < il; i++) {\n\t\t\t\tvar field = json.fields[i];\n\t\t\t\tfield.type = (field.displayHints.obfuscate) ? \"password\" : _mapType[field.type];\n\t\t\t\t// helper code for templating tools like Handlebars\n\t\t\t\tfor (validatorKey in field.dataRestrictions.validators) {\n\t\t\t\t\tfield.validators = field.validators || [];\n\t\t\t\t\tfield.validators.push(validatorKey);\n\t\t\t\t}\n\t\t\t\tif (field.displayHints.formElement.type === 'list') {\n\t\t\t\t\tfield.displayHints.formElement.list = true;\n\t\t\t\t}\n\n\t\t\t\t// full image paths\n\t\t\t\tif (field.displayHints.tooltip && field.displayHints.tooltip.image) {\n\t\t\t\t\tfield.displayHints.tooltip.image = url + \"/\" + field.displayHints.tooltip.image;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// apply sortorder\n\t\t\tjson.fields.sort(function (a, b) {\n\t\t\t\tif (a.displayHints.displayOrder < b.displayHints.displayOrder) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\t// set full image path\n\t\t\tjson.displayHints.logo = url + \"/\" + json.displayHints.logo;\n\t\t\treturn json;\n\t\t};\n\n\t\tvar _removeProducts = function (json) {\n\t\t\tfor (var i = json.paymentProducts.length - 1, il = 0; i >= il; i--) {\n\t\t\t\tvar product = json.paymentProducts[i];\n\t\t\t\tif (product && _removedPaymentProductIds.indexOf(product.id) > -1) {\n\t\t\t\t\tjson.paymentProducts.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn json;\n\t\t}\n\n\t\tvar _extendLogoUrl = function (json, url, postfix) {\n\t\t\tfor (var i = 0, il = json[\"paymentProduct\" + postfix].length; i < il; i++) {\n\t\t\t\tvar product = json[\"paymentProduct\" + postfix][i];\n\t\t\t\tproduct.displayHints.logo = url + \"/\" + product.displayHints.logo;\n\t\t\t}\n\t\t\tjson[\"paymentProduct\" + postfix].sort(function (a, b) {\n\t\t\t\tif (a.displayHints.displayOrder < b.displayHints.displayOrder) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\treturn json;\n\t\t};\n\n\t\tvar metadata = _util.getMetadata();\n\n\t\tthis.getBasicPaymentProducts = function (context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProducts-\" + context.totalAmount + \"_\" + context.countryCode + \"_\"\n\t\t\t\t\t+ context.locale + \"_\" + context.isRecurring + \"_\" + context.currency;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/products\" + \"?countryCode=\" + context.countryCode + \"&isRecurring=\" + context.isRecurring\n\t\t\t\t\t+ \"&amount=\" + context.totalAmount + \"&currencyCode=\" + context.currency\n\t\t\t\t\t+ \"&hide=fields&locale=\" + context.locale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar json = _extendLogoUrl(res.responseJSON, _c2SCommunicatorConfiguration.assetsBaseUrl, \"s\");\n\t\t\t\t\t\t\tjson = _removeProducts(json);\n\t\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getBasicPaymentProductGroups = function (context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProductGroups-\" + context.totalAmount + \"_\" + context.countryCode + \"_\"\n\t\t\t\t\t+ context.locale + \"_\" + context.isRecurring + \"_\" + context.currency;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/productgroups\" + \"?countryCode=\" + context.countryCode + \"&isRecurring=\" + context.isRecurring\n\t\t\t\t\t+ \"&amount=\" + context.totalAmount + \"&currencyCode=\" + context.currency\n\t\t\t\t\t+ \"&hide=fields&locale=\" + context.locale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar json = _extendLogoUrl(res.responseJSON, _c2SCommunicatorConfiguration.assetsBaseUrl, \"Groups\");\n\t\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\t\tpromise.resolve(json);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProduct = function (paymentProductId, context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProduct-\" + paymentProductId + \"_\" + context.totalAmount + \"_\"\n\t\t\t\t\t+ context.countryCode + \"_\" + \"_\" + context.locale + \"_\" + context.isRecurring + \"_\"\n\t\t\t\t\t+ context.currency;\n\n\t\t\tif (_removedPaymentProductIds.indexOf(paymentProductId) > -1) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.reject({\n\t\t\t\t\t\t\"errorId\": \"48b78d2d-1b35-4f8b-92cb-57cc2638e901\",\n\t\t\t\t\t\t\"errors\": [{\n\t\t\t\t\t\t\t\"code\": \"1007\",\n\t\t\t\t\t\t\t\"propertyName\": \"productId\",\n\t\t\t\t\t\t\t\"message\": \"UNKNOWN_PRODUCT_ID\",\n\t\t\t\t\t\t\t\"httpStatusCode\": 404\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tif (_providedPaymentProduct && _providedPaymentProduct.id === paymentProductId) {\n\t\t\t\t\tif (_cache[cacheKey]) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar json = _cleanJSON(_providedPaymentProduct, _c2SCommunicatorConfiguration.assetsBaseUrl);\n\t\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t} else if (_cache[cacheKey]) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else {\n\t\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t\t+ \"/products/\" + paymentProductId + \"?countryCode=\" + context.countryCode\n\t\t\t\t\t\t+ \"&isRecurring=\" + context.isRecurring + \"&amount=\" + context.totalAmount\n\t\t\t\t\t\t+ \"&currencyCode=\" + context.currency + \"&locale=\" + context.locale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t\tvar cleanedJSON = _cleanJSON(res.responseJSON, c2SCommunicatorConfiguration.assetsBaseUrl);\n\t\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\t\tpromise.resolve(cleanedJSON);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tpromise.reject(res);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductGroup = function (paymentProductGroupId, context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheBust = new Date().getTime()\n\t\t\t\t, cacheKey = \"getPaymentProductGroup-\" + paymentProductGroupId + \"_\" + context.totalAmount + \"_\"\n\t\t\t\t\t+ context.countryCode + \"_\" + \"_\" + context.locale + \"_\" + context.isRecurring + \"_\"\n\t\t\t\t\t+ context.currency;\n\t\t\tif (_providedPaymentProduct && _providedPaymentProduct.id === paymentProductGroupId) {\n\t\t\t\tif (_cache[cacheKey]) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t}, 0);\n\t\t\t\t} else {\n\t\t\t\t\tvar json = _cleanJSON(_providedPaymentProduct, _c2SCommunicatorConfiguration.assetsBaseUrl);\n\t\t\t\t\t_cache[cacheKey] = json;\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t} else if (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId\n\t\t\t\t\t+ \"/productgroups/\" + paymentProductGroupId + \"?countryCode=\" + context.countryCode\n\t\t\t\t\t+ \"&isRecurring=\" + context.isRecurring + \"&amount=\" + context.totalAmount\n\t\t\t\t\t+ \"&currencyCode=\" + context.currency + \"&locale=\" + context.locale + \"&cacheBust=\" + cacheBust)\n\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar cleanedJSON = _cleanJSON(res.responseJSON, c2SCommunicatorConfiguration.assetsBaseUrl);\n\t\t\t\t\t\t\t_cache[cacheKey] = cleanedJSON;\n\t\t\t\t\t\t\tpromise.resolve(cleanedJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductIdByCreditCardNumber = function (partialCreditCardNumber, context) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, iinDetailsResponse = new IinDetailsResponse()\n\t\t\t\t, cacheKey = \"getPaymentProductIdByCreditCardNumber-\" + partialCreditCardNumber;\n\n\t\t\tvar that = this;\n\t\t\tthis.context = context;\n\t\t\tif (_cache[cacheKey]) {// cache is based on digit 1-6\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tvar isEnoughDigits = function (partialCreditCardNumber) {\n\t\t\t\t\tif (partialCreditCardNumber.length < 6) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t\tif (isEnoughDigits(partialCreditCardNumber)) {\n\t\t\t\t\tNet.post(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId + \"/services/getIINdetails\")\n\t\t\t\t\t\t.data(JSON.stringify(this.convertContextToIinDetailsContext(partialCreditCardNumber, this.context)))\n\t\t\t\t\t\t.set('X-GCS-ClientMetaInfo', _util.base64Encode(metadata))\n\t\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t\tiinDetailsResponse.json = res.responseJSON;\n\t\t\t\t\t\t\t\tiinDetailsResponse.countryCode = res.responseJSON.countryCode;\n\t\t\t\t\t\t\t\tiinDetailsResponse.paymentProductId = res.responseJSON.paymentProductId;\n\t\t\t\t\t\t\t\tiinDetailsResponse.isAllowedInContext = res.responseJSON.isAllowedInContext;\n\t\t\t\t\t\t\t\tiinDetailsResponse.coBrands = res.responseJSON.coBrands;\n\t\t\t\t\t\t\t\t// check if this card is supported\n\t\t\t\t\t\t\t\t// if isAllowedInContext is available in the response set status and resolve\n\t\t\t\t\t\t\t\tif (res.responseJSON.hasOwnProperty('isAllowedInContext')) {\n\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"SUPPORTED\";\n\t\t\t\t\t\t\t\t\tif (iinDetailsResponse.isAllowedInContext === false) {\n\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"EXISTING_BUT_NOT_ALLOWED\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t_cache[cacheKey] = iinDetailsResponse;\n\t\t\t\t\t\t\t\t\tpromise.resolve(iinDetailsResponse);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t//if isAllowedInContext is not available get the payment product again to determine status and resolve\n\t\t\t\t\t\t\t\t\tthat.getPaymentProduct(iinDetailsResponse.paymentProductId, that.context).then(function (paymentProduct) {\n\t\t\t\t\t\t\t\t\t\tif (paymentProduct) {\n\t\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"SUPPORTED\";\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"UNSUPPORTED\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t_cache[cacheKey] = iinDetailsResponse;\n\t\t\t\t\t\t\t\t\t\tpromise.resolve(iinDetailsResponse);\n\t\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"UNKNOWN\";\n\t\t\t\t\t\t\t\t\t\tpromise.reject(iinDetailsResponse);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tiinDetailsResponse.status = \"UNKNOWN\";\n\t\t\t\t\t\t\t\tpromise.reject(iinDetailsResponse);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tiinDetailsResponse.status = \"NOT_ENOUGH_DIGITS\";\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tpromise.resolve(iinDetailsResponse);\n\t\t\t\t\t}, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.convertContextToIinDetailsContext = function (partialCreditCardNumber, context) {\n\t\t\treturn {\n\t\t\t\t\"bin\": partialCreditCardNumber,\n\t\t\t\t\"paymentContext\": {\n\t\t\t\t\t\"countryCode\": context.countryCode,\n\t\t\t\t\t\"isRecurring\": context.isRecurring,\n\t\t\t\t\t\"amountOfMoney\": {\n\t\t\t\t\t\t\"amount\": context.totalAmount,\n\t\t\t\t\t\t\"currencyCode\": context.currency\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.getPublicKey = function () {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"publicKey\";\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId + \"/crypto/publickey\")\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvar publicKeyResponse = new PublicKeyResponse(res.responseJSON);\n\t\t\t\t\t\t\t_cache[cacheKey] = publicKeyResponse;\n\t\t\t\t\t\t\tpromise.resolve(publicKeyResponse);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to get public key\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductDirectory = function (paymentProductId, currencyCode, countryCode) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"getPaymentProductDirectory-\" + paymentProductId + \"_\" + currencyCode + \"_\" + countryCode;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId + \"/products/\" + paymentProductId + \"/directory?countryCode=\" + countryCode + \"&currencyCode=\" + currencyCode)\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t_cache[cacheKey] = res.responseJSON;\n\t\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to retrieve payment product directory\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.convertAmount = function (amount, source, target) {\n\t\t\tvar promise = new Promise()\n\t\t\t\t, cacheKey = \"convertAmount-\" + amount + \"_\" + source + \"_\" + target;\n\n\t\t\tif (_cache[cacheKey]) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpromise.resolve(_cache[cacheKey]);\n\t\t\t\t}, 0);\n\t\t\t} else {\n\t\t\t\tNet.get(_c2SCommunicatorConfiguration.apiBaseUrl + \"/\" + _c2SCommunicatorConfiguration.customerId + \"/services/convert/amount?source=\" + source + \"&target=\" + target + \"&amount=\" + amount)\n\t\t\t\t\t.set(\"X-GCS-ClientMetaInfo\", _util.base64Encode(metadata))\n\t\t\t\t\t.set('Authorization', 'GCS v1Client:' + _c2SCommunicatorConfiguration.clientSessionId)\n\t\t\t\t\t.end(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\t_cache[cacheKey] = res.responseJSON;\n\t\t\t\t\t\t\tpromise.resolve(res.responseJSON);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpromise.reject(\"unable to convert amount\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\t};\n\n\n\tconnectsdk.C2SCommunicator = C2SCommunicator;\n\treturn C2SCommunicator;\n});","define(\"connectsdk.LabelTemplateElement\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar LabelTemplateElement = function (json) {\n\t\tthis.json = json;\n\t\tthis.attributeKey = json.attributeKey;\n\t\tthis.mask = json.mask;\n\t\tthis.wildcardMask = json.mask ? json.mask.replace(/9/g, \"*\") : \"\";\n\t};\n\n\tconnectsdk.LabelTemplateElement = LabelTemplateElement;\n\treturn LabelTemplateElement;\n});","define(\"connectsdk.Attribute\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar Attribute = function (json) {\n\t\tthis.json = json;\n\t\tthis.key = json.key;\n\t\tthis.value = json.value;\n\t\tthis.status = json.status;\n\t\tthis.mustWriteReason = json.mustWriteReason;\n\t};\n\n\tconnectsdk.Attribute = Attribute;\n\treturn Attribute;\n});","define(\"connectsdk.AccountOnFileDisplayHints\", [\"connectsdk.core\", \"connectsdk.LabelTemplateElement\"], function(connectsdk, LabelTemplateElement) {\n\n\tvar _parseJSON = function (_json, _labelTemplate, _labelTemplateElementByAttributeKey) {\n\t\tif (_json.labelTemplate) {\n\t\t\tfor (var i = 0, l = _json.labelTemplate.length; i < l; i++) {\n\t\t\t\tvar labelTemplateElement = new LabelTemplateElement(_json.labelTemplate[i]);\n\t\t\t\t_labelTemplate.push(labelTemplateElement);\n\t\t\t\t_labelTemplateElementByAttributeKey[labelTemplateElement.attributeKey] = labelTemplateElement;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar AccountOnFileDisplayHints = function (json) {\n\t\tthis.json = json;\n\t\tthis.labelTemplate = [];\n\t\tthis.labelTemplateElementByAttributeKey = {};\n\n\t\t_parseJSON(json, this.labelTemplate, this.labelTemplateElementByAttributeKey);\n\t};\n\n\tconnectsdk.AccountOnFileDisplayHints = AccountOnFileDisplayHints;\n\treturn AccountOnFileDisplayHints;\n});","define(\"connectsdk.AccountOnFile\", [\"connectsdk.core\" ,\"connectsdk.AccountOnFileDisplayHints\", \"connectsdk.Attribute\"], function(connectsdk, AccountOnFileDisplayHints, Attribute) {\n\n\tvar _parseJSON = function (_json, _attributes, _attributeByKey) {\n\t\tif (_json.attributes) {\n\t\t\tfor (var i = 0, l = _json.attributes.length; i < l; i++) {\n\t\t\t\tvar attribute = new Attribute(_json.attributes[i]);\n\t\t\t\t_attributes.push(attribute);\n\t\t\t\t_attributeByKey[attribute.key] = attribute;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar AccountOnFile = function (json) {\n\t\tvar that = this;\n\t\tthis.json = json;\n\t\tthis.attributes = [];\n\t\tthis.attributeByKey = {};\n\t\tthis.displayHints = new AccountOnFileDisplayHints(json.displayHints);\n\t\tthis.id = json.id;\n\t\tthis.paymentProductId = json.paymentProductId;\n\n\t\tthis.getMaskedValueByAttributeKey = function(attributeKey) {\n\t\t\tvar value = this.attributeByKey[attributeKey].value;\n\t\t\tvar wildcardMask;\n\t\t\ttry {\n\t\t\t\twildcardMask = this.displayHints.labelTemplateElementByAttributeKey[attributeKey].wildcardMask;\n\t\t\t} catch (e) {}\n\t\t\tif (value !== undefined && wildcardMask !== undefined) {\n\t\t\t\tvar maskingUtil = new connectsdk.MaskingUtil();\n\t\t\t\treturn maskingUtil.applyMask(wildcardMask, value);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t};\n\n\t\t_parseJSON(json, this.attributes, this.attributeByKey);\n\t};\n\n\tconnectsdk.AccountOnFile = AccountOnFile;\n\treturn AccountOnFile;\n});","define(\"connectsdk.PaymentProductDisplayHints\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar PaymentProductDisplayHints = function (json) {\n\t\tthis.json = json;\n\t\tthis.displayOrder = json.displayOrder;\n\t\tthis.label = json.label;\n\t\tthis.logo = json.logo;\n\t};\n\n\tconnectsdk.PaymentProductDisplayHints = PaymentProductDisplayHints;\n\treturn PaymentProductDisplayHints;\n});","define(\"connectsdk.BasicPaymentProduct\", [\"connectsdk.core\", \"connectsdk.AccountOnFile\", \"connectsdk.PaymentProductDisplayHints\"], function(connectsdk, AccountOnFile, PaymentProductDisplayHints) {\n\n\tvar _parseJSON = function (_json, _accountsOnFile, _accountOnFileById) {\n\t\tif (_json.accountsOnFile) {\n\t\t\tfor (var i = 0, il = _json.accountsOnFile.length; i < il; i++) {\n\t\t\t\tvar accountOnFile = new AccountOnFile(_json.accountsOnFile[i]);\n\t\t\t\t_accountsOnFile.push(accountOnFile);\n\t\t\t\t_accountOnFileById[accountOnFile.id] = accountOnFile;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProduct = function (json) {\n\t\tthis.json = json;\n\t\tthis.json.type = \"product\";\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\tthis.allowsRecurring = json.allowsRecurring;\n\t\tthis.allowsTokenization = json.allowsTokenization;\n\t\tthis.autoTokenized  = json.autoTokenized ;\n\t\tthis.displayHints = new PaymentProductDisplayHints(json.displayHints);\n\t\tthis.id = json.id;\n\t\tthis.maxAmount = json.maxAmount;\n\t\tthis.minAmount = json.minAmount;\n\t\tthis.paymentMethod = json.paymentMethod;\n\t\tthis.mobileIntegrationLevel = json.mobileIntegrationLevel;\n\t\tthis.usesRedirectionTo3rdParty = json.usesRedirectionTo3rdParty;\n\t\tthis.paymentProductGroup = json.paymentProductGroup;\n\n\t\t_parseJSON(json, this.accountsOnFile, this.accountOnFileById);\n\t};\n\n\tconnectsdk.BasicPaymentProduct = BasicPaymentProduct;\n\treturn BasicPaymentProduct;\n});","define(\"connectsdk.BasicPaymentProductGroup\", [\"connectsdk.core\", \"connectsdk.AccountOnFile\", \"connectsdk.PaymentProductDisplayHints\"], function(connectsdk, AccountOnFile, PaymentProductDisplayHints) {\n\n\tvar _parseJSON = function (_json, _accountsOnFile, _accountOnFileById) {\n\t\tif (_json.accountsOnFile) {\n\t\t\tfor (var i = 0, il = _json.accountsOnFile.length; i < il; i++) {\n\t\t\t\tvar accountOnFile = new AccountOnFile(_json.accountsOnFile[i]);\n\t\t\t\t_accountsOnFile.push(accountOnFile);\n\t\t\t\t_accountOnFileById[accountOnFile.id] = accountOnFile;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProductGroup = function (json) {\n\t\tthis.json = json;\n\t\tthis.json.type = \"group\";\n\t\tthis.id = json.id;\n\t\tthis.displayHints = new PaymentProductDisplayHints(json.displayHints);\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\t_parseJSON(json, this.accountsOnFile, this.accountOnFileById);\n\t};\n\n\tconnectsdk.BasicPaymentProductGroup = BasicPaymentProductGroup;\n\treturn BasicPaymentProductGroup;\n});","define(\"connectsdk.MaskedString\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar MaskedString = function(formattedValue, cursorIndex) {\n\n\t\tthis.formattedValue = formattedValue;\n\t\tthis.cursorIndex = cursorIndex;\n\t};\n\n\tconnectsdk.MaskedString = MaskedString;\n\treturn MaskedString;\n});","define(\"connectsdk.MaskingUtil\", [\"connectsdk.core\", \"connectsdk.MaskedString\"], function(connectsdk, MaskedString) {\n\n\tvar _fillBuffer = function(index, offset, buffer, tempMask, valuec) {\n\t\tif (index+offset < valuec.length && index < tempMask.length) {\n\t\t\tif ((tempMask[index] === \"9\" && Number(valuec[index+offset]) > -1 && valuec[index+offset] !== \" \") || tempMask[index] === \"*\") {\n\t\t\t\tbuffer.push(valuec[index+offset]);\n\t\t\t} else {\n\t\t\t\tif (valuec[index+offset] === tempMask[index]) {\n\t\t\t\t\tbuffer.push(valuec[index+offset]);\n\t\t\t\t} else if (tempMask[index] !== \"9\" && tempMask[index] !== \"*\") {\n\t\t\t\t\tbuffer.push(tempMask[index]);\n\t\t\t\t\toffset--;\n\t\t\t\t} else {\n\t\t\t\t\t// offset++;\n\t\t\t\t\tvaluec.splice(index+offset, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t_fillBuffer(index+1, offset, buffer, tempMask, valuec);\n\t\t}\n\t};\n\n\tvar MaskingUtil = function () {\n\t\tthis.applyMask = function (mask, newValue, oldValue) {\n\t\t\tvar buffer = [],\n\t\t\t\t\tvaluec = newValue.split(\"\");\n\t\t\tif (mask) {\n\t\t\t\tvar maskc = mask.split(\"\"),\n\t\t\t\t\t\ttempMask = [];\n\t\t\t\tfor (var i = 0, il = maskc.length; i < il; i++) {\n\t\t\t\t\t// the char '{' and '}' should ALWAYS be ignored\n\t\t\t\t\tvar c = maskc[i];\n\t\t\t\t\tif (c === \"{\" || c === \"}\") {\n\t\t\t\t\t\t// ignore\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttempMask.push(c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// tempmask now contains the replaceable chars and the non-replaceable masks at the correct index\n\t\t\t\t_fillBuffer(0, 0, buffer, tempMask, valuec);\n\t\t\t} else {\n\t\t\t\t// send back as is\n\t\t\t\tfor (var i = 0, il = valuec.length; i < il; i++) {\n\t\t\t\t\tvar c = valuec[i];\n\t\t\t\t\tbuffer.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\tnewValue = buffer.join(\"\");\n\t\t\tvar cursor = 1;\n\t\t\t// calculate the cursor index\n\t\t\tif (oldValue) {\n\t\t\t\tvar tester = oldValue.split(\"\");\n\t\t\t\tfor (var i = 0, il = buffer.length; i < il; i++) {\n\t\t\t\t\tif (buffer[i] !== tester[i]) {\n\t\t\t\t\t\tcursor = i+1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newValue.substring(0, newValue.length -1) === oldValue) {\n\t\t\t\tcursor = newValue.length + 1;\n\t\t\t}\n\t\t\treturn new MaskedString(newValue, cursor);\n\t\t};\n\t\t\n\t\tthis.getMaxLengthBasedOnMask = function (mask) {\n\t\t\tif (mask) {\n\t\t\t\tvar maskc = mask.split(\"\"),\n\t\t\t\t\t\tnewLength = -1;\n\t\t\t\tfor (var i = 0, il = maskc.length; i < il; i++) {\n\t\t\t\t\tnewLength++;\n\t\t\t\t\tvar c = maskc[i];\n\t\t\t\t\tif (c === \"{\" || c === \"}\") {\n\t\t\t\t\t\tnewLength--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn newLength;\n\t\t\t}\n\t\t};\n\n\t\tthis.removeMask = function (mask, value) {\n\t\t\t// remove the mask from the masked input\n\t\t\tvar buffer = [],\n\t\t\t\t\tvaluec = (value) ? value.split(\"\") : [];\n\t\t\tif (mask) {\n\t\t\t\tvar maskc = mask.split(\"\"),\n\t\t\t\t\t\tvalueIndex = -1,\n\t\t\t\t\t\tinMask = false;\n\t\t\t\tfor (var i = 0, il = maskc.length; i < il; i++) {\n\t\t\t\t\tvalueIndex++;\n\t\t\t\t\t// the char '{' and '}' should ALWAYS be ignored\n\t\t\t\t\tvar c = maskc[i];\n\t\t\t\t\tif (c === \"{\" || c === \"}\") {\n\t\t\t\t\t\tvalueIndex--;\n\t\t\t\t\t\tif (c === \"{\") {\n\t\t\t\t\t\t\tinMask = true;\n\t\t\t\t\t\t} else if (c === \"}\") {\n\t\t\t\t\t\t\tinMask = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (inMask && valuec[valueIndex]) {\n\t\t\t\t\t\t\tbuffer.push(valuec[valueIndex]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// send back as is\n\t\t\t\tfor (var i = 0, il = valuec.length; i < il; i++) {\n\t\t\t\t\tvar c = valuec[i];\n\t\t\t\t\tbuffer.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn buffer.join(\"\").trim();\n\t\t};\n\t};\n\n\tconnectsdk.MaskingUtil = MaskingUtil;\n\treturn MaskingUtil;\n});","define(\"connectsdk.ValidationRuleLuhn\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleLuhn = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n\t\tthis.validate = function (value) {\n\t\t\tvar luhnArr = [[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]]\n\t\t\t\t,sum = 0;\n\t\t\t\t\n\t   \t\tvalue.replace(/\\D+/g,\"\").replace(/[\\d]/g, function(c, p, o) {\n\t\t        sum += luhnArr[ (o.length-p)&1 ][ parseInt(c,10) ];\n\t\t    });\n\t\t    return (sum%10 === 0) && (sum > 0);\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleLuhn = ValidationRuleLuhn;\n\treturn ValidationRuleLuhn;\n});","define(\"connectsdk.ValidationRuleExpirationDate\", [\"connectsdk.core\"], function (connectsdk) {\n\n\tvar _validateDateFormat = function (value) {\n\t\tvar pattern = /\\d{4}|\\d{6}$/g;\n\t\treturn pattern.test(value);\n\t};\n\n\tvar ValidationRuleExpirationDate = function (json) {\n\t\tthis.json = json;\n\t\tthis.type = json.type,\n\t\t\tthis.errorMessageId = json.type;\n\n\t\t// value is mmYY or mmYYYY\n\t\tthis.validate = function (value) {\n\t\t\tvalue = value.replace(/[^\\d]/g, '');\n\t\t\tif (value.length === 4) {\n\t\t\t\tsplit = [value.substring(0, 2), \"20\" + value.substring(2, 4)];\n\t\t\t} else if (value.length === 6) {\n\t\t\t\tsplit = [value.substring(0, 2), value.substring(2, 6)];\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_validateDateFormat(value)) {\n\t\t\t\tvar now = new Date(new Date().getFullYear(), new Date().getMonth(), 1);\n\t\t\t\tvar expirationDate = new Date(split[1], split[0] - 1, 1);\n\t\t\t\tif (expirationDate.getMonth() !== Number(split[0] - 1) || expirationDate.getFullYear() !== Number(split[1])) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn expirationDate >= now; // the expiration month could be THIS month but that is still valid!\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleExpirationDate = ValidationRuleExpirationDate;\n\treturn ValidationRuleExpirationDate;\n});","define(\"connectsdk.ValidationRuleFixedList\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleFixedList = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n\t\tthis.allowedValues = json.attributes.allowedValues;\n\t\t\n\t\tthis.validate = function (value) {\n\t\t\tfor (var i = 0, il = this.allowedValues.length; i < il; i++) {\n\t\t\t\tif (this.allowedValues[i] === value) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleFixedList = ValidationRuleFixedList;\n\treturn ValidationRuleFixedList;\n});","define(\"connectsdk.ValidationRuleLength\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleLength = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        this.maxLength = json.attributes.maxLength;\n\t\tthis.minLength = json.attributes.minLength;\n\t\t\n\t\tthis.validate = function (value) {\n\t\t\treturn this.minLength <= value.length && value.length <= this.maxLength;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleLength = ValidationRuleLength;\n\treturn ValidationRuleLength;\n});","define(\"connectsdk.ValidationRuleRange\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleRange = function(json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        this.maxValue = json.attributes.maxValue;\n\t\tthis.minValue = json.attributes.minValue;\n\t\t\n\t\tthis.validate = function(value) {\n\t\t\tif (isNaN(value)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvalue = Number(value);\n\t\t\treturn this.minValue <= value && value <= this.maxValue;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleRange = ValidationRuleRange;\n\treturn ValidationRuleRange;\n});","define(\"connectsdk.ValidationRuleRegularExpression\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleRegularExpression = function(json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n\t\tthis.regularExpression = json.attributes.regularExpression;\n\t\t\n\t\tthis.validate = function(value) {\n\t\t\tvar regexp = new RegExp(this.regularExpression);\n\t\t\treturn regexp.test(value);\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleRegularExpression = ValidationRuleRegularExpression;\n\treturn ValidationRuleRegularExpression;\n});","define(\"connectsdk.ValidationRuleEmailAddress\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleEmailAddress = function(json) {\n        this.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        \n\t\tthis.validate = function(value) {\n\t\t\tvar regexp = new RegExp(/^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)*(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i);\n\t\t\treturn regexp.test(value);\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleEmailAddress = ValidationRuleEmailAddress;\n\treturn ValidationRuleEmailAddress;\n});","define(\"connectsdk.ValidationRuleBoletoBancarioRequiredness\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValidationRuleBoletoBancarioRequiredness = function (json) {\n\t\tthis.json = json;\n        this.type = json.type,\n        this.errorMessageId = json.type;\n        this.fiscalNumberLength = json.attributes.fiscalNumberLength;\n\t\t\n\t\tthis.validate = function (value, fiscalNumberValue) {\n\t\t\treturn (fiscalNumberValue.length === this.fiscalNumberLength && value.length > 0) || fiscalNumberValue.length !== this.fiscalNumberLength;\n\t\t};\n\t};\n\n\tconnectsdk.ValidationRuleBoletoBancarioRequiredness = ValidationRuleBoletoBancarioRequiredness;\n\treturn ValidationRuleBoletoBancarioRequiredness;\n});","define(\"connectsdk.ValidationRuleFactory\", [\"connectsdk.core\", \"connectsdk.ValidationRuleEmailAddress\", \"connectsdk.ValidationRuleExpirationDate\", \"connectsdk.ValidationRuleFixedList\", \"connectsdk.ValidationRuleLength\", \"connectsdk.ValidationRuleLuhn\", \"connectsdk.ValidationRuleRange\", \"connectsdk.ValidationRuleRegularExpression\", \"connectsdk.ValidationRuleBoletoBancarioRequiredness\"], function (connectsdk, ValidationRuleEmailAddress, ValidationRuleExpirationDate, ValidationRuleFixedList, ValidationRuleLength, ValidationRuleLuhn, ValidationRuleRange, ValidationRuleRegularExpression, ValidationRuleBoletoBancarioRequiredness) {\n\n    var ValidationRuleFactory = function () {\n\n        this.makeValidator = function (json) {\n            // create new class based on the rule\n            try {\n                var classType = json.type.charAt(0).toUpperCase() + json.type.slice(1), // camel casing\n                    className = eval(\"ValidationRule\" + classType);\n                return new className(json);\n            } catch (e) {\n                console.warn('no validator for ', classType);\n            }\n            return null;\n        };\n    };\n\n    connectsdk.ValidationRuleFactory = ValidationRuleFactory;\n    return ValidationRuleFactory;\n});","define(\"connectsdk.DataRestrictions\", [\"connectsdk.core\", \"connectsdk.ValidationRuleExpirationDate\", \"connectsdk.ValidationRuleFixedList\", \"connectsdk.ValidationRuleLength\", \"connectsdk.ValidationRuleLuhn\", \"connectsdk.ValidationRuleRange\", \"connectsdk.ValidationRuleRegularExpression\", \"connectsdk.ValidationRuleEmailAddress\", \"connectsdk.ValidationRuleFactory\"], function(connectsdk, ValidationRuleExpirationDate, ValidationRuleFixedList, ValidationRuleLength, ValidationRuleLuhn, ValidationRuleRange, ValidationRuleRegularExpression, ValidationRuleEmailAddress, ValidationRuleFactory) {\n\n\tvar DataRestrictions = function (json, mask) {\n\n\t\tvar _parseJSON = function (_json, _validationRules, _validationRuleByType) {\n\t\t    var validationRuleFactory = new ValidationRuleFactory();\n\t\t\tif (_json.validators) {\n\t\t\t\tfor (var key in _json.validators) {\n\t\t\t\t\tvar validationRule = validationRuleFactory.makeValidator({type: key, attributes: _json.validators[key]});\n\t\t\t\t\tif (validationRule) {\n\t\t\t\t\t\t_validationRules.push(validationRule);\n\t\t\t\t\t\t_validationRuleByType[validationRule.type] = validationRule;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.json = json;\n\t\tthis.isRequired = json.isRequired;\n\t\tthis.validationRules = [];\n\t\tthis.validationRuleByType = {};\n\t\t\n\t\t_parseJSON(json, this.validationRules, this.validationRuleByType);\n\t};\n\n\tconnectsdk.DataRestrictions = DataRestrictions;\n\treturn DataRestrictions;\n});","define(\"connectsdk.ValueMappingElement\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar ValueMappingElement = function (json) {\n\t\tthis.json = json;\n\t\tthis.displayName = json.displayName;\n\t\tthis.value = json.value;\n\t};\n\n\tconnectsdk.ValueMappingElement = ValueMappingElement;\n\treturn ValueMappingElement;\n});","define(\"connectsdk.FormElement\", [\"connectsdk.core\", \"connectsdk.ValueMappingElement\"], function(connectsdk, ValueMappingElement) {\n\n\tvar FormElement = function (json) {\n\n\t\tvar _parseJSON = function (_json, _valueMapping) {\n\t\t\tif (_json.valueMapping) {\n\t\t\t\tfor (var i = 0, l = _json.valueMapping.length; i < l; i++) {\n\t\t\t\t\t_valueMapping.push(new ValueMappingElement(_json.valueMapping[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.json = json;\n\t\tthis.type = json.type;\n\t\tthis.valueMapping = [];\n\t\t\n\t\t_parseJSON(json, this.valueMapping);\n\t};\n\n\tconnectsdk.FormElement = FormElement;\n\treturn FormElement;\n});","define(\"connectsdk.Tooltip\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar Tooltip = function (json) {\n\t\tthis.json = json;\n\t\tthis.image = json.image;\n\t\tthis.label = json.label;\n\t};\n\n\tconnectsdk.Tooltip = Tooltip;\n\treturn Tooltip;\n});","define(\"connectsdk.PaymentProductFieldDisplayHints\", [\"connectsdk.core\", \"connectsdk.Tooltip\", \"connectsdk.FormElement\"], function(connectsdk, Tooltip, FormElement) {\n\n\tvar PaymentProductFieldDisplayHints = function (json) {\n\t\tthis.json = json;\n \t\tthis.displayOrder = json.displayOrder;\n\t\tthis.formElement = new FormElement(json.formElement);\n\t\tthis.label = json.label;\n\t\tthis.mask = json.mask;\n\t\tthis.obfuscate = json.obfuscate;\n\t\tthis.placeholderLabel = json.placeholderLabel;\n\t\tthis.preferredInputType = json.preferredInputType;\n\t\tthis.tooltip = json.tooltip? new Tooltip(json.tooltip): undefined;\n\t\tthis.alwaysShow = json.alwaysShow;\n\t\tthis.wildcardMask = json.mask ? json.mask.replace(/9/g, \"*\") : \"\";\n\t};\n\n\tconnectsdk.PaymentProductFieldDisplayHints = PaymentProductFieldDisplayHints;\n\treturn PaymentProductFieldDisplayHints;\n});","define(\"connectsdk.PaymentProductField\", [\"connectsdk.core\", \"connectsdk.PaymentProductFieldDisplayHints\", \"connectsdk.DataRestrictions\", \"connectsdk.MaskingUtil\"], function(connectsdk, PaymentProductFieldDisplayHints, DataRestrictions, MaskingUtil) {\n\tvar PaymentProductField = function (json) {\n\t\tthis.json = json;\n\t\tthis.displayHints = new PaymentProductFieldDisplayHints(json.displayHints);\n\t\tthis.dataRestrictions = new DataRestrictions(json.dataRestrictions, this.displayHints.mask);\n\t\tthis.id = json.id;\n\t\tthis.type = json.type;\n\t\tvar _errorCodes = [];\n\n\t\tthis.getErrorCodes = function (value) {\n\t\t\tif (value) {\n\t\t\t\t_errorCodes = [];\n\t\t\t\tthis.isValid(value);\n\t\t\t}\n\t\t\treturn _errorCodes;\n\t\t};\n\t\tthis.isValid = function (value) {\n\t\t\t// isValid checks all datarestrictions\n\t\t\tvar validators = this.dataRestrictions.validationRules;\n\t\t\tvar hasError = false;\n\t\t\tvalue = this.removeMask(value);\n\t\t\tfor (var i = 0, il = validators.length; i < il; i++) {\n\t\t\t\tvar validator = validators[i];\n\t\t\t\tif (!validator.validate(value)) {\n\t\t\t\t\thasError = true;\n\t\t\t\t\t_errorCodes.push(validator.errorMessageId);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !hasError;\n\t\t};\n\t\tthis.applyMask = function (newValue, oldValue) {\n\t\t\tvar maskingUtil = new MaskingUtil();\n\t\t\treturn maskingUtil.applyMask(this.displayHints.mask, newValue, oldValue);\n\t\t};\n\t\tthis.applyWildcardMask = function (newValue, oldValue) {\n\t\t\tvar maskingUtil = new MaskingUtil();\n\t\t\treturn maskingUtil.applyMask(this.displayHints.wildcardMask, newValue, oldValue);\n\t\t};\n\t\tthis.removeMask = function (value) {\n\t\t\tvar maskingUtil = new MaskingUtil();\n\t\t\treturn maskingUtil.removeMask(this.displayHints.mask, value);\n\t\t};\n\t};\n\n\tconnectsdk.PaymentProductField = PaymentProductField;\n\treturn PaymentProductField;\n});","define(\"connectsdk.PaymentProduct\", [\"connectsdk.core\", \"connectsdk.BasicPaymentProduct\", \"connectsdk.PaymentProductField\"], function(connectsdk, BasicPaymentProduct, PaymentProductField) {\n\n\tvar _parseJSON = function (_json, _paymentProductFields, _paymentProductFieldById) {\n\t\tif (_json.fields) {\n\t\t\tfor (var i = 0, il = _json.fields.length; i < il; i++) {\n\t\t\t\tvar paymentProductField = new PaymentProductField(_json.fields[i]);\n\t\t\t\t_paymentProductFields.push(paymentProductField);\n\t\t\t\t_paymentProductFieldById[paymentProductField.id] = paymentProductField;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar PaymentProduct = function (json) {\n\t\tvar basicPaymentProduct = new BasicPaymentProduct(json);\n\t\tbasicPaymentProduct.json = json;\n\t\tbasicPaymentProduct.paymentProductFields = [];\n\t\tbasicPaymentProduct.paymentProductFieldById = {};\n\n\t\t_parseJSON(basicPaymentProduct.json, basicPaymentProduct.paymentProductFields, basicPaymentProduct.paymentProductFieldById);\n\n\t\treturn basicPaymentProduct;\n\t};\n\n\tconnectsdk.PaymentProduct = PaymentProduct;\n\treturn PaymentProduct;\n});","define(\"connectsdk.PaymentProductGroup\", [\"connectsdk.core\", \"connectsdk.BasicPaymentProduct\", \"connectsdk.PaymentProductField\"], function(connectsdk, BasicPaymentProduct, PaymentProductField) {\n\n\tvar _parseJSON = function (_json, _paymentProductFields, _paymentProductFieldById) {\n\t\tif (_json.fields) {\n\t\t\tfor (var i = 0, il = _json.fields.length; i < il; i++) {\n\t\t\t\tvar paymentProductField = new PaymentProductField(_json.fields[i]);\n\t\t\t\t_paymentProductFields.push(paymentProductField);\n\t\t\t\t_paymentProductFieldById[paymentProductField.id] = paymentProductField;\n\t\t\t}\n\t\t}\n\t};\n\n\tvar PaymentProductGroup = function (json) {\n\t\tvar basicPaymentProduct = new BasicPaymentProduct(json);\n\t\tbasicPaymentProduct.json = json;\n\t\tbasicPaymentProduct.json.type = \"group\";\n\t\tbasicPaymentProduct.paymentProductFields = [];\n\t\tbasicPaymentProduct.paymentProductFieldById = {};\n\n\t\t_parseJSON(basicPaymentProduct.json, basicPaymentProduct.paymentProductFields, basicPaymentProduct.paymentProductFieldById);\n\n\t\treturn basicPaymentProduct;\n\t};\n\n\tconnectsdk.PaymentProductGroup = PaymentProductGroup;\n\treturn PaymentProductGroup;\n});","define(\"connectsdk.BasicPaymentProducts\", [\"connectsdk.core\", \"connectsdk.BasicPaymentProduct\"], function(connectsdk, BasicPaymentProduct) {\n\n\tvar _parseJson = function (_json, _paymentProducts, _accountsOnFile, _paymentProductById, _accountOnFileById, _paymentProductByAccountOnFileId) {\n\t\tif (_json.paymentProducts) {\n\t\t\tfor (var i = 0, il = _json.paymentProducts.length; i < il; i++) {\n\t\t\t\tvar paymentProduct = new BasicPaymentProduct(_json.paymentProducts[i]);\n\t\t\t\t_paymentProducts.push(paymentProduct);\n\t\t\t\t_paymentProductById[paymentProduct.id] = paymentProduct;\n\n\t\t\t\tif (paymentProduct.accountsOnFile) {\n\t\t\t\t\tvar aofs = paymentProduct.accountsOnFile;\n\t\t\t\t\tfor (var j = 0, jl = aofs.length; j < jl; j++) {\n\t\t\t\t\t\tvar aof = aofs[j];\n\t\t\t\t\t\t_accountsOnFile.push(aof);\n\t\t\t\t\t\t_accountOnFileById[aof.id] = aof;\n\t\t\t\t\t\t_paymentProductByAccountOnFileId[aof.id] = paymentProduct;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProducts = function (json) {\n\t\tthis.basicPaymentProducts = [];\n\t\tthis.basicPaymentProductById = {};\n\t\tthis.basicPaymentProductByAccountOnFileId = {};\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\tthis.json = json;\n\n\t\t_parseJson(json, this.basicPaymentProducts, this.accountsOnFile, this.basicPaymentProductById, this.accountOnFileById, this.basicPaymentProductByAccountOnFileId);\n\t};\n\n\tconnectsdk.BasicPaymentProducts = BasicPaymentProducts;\n\treturn BasicPaymentProducts;\n});","define(\"connectsdk.BasicPaymentProductGroups\", [\"connectsdk.core\", \"connectsdk.BasicPaymentProductGroup\"], function(connectsdk, BasicPaymentProductGroup) {\n\n\tvar _parseJson = function (_json, _paymentProductGroups, _accountsOnFile, _paymentProductGroupById, _accountOnFileById) {\n\t\tif (_json.paymentProductGroups) {\n\t\t\tfor (var i = 0, il = _json.paymentProductGroups.length; i < il; i++) {\n\t\t\t\tvar paymentProductGroup = new BasicPaymentProductGroup(_json.paymentProductGroups[i]);\n\t\t\t\t_paymentProductGroups.push(paymentProductGroup);\n\t\t\t\t_paymentProductGroupById[paymentProductGroup.id] = paymentProductGroup;\n\n\t\t\t\tif (paymentProductGroup.accountsOnFile) {\n\t\t\t\t\tvar aofs = paymentProductGroup.accountsOnFile;\n\t\t\t\t\tfor (var j = 0, jl = aofs.length; j < jl; j++) {\n\t\t\t\t\t\tvar aof = aofs[j];\n\t\t\t\t\t\t_accountsOnFile.push(aof);\n\t\t\t\t\t\t_accountOnFileById[aof.id] = aof;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar BasicPaymentProductGroups = function (json) {\n\t\tthis.basicPaymentProductGroups = [];\n\t\tthis.basicPaymentProductGroupById = {};\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\tthis.json = json;\n\n\t\t_parseJson(json, this.basicPaymentProductGroups, this.accountsOnFile, this.basicPaymentProductGroupById, this.accountOnFileById);\n\t};\n\n\tconnectsdk.BasicPaymentProductGroups = BasicPaymentProductGroups;\n\treturn BasicPaymentProductGroups;\n});","define(\"connectsdk.BasicPaymentItems\", [\"connectsdk.core\"], function(connectsdk) {\n\t\"use strict\";\n\n\t\tvar _parseJson = function (_products, _groups, _basicPaymentItems) {\n\t\tvar doRemove = [];\n\t\tif (_groups) {\n\t\t\tfor (var i = 0, il = _groups.basicPaymentProductGroups.length; i < il; i++) {\n\t\t\t\tvar groupId = _groups.basicPaymentProductGroups[i].id,\n\t\t\t\t\t\tgroupReplaced = false;\n\t\t\t\tfor (var j = 0, jl = _products.basicPaymentProducts.length; j < jl; j++) {\n\t\t\t\t\tvar productMethod = _products.basicPaymentProducts[j].paymentProductGroup;\n\t\t\t\t\tif (productMethod === groupId && groupReplaced === false) {\n\t\t\t\t\t\t// replace instance by group\n\t\t\t\t\t\t_products.basicPaymentProducts.splice(j, 1, _groups.basicPaymentProductGroups[i]);\n\t\t\t\t\t\tgroupReplaced = true;\n\t\t\t\t\t} else if (productMethod === groupId && groupReplaced === true) {\n\t\t\t\t\t\t// mark for removal\n\t\t\t\t\t\tdoRemove.push(j);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i = doRemove.length -1, il = 0; i >= il; i--) {\n\t\t\t\t_products.basicPaymentProducts.splice(doRemove[i], 1);\n\t\t\t}\n\t\t}\n\t\t_basicPaymentItems.basicPaymentItems = JSON.parse(JSON.stringify(_products.basicPaymentProducts));\n\t\tfor (var i = 0, il = _basicPaymentItems.basicPaymentItems.length; i < il; i++) {\n\t\t\tvar basicPaymentItem = _basicPaymentItems.basicPaymentItems[i];\n\t\t\t_basicPaymentItems.basicPaymentItemById[basicPaymentItem.id] = basicPaymentItem;\n\t\t\tif (basicPaymentItem.accountsOnFile) {\n\t\t\t\tvar aofs = basicPaymentItem.accountsOnFile;\n\t\t\t\tfor (var j = 0, jl = aofs.length; j < jl; j++) {\n\t\t\t\t\tvar aof = aofs[j];\n\t\t\t\t\t_basicPaymentItems.accountsOnFile.push(aof);\n\t\t\t\t\t_basicPaymentItems.accountOnFileById[aof.id] = aof;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\n\tvar BasicPaymentItems = function (products, groups) {\n\t\tthis.basicPaymentItems = [];\n\t\tthis.basicPaymentItemById = {};\n\t\tthis.accountsOnFile = [];\n\t\tthis.accountOnFileById = {};\n\t\t_parseJson(products, groups, this);\n\t};\n\tconnectsdk.BasicPaymentItems = BasicPaymentItems;\n\treturn BasicPaymentItems;\n});","define(\"connectsdk.PaymentRequest\", [\"connectsdk.core\"], function(connectsdk) {\n  var PaymentRequest = function(clientSessionID) {\n    var _clientSessionID = clientSessionID;\n    var _fieldValues = {};\n    var _paymentProduct = null;\n    var _accountOnFile = null;\n    var _tokenize = false;\n\n    this.isValid = function() {\n      var errors = this.getErrorMessageIds();\n      // besides checking the fields for errors check if all mandatory fields are present as well\n      var paymentProduct = this.getPaymentProduct();\n      if (!paymentProduct) {\n        return false;\n      }\n      var allRequiredFieldsPresent = true;\n      for (var i = 0; i < paymentProduct.paymentProductFields.length; i++) {\n        var field = paymentProduct.paymentProductFields[i];\n        if (field.dataRestrictions.isRequired) {\n          // is this field present in the request?\n          var storedValue = this.getValue(field.id);\n          if (!storedValue && !this.getAccountOnFile()) {\n              // if we have an acoount on file the account on file could have the field, so we can ignore it\n            allRequiredFieldsPresent = false;\n          }\n        }\n      }\n      return errors.length === 0 && allRequiredFieldsPresent;\n    };\n    this.setValue = function(paymentProductFieldId, value) {\n      _fieldValues[paymentProductFieldId] = value;\n    };\n    this.setTokenize = function(tokenize) {\n      _tokenize = tokenize;\n    };\n    this.getTokenize = function() {\n      return _tokenize;\n    };\n    this.getErrorMessageIds = function() {\n      var errors = [];\n      for (key in _fieldValues) {\n        var paymentProductField = _paymentProduct.paymentProductFieldById[key];\n        if (paymentProductField) {\n          errors = errors.concat(paymentProductField.getErrorCodes(_fieldValues[key]));\n        }\n      }\n      return errors;\n    };\n    this.getValue = function(paymentProductFieldId) {\n      return _fieldValues[paymentProductFieldId];\n    };\n    this.getValues = function() {\n      return _fieldValues;\n    };\n    this.getMaskedValue = function(paymentProductFieldId) {\n      var paymentProductField = _paymentProduct.paymentProductFieldById[paymentProductFieldId];\n      var maskedString = paymentProductField.applyMask(this.getValue(paymentProductFieldId));\n      return maskedString.formattedValue();\n    };\n    this.getMaskedValues = function() {\n      var fields = _fieldValues;\n      var result = [];\n      for (var paymentProductFieldId in fields) {\n        var paymentProductField = _paymentProduct.paymentProductFieldById[paymentProductFieldId];\n        var maskedString = paymentProductField.applyMask(this.getValue(paymentProductFieldId));\n        result[paymentProductFieldId] = maskedString.formattedValue;\n      }\n      return result;\n    };\n    this.getUnmaskedValues = function() {\n      var fields = _fieldValues;\n      var result = [];\n      for (var paymentProductFieldId in fields) {\n        var paymentProductField = _paymentProduct.paymentProductFieldById[paymentProductFieldId];\n        if (paymentProductField) {\n          var maskedString = paymentProductField.applyMask(this.getValue(paymentProductFieldId));\n          var formattedValue = maskedString.formattedValue;\n          result[paymentProductFieldId] = paymentProductField.removeMask(formattedValue);\n        }\n      }\n      return result;\n    };\n    this.setPaymentProduct = function(paymentProduct) {\n      if (paymentProduct.type === \"group\") {\n        return;\n      }\n      _paymentProduct = paymentProduct;\n    };\n    this.getPaymentProduct = function() {\n      return _paymentProduct;\n    };\n    this.setAccountOnFile = function(accountOnFile) {\n      for (var i = 0, il = accountOnFile.attributes.length; i < il; i++) {\n        var attribute = accountOnFile.attributes[i];\n        delete _fieldValues[attribute.key];\n      }\n      _accountOnFile = accountOnFile;\n    };\n    this.getAccountOnFile = function() {\n      return _accountOnFile;\n    };\n    this.getClientSessionID = function() {\n\t\t    return clientSessionID;\n    };\n  };\n  connectsdk.PaymentRequest = PaymentRequest;\n  return PaymentRequest;\n});","define(\"connectsdk.C2SPaymentProductContext\", [\"connectsdk.core\"], function(connectsdk) {\n\n  var C2SPaymentProductContext = function (payload) {\n\tthis.totalAmount = payload.totalAmount;\n\tthis.countryCode = payload.countryCode;\n\tthis.isRecurring = payload.isRecurring;\n\tthis.currency = payload.currency;\n\tthis.locale = payload.locale;\n  };\n\n  connectsdk.C2SPaymentProductContext = C2SPaymentProductContext;\n  return C2SPaymentProductContext;\n});","define(\"connectsdk.JOSEEncryptor\", [\"connectsdk.core\"], function(connectsdk) {\n\n\tvar pki = forge.pki;\n\tvar asn1 = forge.asn1;\n\tvar CEKKEYLENGTH = 512;\n\tvar IVLENGTH = 128;\n\n\tvar base64UrlEncode = function(str) {\n\t\tstr = forge.util.encode64(str);\n\t\tstr = str.split('=')[0];\n\t\tstr = str.replace(/\\+/g, '-');\n\t\tstr = str.replace(/\\//g, '_');\n\t\treturn str;\n\t};\n\n\tvar createProtectedHeader = function(kid) {\n\t\tvar JOSEHeader = {\n\t\t\t\"alg\" : \"RSA-OAEP\",\n\t\t\t\"enc\" : \"A256CBC-HS512\",\n\t\t\t\"kid\" : kid\n\t\t};\n\t\treturn JSON.stringify(JOSEHeader);\n\t};\n\n\tvar decodePemPublicKey = function(publickeyB64Encoded) {\n\t\t// step 1: base64decode\n\t\tvar publickeyB64Decoded = forge.util.decode64(publickeyB64Encoded);\n\t\t// create a bytebuffer with these bytes\n\t\tvar buffer2 = forge.util.createBuffer(publickeyB64Decoded, 'raw');\n\t\t// convert DER to ASN1 object\n\t\tvar publickeyObject2 = forge.asn1.fromDer(buffer2);\n\t\t// convert to publicKey object\n\t\tvar publicKey2 = pki.publicKeyFromAsn1(publickeyObject2);\n\t\treturn publicKey2;\n\t};\n\n\tvar encryptContentEncryptionKey = function(CEK, publicKey) {\n\t\t// encrypt CEK with OAEP+SHA-1+MGF1Padding\n\t\tvar encryptedCEK = publicKey.encrypt(CEK, 'RSA-OAEP');\n\t\treturn encryptedCEK;\n\t};\n\n\tvar encryptPayload = function(payload, encKey, initializationVector) {\n\t\tvar cipher = forge.cipher.createCipher('AES-CBC', encKey);\n\t\tcipher.start({\n\t\t\tiv : initializationVector\n\t\t});\n\t\tcipher.update(forge.util.createBuffer(payload));\n\t\tcipher.finish();\n\t\treturn cipher.output.bytes();\n\t};\n\n\tvar calculateAdditionalAuthenticatedDataLength = function(encodededProtectedHeader) {\n\t\tvar buffer = forge.util.createBuffer(encodededProtectedHeader);\n\t\tvar lengthInBits = buffer.length() * 8;\n\n\t\tvar buffer2 = forge.util.createBuffer();\n\t\t// convert int to 64bit big endian\n\t\tbuffer2.putInt32(0);\n\t\tbuffer2.putInt32(lengthInBits);\n\t\treturn buffer2.bytes();\n\t};\n\n\tvar calculateHMAC = function(macKey, encodededProtectedHeader, initializationVector, cipherText, al) {\n\t\tvar buffer = forge.util.createBuffer();\n\t\tbuffer.putBytes(encodededProtectedHeader);\n\t\tbuffer.putBytes(initializationVector);\n\t\tbuffer.putBytes(cipherText);\n\t\tbuffer.putBytes(al);\n\n\t\tvar hmacInput = buffer.bytes();\n\n\t\tvar hmac = forge.hmac.create();\n\t\thmac.start(forge.sha512.create(), macKey);\n\t\thmac.update(hmacInput);\n\t\treturn hmac.digest().bytes();\n\t};\n\n\tvar JOSEEncryptor = function() {\n\n\t\tthis.encrypt = function(plainTextValues, publicKeyResponse) {\n\t\t\t// Create protected header and encode it with Base64 encoding\n\t\t\tvar payload = JSON.stringify(plainTextValues);\n\t\t\tvar protectedHeader = createProtectedHeader(publicKeyResponse.keyId);\n\t\t\tvar encodededProtectedHeader = base64UrlEncode(protectedHeader);\n\n\t\t\t// Create ContentEncryptionKey, is a random byte[]\n\t\t\tvar CEK = forge.random.getBytesSync(CEKKEYLENGTH / 8);\n\t\t\tvar publicKey = decodePemPublicKey(publicKeyResponse.publicKey);\n\n\t\t\t// Encrypt the contentEncryptionKey with the GC gateway publickey and encode it with Base64 encoding\n\t\t\tvar encryptedContentEncryptionKey = encryptContentEncryptionKey(CEK, publicKey);\n\t\t\tvar encodedEncryptedContentEncryptionKey = base64UrlEncode(encryptedContentEncryptionKey);\n\n\t\t\t// Split the contentEncryptionKey in ENC_KEY and MAC_KEY for using hmac\n\t\t\tvar macKey = CEK.substring(0, CEKKEYLENGTH / 2 / 8);\n\t\t\tvar encKey = CEK.substring(CEKKEYLENGTH / 2 / 8);\n\n\t\t\t// Create Initialization Vector\n\t\t\tvar initializationVector = forge.random.getBytesSync(IVLENGTH / 8);\n\t\t\tvar encodededinitializationVector = base64UrlEncode(initializationVector);\n\n\t\t\t// Encrypt content with ContentEncryptionKey and Initialization Vector\n\t\t\tvar cipherText = encryptPayload(payload, encKey, initializationVector);\n\t\t\tvar encodedCipherText = base64UrlEncode(cipherText);\n\n\t\t\t// Create Additional Authenticated Data  and Additional Authenticated Data Length\n\t\t\tvar al = calculateAdditionalAuthenticatedDataLength(encodededProtectedHeader);\n\n\t\t\t// Calculates HMAC\n\t\t\tvar calculatedHmac = calculateHMAC(macKey, encodededProtectedHeader, initializationVector, cipherText, al);\n\n\t\t\t// Truncate HMAC Value to Create Authentication Tag\n\t\t\tvar authenticationTag = calculatedHmac.substring(0, calculatedHmac.length / 2);\n\t\t\tvar encodedAuthenticationTag = base64UrlEncode(authenticationTag);\n\n\t\t\treturn encodededProtectedHeader + \".\" + encodedEncryptedContentEncryptionKey + \".\" + encodededinitializationVector + \".\" + encodedCipherText + \".\" + encodedAuthenticationTag;\n\t\t};\n\t};\n\n\tconnectsdk.JOSEEncryptor = JOSEEncryptor;\n\treturn JOSEEncryptor;\n});","define(\"connectsdk.Encryptor\", [\"connectsdk.core\", \"connectsdk.promise\", \"connectsdk.JOSEEncryptor\"], function(connectsdk, Promise, JOSEEncryptor) {\n\n\tvar Encryptor = function(publicKeyResponsePromise) {\n\t\tthis.encrypt = function(paymentRequest) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar encryptedString = '';\n\t\t\tpublicKeyResponsePromise.then(function (publicKeyResponse) {\n\t\t\t\tif (paymentRequest.isValid()) {\n\t\t\t\t    \n\t\t\t\t\tvar blob = {\n\t\t\t\t\t   clientSessionId: paymentRequest.getClientSessionID()\n\t\t\t\t\t   ,nonce: forge.util.bytesToHex(forge.random.getBytesSync(16))\n\t\t\t\t\t   ,paymentProductId: paymentRequest.getPaymentProduct().id\n                       ,tokenize: paymentRequest.getTokenize()\n                    };\n                    \n\t\t\t\t\tif (paymentRequest.getAccountOnFile()) {\n                        blob[\"accountOnFileId\"] = paymentRequest.getAccountOnFile().id;\n                    }\n                    \n                    var paymentValues = [], values = paymentRequest.getUnmaskedValues();\n                    var ownValues = Object.getOwnPropertyNames(values);\n\t\t\t\t\tfor (var i = 0; i < ownValues.length; i++) {\n\t\t\t\t\t\tvar propertyName = ownValues[i];\n\t\t\t\t\t\tif (propertyName !== \"length\") {\n\t\t\t\t\t\t\tpaymentValues.push({\n\t\t\t\t\t\t\t\tkey: propertyName,\n\t\t\t\t\t\t\t\tvalue: values[propertyName]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n                    blob[\"paymentValues\"] = paymentValues;\n\t\t\t\t\t\n\t\t\t\t\t// use blob to encrypt\n\t\t\t\t\tvar joseEncryptor = new JOSEEncryptor();\n\t\t\t\t\tencryptedString = joseEncryptor.encrypt(blob, publicKeyResponse);\n\t\t\t\t\tpromise.resolve(encryptedString);\n\t\t\t\t} else {\n\t\t\t\t\tpromise.reject(paymentRequest.getErrorMessageIds());\n\t\t\t\t}\n\t\t\t}, function (error) {\n\t\t\t\tpromise.reject(error);\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\t};\n\n\tconnectsdk.Encryptor = Encryptor;\n\treturn Encryptor;\n});","define(\"connectsdk.Session\", [\"connectsdk.core\", \"connectsdk.C2SCommunicator\", \"connectsdk.C2SCommunicatorConfiguration\", \"connectsdk.IinDetailsResponse\", \"connectsdk.promise\", \"connectsdk.C2SPaymentProductContext\", \"connectsdk.BasicPaymentProducts\", \"connectsdk.BasicPaymentProductGroups\", \"connectsdk.PaymentProduct\", \"connectsdk.PaymentProductGroup\", \"connectsdk.BasicPaymentItems\", \"connectsdk.PaymentRequest\", \"connectsdk.Encryptor\"], function(connectsdk, C2SCommunicator, C2SCommunicatorConfiguration, IinDetailsResponse, Promise, C2SPaymentProductContext, BasicPaymentProducts, BasicPaymentProductGroups, PaymentProduct, PaymentProductGroup, BasicPaymentItems, PaymentRequest, Encryptor) {\n\n\tvar session = function (sessionDetails, paymentProduct) {\n\n\t\tvar _c2SCommunicatorConfiguration = new C2SCommunicatorConfiguration(sessionDetails)\n\t\t\t,_c2sCommunicator = new C2SCommunicator(_c2SCommunicatorConfiguration, paymentProduct)\n\t\t\t,_paymentProductId, _paymentProduct, _paymentRequestPayload, _paymentRequest, _paymentProductGroupId, _paymentProductGroup, _session = this;\n\t\tthis.apiBaseUrl = _c2SCommunicatorConfiguration.apiBaseUrl;\n\t\tthis.assetsBaseUrl = _c2SCommunicatorConfiguration.assetsBaseUrl;\n\n\t\tthis.getBasicPaymentProducts = function(paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(paymentRequestPayload);\n\t\t\t_c2sCommunicator.getBasicPaymentProducts(c2SPaymentProductContext).then(function (json) {\n\t\t\t\t_paymentRequestPayload = paymentRequestPayload;\n\t\t\t\tvar paymentProducts = new BasicPaymentProducts(json);\n\t\t\t\tpromise.resolve(paymentProducts);\n\t\t\t}, function () {\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getBasicPaymentProductGroups = function(paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(paymentRequestPayload);\n\t\t\t_c2sCommunicator.getBasicPaymentProductGroups(c2SPaymentProductContext).then(function (json) {\n\t\t\t\t_paymentRequestPayload = paymentRequestPayload;\n\t\t\t\tvar paymentProductGroups = new BasicPaymentProductGroups(json);\n\t\t\t\tpromise.resolve(paymentProductGroups);\n\t\t\t}, function () {\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getBasicPaymentItems = function(paymentRequestPayload, useGroups) {\n\t\t\tvar promise = new Promise();\n\t\t\t// get products & groups\n\t\t\tif (useGroups) {\n\t\t\t\t_session.getBasicPaymentProducts(paymentRequestPayload).then(function (products) {\n\t\t\t\t\t_session.getBasicPaymentProductGroups(paymentRequestPayload).then(function (groups) {\n\t\t\t\t\t\tvar basicPaymentItems = new BasicPaymentItems(products, groups);\n\t\t\t\t\t\tpromise.resolve(basicPaymentItems);\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tpromise.reject();\n\t\t\t\t\t});\n\t\t\t\t}, function () {\n\t\t\t\t\tpromise.reject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t_session.getBasicPaymentProducts(paymentRequestPayload).then(function (products) {\n\t\t\t\t\tvar basicPaymentItems = new BasicPaymentItems(products, null);\n\t\t\t\t\tpromise.resolve(basicPaymentItems);\n\t\t\t\t}, function () {\n\t\t\t\t\tpromise.reject();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProduct = function(paymentProductId, paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\t_paymentProductId = paymentProductId;\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(_paymentRequestPayload || paymentRequestPayload);\n\t\t\t_c2sCommunicator.getPaymentProduct(paymentProductId, c2SPaymentProductContext).then(function (response) {\n\t\t\t\t_paymentProduct = new PaymentProduct(response);\n\t\t\t\tpromise.resolve(_paymentProduct);\n\t\t\t}, function () {\n\t\t\t\t_paymentProduct = null;\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getPaymentProductGroup = function(paymentProductGroupId, paymentRequestPayload) {\n\t\t\tvar promise = new Promise();\n\t\t\t_paymentProductGroupId = paymentProductGroupId;\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(_paymentRequestPayload || paymentRequestPayload);\n\t\t\t_c2sCommunicator.getPaymentProductGroup(paymentProductGroupId, c2SPaymentProductContext).then(function (response) {\n\t\t\t\t_paymentProductGroup = new PaymentProductGroup(response);\n\t\t\t\tpromise.resolve(_paymentProductGroup);\n\t\t\t}, function () {\n\t\t\t\t_paymentProductGroup = null;\n\t\t\t\tpromise.reject();\n\t\t\t});\n\t\t\treturn promise;\n\t\t};\n\n\t\tthis.getIinDetails = function (partialCreditCardNumber, paymentRequestPayload) {\n\t\t\tpartialCreditCardNumber = partialCreditCardNumber.replace(/ /g, '').substring(0,6);\n\t\t\tvar c2SPaymentProductContext = new C2SPaymentProductContext(_paymentRequestPayload || paymentRequestPayload);\n\t\t\treturn _c2sCommunicator.getPaymentProductIdByCreditCardNumber(partialCreditCardNumber, c2SPaymentProductContext);\n\t\t};\n\n\t\tthis.getPublicKey = function () {\n\t\t\treturn _c2sCommunicator.getPublicKey();\n\t\t};\n\n\t\tthis.getPaymentProductDirectory = function (paymentProductId, currencyCode, countryCode) {\n\t\t\treturn _c2sCommunicator.getPaymentProductDirectory(paymentProductId, currencyCode, countryCode);\n\t\t};\n\n\t\tthis.convertAmount = function (amount, source, target) {\n\t\t\treturn _c2sCommunicator.convertAmount(amount, source, target);\n\t\t};\n\n\t\tthis.getPaymentRequest = function () {\n\t\t\tif (!_paymentRequest) {\n\t\t\t\t_paymentRequest = new PaymentRequest(sessionDetails.clientSessionID);\n\n\t\t\t}\n\t\t\treturn _paymentRequest;\n\t\t};\n\n\t\tthis.getEncryptor = function () {\n\t\t\tvar publicKeyResponsePromise = _c2sCommunicator.getPublicKey();\n\t\t\treturn new Encryptor(publicKeyResponsePromise);\n\t\t};\n\t};\n\tconnectsdk.Session = session;\n\treturn session;\n});"],"sourceRoot":"/source/"}