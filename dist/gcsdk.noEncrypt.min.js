!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){function t(){}function e(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function n(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function i(t){var e,i,r;if(n(t))return t;if(i=t.valueOf,"function"==typeof i&&(e=i.call(t),n(e)))return e;if(r=t.toString,"function"==typeof r&&(e=r.call(t),n(e)))return e;throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(e){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i=p.call(arguments,1),r=function(){if(this instanceof u){var t=n.apply(this,i.concat(p.call(arguments)));return Object(t)===t?t:this}return n.apply(e,i.concat(p.call(arguments)))},o=Math.max(0,n.length-i.length),s=[],a=0;a<o;a++)s.push("$"+a);var u=Function("binder","return function("+s.join(",")+"){return binder.apply(this,arguments)}")(r);return n.prototype&&(t.prototype=n.prototype,u.prototype=new t,t.prototype=null),u});var r,o,s,a,u,c=Function.prototype.call,l=Array.prototype,d=Object.prototype,p=l.slice,h=c.bind(d.toString),f=c.bind(d.hasOwnProperty);if((u=f(d,"__defineGetter__"))&&(r=c.bind(d.__defineGetter__),o=c.bind(d.__defineSetter__),s=c.bind(d.__lookupGetter__),a=c.bind(d.__lookupSetter__)),2!=[1,2].splice(0).length){var y=Array.prototype.splice,m=Array.prototype.push,g=Array.prototype.unshift;!function(){function t(t){for(var e=[];t--;)e.unshift(t);return e}var e,n=[];if(n.splice.bind(n,0,0).apply(null,t(20)),n.splice.bind(n,0,0).apply(null,t(26)),e=n.length,n.splice(5,0,"XXX"),e+1==n.length)return!0}()?Array.prototype.splice=function(t,e){var n,i=p.call(arguments,2),r=i.length;if(!arguments.length)return[];if(void 0===t&&(t=0),void 0===e&&(e=this.length-t),r>0){if(e<=0){if(t==this.length)return m.apply(this,i),[];if(0==t)return g.apply(this,i),[]}return n=p.call(this,t,t+e),i.push.apply(i,p.call(this,t+e,this.length)),i.unshift.apply(i,p.call(this,0,t)),i.unshift(0,this.length),y.apply(this,i),n}return y.call(this,t,e)}:Array.prototype.splice=function(t,e){return arguments.length?y.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(p.call(arguments,2))):[]}}if(1!=[].unshift(0)){var g=Array.prototype.unshift;Array.prototype.unshift=function(){return g.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(t){return"[object Array]"==h(t)});var v=Object("a"),C="a"!=v[0]||!(0 in v),P=function(t){var e=!0;return t&&t.call("foo",function(t,n,i){"object"!=typeof i&&(e=!1)}),!!t&&e};if(Array.prototype.forEach&&P(Array.prototype.forEach)||(Array.prototype.forEach=function(t){var e=B(this),n=C&&"[object String]"==h(this)?this.split(""):e,i=arguments[1],r=-1,o=n.length>>>0;if("[object Function]"!=h(t))throw new TypeError;for(;++r<o;)r in n&&t.call(i,n[r],r,e)}),Array.prototype.map&&P(Array.prototype.map)||(Array.prototype.map=function(t){var e=B(this),n=C&&"[object String]"==h(this)?this.split(""):e,i=n.length>>>0,r=Array(i),o=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var s=0;s<i;s++)s in n&&(r[s]=t.call(o,n[s],s,e));return r}),Array.prototype.filter&&P(Array.prototype.filter)||(Array.prototype.filter=function(t){var e,n=B(this),i=C&&"[object String]"==h(this)?this.split(""):n,r=i.length>>>0,o=[],s=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var a=0;a<r;a++)a in i&&(e=i[a],t.call(s,e,a,n)&&o.push(e));return o}),Array.prototype.every&&P(Array.prototype.every)||(Array.prototype.every=function(t){var e=B(this),n=C&&"[object String]"==h(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&!t.call(r,n[o],o,e))return!1;return!0}),Array.prototype.some&&P(Array.prototype.some)||(Array.prototype.some=function(t){var e=B(this),n=C&&"[object String]"==h(this)?this.split(""):e,i=n.length>>>0,r=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in n&&t.call(r,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=B(this),n=C&&"[object String]"==h(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;o<i;o++)o in n&&(r=t.call(void 0,r,n[o],o,e));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=B(this),n=C&&"[object String]"==h(this)?this.split(""):e,i=n.length>>>0;if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,o=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(o<0)return r;do o in this&&(r=t.call(void 0,r,n[o],o,e));while(o--);return r}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(t){var n=C&&"[object String]"==h(this)?this.split(""):B(this),i=n.length>>>0;if(!i)return-1;var r=0;for(arguments.length>1&&(r=e(arguments[1])),r=r>=0?r:Math.max(0,i+r);r<i;r++)if(r in n&&n[r]===t)return r;return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(t){var n=C&&"[object String]"==h(this)?this.split(""):B(this),i=n.length>>>0;if(!i)return-1;var r=i-1;for(arguments.length>1&&(r=Math.min(r,e(arguments[1]))),r=r>=0?r:i-Math.abs(r);r>=0;r--)if(r in n&&t===n[r])return r;return-1}),!Object.keys){var b=!0,F=function(){}.propertyIsEnumerable("prototype"),k=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=k.length;for(var G in{toString:null})b=!1;Object.keys=function D(t){var e="[object Function]"===h(t),n=null!==t&&"object"==typeof t;if(!n&&!e)throw new TypeError("Object.keys called on a non-object");var D=[],i=F&&e;for(var r in t)i&&"prototype"===r||!f(t,r)||D.push(r);if(b)for(var o=t.constructor,s=o&&o.prototype===t,a=0;a<w;a++){var u=k[a];s&&"constructor"===u||!f(t,u)||D.push(u)}return D}}var S=-621987552e5,I="-000001";Date.prototype.toISOString&&new Date(S).toISOString().indexOf(I)!==-1||(Date.prototype.toISOString=function(){var t,e,n,i,r;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(i=this.getUTCFullYear(),r=this.getUTCMonth(),i+=Math.floor(r/12),r=(r%12+12)%12,t=[r+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=(i<0?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6),e=t.length;e--;)n=t[e],n<10&&(t[e]="0"+n);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var A=!1;try{A=Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(S).toJSON().indexOf(I)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(x){}A||(Date.prototype.toJSON=function(t){var e,n=Object(this),r=i(n);if("number"==typeof r&&!isFinite(r))return null;if(e=n.toISOString,"function"!=typeof e)throw new TypeError("toISOString property is not callable");return e.call(n)}),!Date.parse,Date=function(t){function e(n,i,r,o,s,a,u){var c=arguments.length;if(this instanceof t){var l=1==c&&String(n)===n?new t(e.parse(n)):c>=7?new t(n,i,r,o,s,a,u):c>=6?new t(n,i,r,o,s,a):c>=5?new t(n,i,r,o,s):c>=4?new t(n,i,r,o):c>=3?new t(n,i,r):c>=2?new t(n,i):c>=1?new t(n):new t;return l.constructor=e,l}return t.apply(this,arguments)}function n(t,e){var n=e>1?1:0;return o[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)}function i(e){return Number(new t(1970,0,1,0,0,0,e))}var r=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),o=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var s in t)e[s]=t[s];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var o=r.exec(e);if(o){var s,a=Number(o[1]),u=Number(o[2]||1)-1,c=Number(o[3]||1)-1,l=Number(o[4]||0),d=Number(o[5]||0),p=Number(o[6]||0),h=Math.floor(1e3*Number(o[7]||0)),f=Boolean(o[4]&&!o[8]),y="-"===o[9]?1:-1,m=Number(o[10]||0),g=Number(o[11]||0);return l<(d>0||p>0||h>0?24:25)&&d<60&&p<60&&h<1e3&&u>-1&&u<12&&m<24&&g<60&&c>-1&&c<n(a,u+1)-n(a,u)&&(s=60*(24*(n(a,u)+c)+l+m*y),s=1e3*(60*(s+d+g*y)+p)+h,f&&(s=i(s)),-864e13<=s&&s<=864e13)?s:NaN}return t.parse.apply(this,arguments)},e}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===(0xde0b6b3a7640080).toFixed(0)||!function(){function t(t,e){for(var n=-1;++n<s;)e+=t*a[n],a[n]=e%o,e=Math.floor(e/o)}function e(t){for(var e=s,n=0;--e>=0;)n+=a[e],a[e]=Math.floor(n/t),n=n%t*o}function n(){for(var t=s,e="";--t>=0;)if(""!==e||0===t||0!==a[t]){var n=String(a[t]);""===e?e=n:e+="0000000".slice(0,7-n.length)+n}return e}function i(t,e,n){return 0===e?n:e%2===1?i(t,e-1,n*t):i(t*t,e/2,n)}function r(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}var o,s,a;o=1e7,s=6,a=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var s,a,u,c,l,d,p,h;if(s=Number(o),s=s!==s?0:Math.floor(s),s<0||s>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(a=Number(this),a!==a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(u="",a<0&&(u="-",a=-a),c="0",a>1e-21)if(l=r(a*i(2,69,1))-69,d=l<0?a*i(2,-l,1):a/i(2,l,1),d*=4503599627370496,l=52-l,l>0){for(t(0,d),p=s;p>=7;)t(1e7,0),p-=7;for(t(i(10,p,1),0),p=l-1;p>=23;)e(1<<23),p-=23;e(1<<p),t(1,1),e(2),c=n()}else t(0,d),t(1<<-l,0),c=n()+"0.00000000000000000000".slice(2,2+s);return s>0?(h=c.length,c=h<=s?u+"0.0000000000000000000".slice(0,s-h+2)+c:u+c.slice(0,h-s)+"."+c.slice(h-s)):c=u+c,c}}();var O=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];String.prototype.split=function(e,n){var i=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==Object.prototype.toString.call(e))return O.apply(this,arguments);var r,o,s,a,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),l=0,e=new RegExp(e.source,c+"g");for(i+="",t||(r=new RegExp("^"+e.source+"$(?!\\s)",c)),n=void 0===n?-1>>>0:n>>>0;(o=e.exec(i))&&(s=o.index+o[0].length,!(s>l&&(u.push(i.slice(l,o.index)),!t&&o.length>1&&o[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<i.length&&Array.prototype.push.apply(u,o.slice(1)),a=o[0].length,l=s,u.length>=n)));)e.lastIndex===o.index&&e.lastIndex++;return l===i.length?!a&&e.test("")||u.push(""):u.push(i.slice(l)),u.length>n?u.slice(0,n):u}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,e){return void 0===t&&0===e?[]:O.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var R=String.prototype.substr;String.prototype.substr=function(t,e){return R.call(this,t<0&&(t=this.length+t)<0?0:t,e)}}var E="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||E.trim()){E="["+E+"]";var T=new RegExp("^"+E+E+"*"),j=new RegExp(E+E+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(T,"").replace(j,"")}}8===parseInt(E+"08")&&22===parseInt(E+"0x16")||(parseInt=function(t){var e=/^0[xX]/;return function(n,i){return n=String(n).trim(),+i||(i=e.test(n)?16:10),t(n,i)}}(parseInt));var B=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),function(t){var e={},n={},i={},r={};e.addDetectionTest=function(t,e){r[t]||(r[t]=e)},e.detect=function(t){return"undefined"==typeof i[i]&&(i[t]=r[t]()),i[t]},e.define=function(t,e,i){if("function"==typeof define&&define.amd)define(t,e,i);else{if(e&&e.length)for(var r=0;r<e.length;r++)e[r]=n[e[r]];n[t]=i.apply(this,e||[])}},t.GCsdk=e,"undefined"!=typeof exports&&(exports.GCsdk=e),e.define("GCsdk.core",[],function(){return e}),"undefined"==typeof define&&(t.define=e.define)}("undefined"==typeof window?this:window),define("GCsdk.promise",["GCsdk.core"],function(t){function e(t){function e(t){var e=this;this.pending=[],this.resolve=function(t){e.complete("resolve",t)},this.reject=function(t){e.complete("reject",t)},t&&(this.isSingleton=!0)}e.prototype={then:function(t,e){return this.pending.push({resolve:t,reject:e}),this},complete:function(t,e){for(;this.pending[0];)this.pending.shift()[t](e)}},t.Promise=e}return"undefined"!=typeof module?module.exports=function(t){return e(t)}:e(GCsdk),GCsdk.Promise}),define("GCsdk.net",["GCsdk.core"],function(t){function e(){if(!("undefined"==typeof XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function n(t){return t.status>=200&&t.status<300||304==t.status||0==t.status&&t.responseText}function i(i,r){function s(t){if(4==d.readyState){var e=d.mimeType||d.getResponseHeader("content-type")||"";if(p.status=d.status,p.responseText=d.responseText,/json/.test(e)?p.responseJSON=o.parseJSON(d.responseText):/xml/.test(e)&&(p.responseXML=o.parseXML(d.responseText)),p.success=n(d),r.callback)return r.callback(p,d);p.success?(r.success&&r.success(p,d),c&&c.resolve(p,d)):(r.error&&r.error(p,d),c&&c.reject(p,d))}}function a(){var t={Accept:"text/javascript, application/json, text/html, application/xml, text/xml, */*","Content-Type":"application/json"};for(var e in t)r.headers.hasOwnProperty(e)||(r.headers[e]=t[e]);for(var e in r.headers)d.setRequestHeader(e,r.headers[e])}function u(){try{a(),d.send(r.postBody)}catch(t){r.error&&r.error()}}var c,l,d=e(),p={};return t.Promise&&(c=new t.Promise),"undefined"==typeof r&&(r={}),r.method=r.method?r.method.toLowerCase():"get",r.asynchronous=r.asynchronous||!0,r.postBody=r.postBody||"",d.onreadystatechange=s,d.open(r.method,i,r.asynchronous),r.headers=r.headers||{},r.contentType&&(r.headers["Content-Type"]=r.contentType),"string"!=typeof r.postBody&&(r.postBody=o.serialize(r.postBody)),l={set:function(t,e){return r.headers[t]=e,l},send:function(t,e){return r.postBody=o.serialize(t),r.callback=e,u(),l},end:function(t){return r.callback=t,u(),l},data:function(t){return r.postBody=o.serialize(t),l},then:function(){return l.end(),c&&c.then.apply(c,arguments),l}}}function r(t,e,n){function i(t){r.success(t),r.teardown()}var r=this;this.url=t,this.methodName="__GCsdk_jsonp_"+parseInt((new Date).getTime()),this.success=e,this.failure=n,window[this.methodName]=i}var o={},s="".trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};return o.serialize=function(t){if(t){if("string"==typeof t)return t;var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}},t.addDetectionTest("JSON.parse",function(){return window.JSON&&window.JSON.parse}),o.parseJSON=function(e){return"string"==typeof e&&e?(e=s(e),t.detect("JSON.parse")?window.JSON.parse(e):new Function("return "+e)()):null},window.DOMParser?o.parseXML=function(t){return(new DOMParser).parseFromString(t,"text/xml")}:o.parseXML=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},r.prototype.run=function(){this.scriptTag=document.createElement("script"),this.scriptTag.id=this.methodName,this.scriptTag.src=this.url.replace("{callback}",this.methodName);var t=this;this.scriptTag.onerror=function(){t.failure()},document.body.appendChild(this.scriptTag)},r.prototype.teardown=function(){window[this.methodName]=null;try{delete window[this.methodName]}catch(t){}this.scriptTag&&document.body.removeChild(this.scriptTag)},o.get=function(t,e){return"undefined"==typeof e&&(e={}),e.method="get",i(t,e)},o.post=function(t,e){return"undefined"==typeof e&&(e={}),e.method="post",i(t,e)},o.jsonp=function(t,e){"undefined"==typeof e&&(e={});var n=new r(t,e.success,e.failure);n.run()},t.get=o.get,t.post=o.post,t.jsonp=o.jsonp,o.ajax=i,t.net=o,o}),define("GCsdk.Util",["GCsdk.core"],function(t){var e=function(){this.getMetadata=function(){return{screenSize:window.innerWidth+"x"+window.innerHeight,platformIdentifier:window.navigator.userAgent,sdkIdentifier:(document.GC&&document.GC.rppEnabledPage?"rpp-":"")+"JavaScriptClientSDK/v2.1.0",sdkCreator:"Ingenico"}},this.base64Encode=function(t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){throw"data must be either a String or a JSON object"}var n,i,r,o,s,a,u,c,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,p=0,h="",f=[];if(!t)return t;do n=t.charCodeAt(d++),i=t.charCodeAt(d++),r=t.charCodeAt(d++),c=n<<16|i<<8|r,o=c>>18&63,s=c>>12&63,a=c>>6&63,u=63&c,f[p++]=l.charAt(o)+l.charAt(s)+l.charAt(a)+l.charAt(u);while(d<t.length);h=f.join("");var y=t.length%3;return(y?h.slice(0,y-3):h)+"===".slice(y||3)}};return t.Util=e,e}),define("GCsdk.PublicKeyResponse",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.keyId=t.keyId,this.publicKey=t.publicKey};return t.PublicKeyResponse=e,e}),define("GCsdk.C2SCommunicatorConfiguration",["GCsdk.core"],function(t){var e=function(t){this.endpoints={PROD:{EU:{API:"https://api-eu.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.poweredbyglobalcollect.com"},US:{API:"https://api-us.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.poweredbyglobalcollect.com"}},PREPROD:{EU:{API:"https://api-eu-preprod.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.preprod.poweredbyglobalcollect.com"},US:{API:"https://api-us-preprod.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.preprod.poweredbyglobalcollect.com"}},SANDBOX:{EU:{API:"https://api-eu-sandbox.globalcollect.com/client/v1",ASSETS:"https://assets.pay1.sandbox.poweredbyglobalcollect.com"},US:{API:"https://api-us-sandbox.globalcollect.com/client/v1",ASSETS:"https://assets.pay2.sandbox.poweredbyglobalcollect.com"}},INTEGRATION:{EU:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"},US:{API:"https://int-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.int-test-rpp.gcsip.nl:4443"}},DEV_NAMI:{EU:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"},US:{API:"https://nami-test-api.gcsip.nl:4443/client/v1",ASSETS:"https://assets.nami-test-rpp.gcsip.nl:4443"}},DEV_ISC:{EU:{API:"http://api.gc-dev.isaac.local/client/v1",ASSETS:"http://rpp.gc-dev.isaac.local"},US:{API:"http://api.gc-dev.isaac.local/client/v1",ASSETS:"http://rpp.gc-dev.isaac.local"}}},this.region=t.region,this.environment=t.environment||"RPP",this.clientSessionId=t.clientSessionID,this.customerId=t.customerId,this.apiBaseUrl=t.apiBaseUrl||""===t.apiBaseUrl?t.apiBaseUrl:this.endpoints[this.environment][this.region].API,this.assetsBaseUrl=t.assetsBaseUrl||""===t.assetsBaseUrl?t.assetsBaseUrl:this.endpoints[this.environment][this.region].ASSETS};return t.C2SCommunicatorConfiguration=e,e}),define("GCsdk.IinDetailsResponse",["GCsdk.core","GCsdk.promise"],function(t,e){var n=function(){this.status="",this.countryCode="",this.paymentProductId="",this.isAllowedInContext="",this.coBrands=[]};return t.IinDetailsResponse=n,n}),define("GCsdk.C2SCommunicator",["GCsdk.core","GCsdk.promise","GCsdk.net","GCsdk.Util","GCsdk.PublicKeyResponse","GCsdk.IinDetailsResponse"],function(t,e,n,i,r,o){var s=function(t,s){var a=t,u=new i,c={},l=s,d={expirydate:"tel",string:"text",numericstring:"tel",integer:"number",expirationDate:"tel"},p=function(t,e){for(var n=0,i=t.fields.length;n<i;n++){var r=t.fields[n];r.type=r.displayHints.obfuscate?"password":d[r.type];for(validatorKey in r.dataRestrictions.validators)r.validators=r.validators||[],r.validators.push(validatorKey);"list"===r.displayHints.formElement.type&&(r.displayHints.formElement.list=!0),r.displayHints.tooltip&&r.displayHints.tooltip.image&&(r.displayHints.tooltip.image=e+"/"+r.displayHints.tooltip.image)}return t.fields.sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t.displayHints.logo=e+"/"+t.displayHints.logo,t},h=function(t,e,n){for(var i=0,r=t["paymentProduct"+n].length;i<r;i++){var o=t["paymentProduct"+n][i];o.displayHints.logo=e+"/"+o.displayHints.logo}return t["paymentProduct"+n].sort(function(t,e){return t.displayHints.displayOrder<e.displayHints.displayOrder?-1:1}),t},f=u.getMetadata();this.getBasicPaymentProducts=function(t){var i=new e,r=(new Date).getTime(),o="getPaymentProducts-"+t.totalAmount+"_"+t.countryCode+"_"+t.locale+"_"+t.isRecurring+"_"+t.currency;return c[o]?setTimeout(function(){i.resolve(c[o])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/products?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields&locale="+t.locale+"&cacheBust="+r).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(t){if(t.success){var e=h(t.responseJSON,a.assetsBaseUrl,"s");c[o]=e,i.resolve(e)}else i.reject()}),i},this.getBasicPaymentProductGroups=function(t){var i=new e,r=(new Date).getTime(),o="getPaymentProductGroups-"+t.totalAmount+"_"+t.countryCode+"_"+t.locale+"_"+t.isRecurring+"_"+t.currency;return c[o]?setTimeout(function(){i.resolve(c[o])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/productgroups?countryCode="+t.countryCode+"&isRecurring="+t.isRecurring+"&amount="+t.totalAmount+"&currencyCode="+t.currency+"&hide=fields&locale="+t.locale+"&cacheBust="+r).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(t){if(t.success){var e=h(t.responseJSON,a.assetsBaseUrl,"Groups");c[o]=e,i.resolve(e)}else i.reject()}),i},this.getPaymentProduct=function(i,r){var o=new e,s=(new Date).getTime(),d="getPaymentProduct-"+i+"_"+r.totalAmount+"_"+r.countryCode+"__"+r.locale+"_"+r.isRecurring+"_"+r.currency;if(l&&l.id===i)if(c[d])setTimeout(function(){o.resolve(c[d])},0);else{var h=p(l,a.assetsBaseUrl);c[d]=h,setTimeout(function(){o.resolve(c[d])},0)}else c[d]?setTimeout(function(){o.resolve(c[d])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/products/"+i+"?countryCode="+r.countryCode+"&isRecurring="+r.isRecurring+"&amount="+r.totalAmount+"&currencyCode="+r.currency+"&locale="+r.locale+"&cacheBust="+s).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(e){if(e.success){var n=p(e.responseJSON,t.assetsBaseUrl);c[d]=n,o.resolve(n)}else o.reject()});return o},this.getPaymentProductGroup=function(i,r){var o=new e,s=(new Date).getTime(),d="getPaymentProductGroup-"+i+"_"+r.totalAmount+"_"+r.countryCode+"__"+r.locale+"_"+r.isRecurring+"_"+r.currency;if(l&&l.id===i)if(c[d])setTimeout(function(){o.resolve(c[d])},0);else{var h=p(l,a.assetsBaseUrl);c[d]=h,setTimeout(function(){o.resolve(c[d])},0)}else c[d]?setTimeout(function(){o.resolve(c[d])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/productgroups/"+i+"?countryCode="+r.countryCode+"&isRecurring="+r.isRecurring+"&amount="+r.totalAmount+"&currencyCode="+r.currency+"&locale="+r.locale+"&cacheBust="+s).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(e){if(e.success){var n=p(e.responseJSON,t.assetsBaseUrl);c[d]=n,o.resolve(n)}else o.reject()});return o},this.getPaymentProductIdByCreditCardNumber=function(t,i){var r=new e,s=new o,l="getPaymentProductIdByCreditCardNumber-"+t,d=this;if(this.context=i,c[l])setTimeout(function(){r.resolve(c[l])},0);else{var p=function(t){return!(t.length<6)};p(t)?n.post(a.apiBaseUrl+"/"+a.customerId+"/services/getIINdetails").data(JSON.stringify(this.convertContextToIinDetailsContext(t,this.context))).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(t){t.success?(s.json=t.responseJSON,s.countryCode=t.responseJSON.countryCode,s.paymentProductId=t.responseJSON.paymentProductId,s.isAllowedInContext=t.responseJSON.isAllowedInContext,s.coBrands=t.responseJSON.coBrands,t.responseJSON.hasOwnProperty("isAllowedInContext")?(s.status="SUPPORTED",s.isAllowedInContext===!1&&(s.status="EXISTING_BUT_NOT_ALLOWED"),c[l]=s,r.resolve(s)):d.getPaymentProduct(s.paymentProductId,d.context).then(function(t){t?s.status="SUPPORTED":s.status="UNSUPPORTED",c[l]=s,r.resolve(s)},function(){s.status="UNKNOWN",r.reject(s)})):(s.status="UNKNOWN",r.reject(s))}):(s.status="NOT_ENOUGH_DIGITS",setTimeout(function(){r.resolve(s)},0))}return r},this.convertContextToIinDetailsContext=function(t,e){return{bin:t,paymentContext:{countryCode:e.countryCode,isRecurring:e.isRecurring,amountOfMoney:{amount:e.totalAmount,currencyCode:e.currency}}}},this.getPublicKey=function(){var t=new e,i="publicKey";return c[i]?setTimeout(function(){t.resolve(c[i])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/crypto/publickey").set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(e){if(e.success){var n=new r(e.responseJSON);c[i]=n,t.resolve(n)}else t.reject("unable to get public key")}),t},this.getPaymentProductDirectory=function(t,i,r){var o=new e,s="getPaymentProductDirectory-"+t+"_"+i+"_"+r;return c[s]?setTimeout(function(){o.resolve(c[s])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/products/"+t+"/directory?countryCode="+r+"&currencyCode="+i).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(t){t.success?(c[s]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to retrieve payment product directory")}),o},this.convertAmount=function(t,i,r){var o=new e,s="convertAmount-"+t+"_"+i+"_"+r;return c[s]?setTimeout(function(){o.resolve(c[s])},0):n.get(a.apiBaseUrl+"/"+a.customerId+"/services/convert/amount?source="+i+"&target="+r+"&amount="+t).set("X-GCS-ClientMetaInfo",u.base64Encode(f)).set("Authorization","GCS v1Client:"+a.clientSessionId).end(function(t){t.success?(c[s]=t.responseJSON,o.resolve(t.responseJSON)):o.reject("unable to convert amount")}),o}};return t.C2SCommunicator=s,s}),define("GCsdk.LabelTemplateElement",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.attributeKey=t.attributeKey,this.mask=t.mask,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.LabelTemplateElement=e,e}),define("GCsdk.Attribute",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.key=t.key,this.value=t.value,this.status=t.status,this.mustWriteReason=t.mustWriteReason};return t.Attribute=e,e}),define("GCsdk.AccountOnFileDisplayHints",["GCsdk.core","GCsdk.LabelTemplateElement"],function(t,e){var n=function(t,n,i){if(t.labelTemplate)for(var r=0,o=t.labelTemplate.length;r<o;r++){var s=new e(t.labelTemplate[r]);n.push(s),i[s.attributeKey]=s}},i=function(t){this.json=t,this.labelTemplate=[],this.labelTemplateElementByAttributeKey={},n(t,this.labelTemplate,this.labelTemplateElementByAttributeKey)};return t.AccountOnFileDisplayHints=i,i}),define("GCsdk.AccountOnFile",["GCsdk.core","GCsdk.AccountOnFileDisplayHints","GCsdk.Attribute"],function(t,e,n){var i=function(t,e,i){if(t.attributes)for(var r=0,o=t.attributes.length;r<o;r++){var s=new n(t.attributes[r]);e.push(s),i[s.key]=s}},r=function(n){this.json=n,this.attributes=[],this.attributeByKey={},this.displayHints=new e(n.displayHints),this.id=n.id,this.paymentProductId=n.paymentProductId,this.getMaskedValueByAttributeKey=function(e){var n,i=this.attributeByKey[e].value;try{n=this.displayHints.labelTemplateElementByAttributeKey[e].wildcardMask}catch(r){}if(void 0!==i&&void 0!==n){var o=new t.MaskingUtil;return o.applyMask(n,i)}},i(n,this.attributes,this.attributeByKey)};return t.AccountOnFile=r,r}),define("GCsdk.PaymentProductDisplayHints",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.displayOrder=t.displayOrder,this.label=t.label,this.logo=t.logo};return t.PaymentProductDisplayHints=e,e}),define("GCsdk.BasicPaymentProduct",["GCsdk.core","GCsdk.AccountOnFile","GCsdk.PaymentProductDisplayHints"],function(t,e,n){var i=function(t,n,i){if(t.accountsOnFile)for(var r=0,o=t.accountsOnFile.length;r<o;r++){var s=new e(t.accountsOnFile[r]);n.push(s),i[s.id]=s}},r=function(t){this.json=t,this.json.type="product",this.accountsOnFile=[],this.accountOnFileById={},this.allowsRecurring=t.allowsRecurring,this.allowsTokenization=t.allowsTokenization,this.autoTokenized=t.autoTokenized,this.displayHints=new n(t.displayHints),this.id=t.id,this.maxAmount=t.maxAmount,this.minAmount=t.minAmount,this.paymentMethod=t.paymentMethod,this.mobileIntegrationLevel=t.mobileIntegrationLevel,this.usesRedirectionTo3rdParty=t.usesRedirectionTo3rdParty,this.paymentProductGroup=t.paymentProductGroup,i(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProduct=r,r}),define("GCsdk.BasicPaymentProductGroup",["GCsdk.core","GCsdk.AccountOnFile","GCsdk.PaymentProductDisplayHints"],function(t,e,n){var i=function(t,n,i){if(t.accountsOnFile)for(var r=0,o=t.accountsOnFile.length;r<o;r++){var s=new e(t.accountsOnFile[r]);n.push(s),i[s.id]=s}},r=function(t){this.json=t,this.json.type="group",this.id=t.id,this.displayHints=new n(t.displayHints),this.accountsOnFile=[],this.accountOnFileById={},i(t,this.accountsOnFile,this.accountOnFileById)};return t.BasicPaymentProductGroup=r,r}),define("GCsdk.MaskedString",["GCsdk.core"],function(t){var e=function(t,e){this.formattedValue=t,this.cursorIndex=e};return t.MaskedString=e,e}),define("GCsdk.MaskingUtil",["GCsdk.core","GCsdk.MaskedString"],function(t,e){var n=function(t,e,i,r,o){t+e<o.length&&t<r.length&&("9"===r[t]&&Number(o[t+e])>-1&&" "!==o[t+e]||"*"===r[t]?i.push(o[t+e]):o[t+e]===r[t]?i.push(o[t+e]):"9"!==r[t]&&"*"!==r[t]?(i.push(r[t]),e--):(o.splice(t+e,1),t--),n(t+1,e,i,r,o))},i=function(){this.applyMask=function(t,i,r){var o=[],s=i.split("");if(t){for(var a=t.split(""),u=[],c=0,l=a.length;c<l;c++){var d=a[c];"{"===d||"}"===d||u.push(d)}n(0,0,o,u,s)}else for(var c=0,l=s.length;c<l;c++){var d=s[c];o.push(d)}i=o.join("");var p=1;if(r)for(var h=r.split(""),c=0,l=o.length;c<l;c++)if(o[c]!==h[c]){p=c+1;break}return i.substring(0,i.length-1)===r&&(p=i.length+1),new e(i,p)},this.getMaxLengthBasedOnMask=function(t){if(t){for(var e=t.split(""),n=-1,i=0,r=e.length;i<r;i++){n++;var o=e[i];"{"!==o&&"}"!==o||n--}return n}},this.removeMask=function(t,e){var n=[],i=e?e.split(""):[];if(t)for(var r=t.split(""),o=-1,s=!1,a=0,u=r.length;a<u;a++){o++;var c=r[a];"{"===c||"}"===c?(o--,"{"===c?s=!0:"}"===c&&(s=!1)):s&&i[o]&&n.push(i[o])}else for(var a=0,u=i.length;a<u;a++){var c=i[a];n.push(c)}return n.join("").trim()}};return t.MaskingUtil=i,i}),define("GCsdk.ValidationRuleLuhn",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]],n=0;return t.replace(/\D+/g,"").replace(/[\d]/g,function(t,i,r){n+=e[r.length-i&1][parseInt(t,10)]}),n%10===0&&n>0}};return t.ValidationRuleLuhn=e,e}),define("GCsdk.ValidationRuleExpirationDate",["GCsdk.core"],function(t){var e=function(t){var e=/\d{4}|\d{6}$/g;return e.test(t)},n=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){
if(t=t.replace(/[^\d]/g,""),4===t.length)split=[t.substring(0,2),"20"+t.substring(2,4)];else{if(6!==t.length)return!1;split=[t.substring(0,2),t.substring(2,6)]}if(e(t)){var n=new Date((new Date).getFullYear(),(new Date).getMonth(),1),i=new Date(split[1],split[0]-1,1);return i.getMonth()===Number(split[0]-1)&&i.getFullYear()===Number(split[1])&&i>=n}return!1}};return t.ValidationRuleExpirationDate=n,n}),define("GCsdk.ValidationRuleFixedList",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.allowedValues=t.attributes.allowedValues,this.validate=function(t){for(var e=0,n=this.allowedValues.length;e<n;e++)if(this.allowedValues[e]===t)return!0;return!1}};return t.ValidationRuleFixedList=e,e}),define("GCsdk.ValidationRuleLength",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxLength=t.attributes.maxLength,this.minLength=t.attributes.minLength,this.validate=function(t){return this.minLength<=t.length&&t.length<=this.maxLength}};return t.ValidationRuleLength=e,e}),define("GCsdk.ValidationRuleRange",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.maxValue=t.attributes.maxValue,this.minValue=t.attributes.minValue,this.validate=function(t){return!isNaN(t)&&(t=Number(t),this.minValue<=t&&t<=this.maxValue)}};return t.ValidationRuleRange=e,e}),define("GCsdk.ValidationRuleRegularExpression",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.regularExpression=t.attributes.regularExpression,this.validate=function(t){var e=new RegExp(this.regularExpression);return e.test(t)}};return t.ValidationRuleRegularExpression=e,e}),define("GCsdk.ValidationRuleEmailAddress",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.type=t.type,this.errorMessageId=t.type,this.validate=function(t){var e=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return e.test(t)}};return t.ValidationRuleEmailAddress=e,e}),define("GCsdk.ValidationRuleFactory",["GCsdk.core","GCsdk.ValidationRuleEmailAddress","GCsdk.ValidationRuleExpirationDate","GCsdk.ValidationRuleFixedList","GCsdk.ValidationRuleLength","GCsdk.ValidationRuleLuhn","GCsdk.ValidationRuleRange","GCsdk.ValidationRuleRegularExpression"],function(GCsdk,ValidationRuleEmailAddress,ValidationRuleExpirationDate,ValidationRuleFixedList,ValidationRuleLength,ValidationRuleLuhn,ValidationRuleRange,ValidationRuleRegularExpression){var ValidationRuleFactory=function(){this.makeValidator=function(json){var classType=json.type.charAt(0).toUpperCase()+json.type.slice(1),className=eval("ValidationRule"+classType);return new className(json)}};return GCsdk.ValidationRuleFactory=ValidationRuleFactory,ValidationRuleFactory}),define("GCsdk.DataRestrictions",["GCsdk.core","GCsdk.ValidationRuleExpirationDate","GCsdk.ValidationRuleFixedList","GCsdk.ValidationRuleLength","GCsdk.ValidationRuleLuhn","GCsdk.ValidationRuleRange","GCsdk.ValidationRuleRegularExpression","GCsdk.ValidationRuleEmailAddress","GCsdk.ValidationRuleFactory"],function(t,e,n,i,r,o,s,a,u){var c=function(t,e){var n=function(t,e,n){var i=new u;if(t.validators)for(var r in t.validators){var o=i.makeValidator({type:r,attributes:t.validators[r]});e.push(o),n[o.type]=o}};this.json=t,this.isRequired=t.isRequired,this.validationRules=[],this.validationRuleByType={},n(t,this.validationRules,this.validationRuleByType)};return t.DataRestrictions=c,c}),define("GCsdk.ValueMappingElement",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.displayName=t.displayName,this.value=t.value};return t.ValueMappingElement=e,e}),define("GCsdk.FormElement",["GCsdk.core","GCsdk.ValueMappingElement"],function(t,e){var n=function(t){var n=function(t,n){if(t.valueMapping)for(var i=0,r=t.valueMapping.length;i<r;i++)n.push(new e(t.valueMapping[i]))};this.json=t,this.type=t.type,this.valueMapping=[],n(t,this.valueMapping)};return t.FormElement=n,n}),define("GCsdk.Tooltip",["GCsdk.core"],function(t){var e=function(t){this.json=t,this.image=t.image,this.label=t.label};return t.Tooltip=e,e}),define("GCsdk.PaymentProductFieldDisplayHints",["GCsdk.core","GCsdk.Tooltip","GCsdk.FormElement"],function(t,e,n){var i=function(t){this.json=t,this.displayOrder=t.displayOrder,this.formElement=new n(t.formElement),this.label=t.label,this.mask=t.mask,this.obfuscate=t.obfuscate,this.placeholderLabel=t.placeholderLabel,this.preferredInputType=t.preferredInputType,this.tooltip=t.tooltip?new e(t.tooltip):void 0,this.alwaysShow=t.alwaysShow,this.wildcardMask=t.mask?t.mask.replace(/9/g,"*"):""};return t.PaymentProductFieldDisplayHints=i,i}),define("GCsdk.PaymentProductField",["GCsdk.core","GCsdk.PaymentProductFieldDisplayHints","GCsdk.DataRestrictions","GCsdk.MaskingUtil"],function(t,e,n,i){var r=function(t){this.json=t,this.displayHints=new e(t.displayHints),this.dataRestrictions=new n(t.dataRestrictions,this.displayHints.mask),this.id=t.id,this.type=t.type;var r=[];this.getErrorCodes=function(t){return t&&(r=[],this.isValid(t)),r},this.isValid=function(t){var e=this.dataRestrictions.validationRules,n=!1;t=this.removeMask(t);for(var i=0,o=e.length;i<o;i++){var s=e[i];s.validate(t)||(n=!0,r.push(s.errorMessageId))}return!n},this.applyMask=function(t,e){var n=new i;return n.applyMask(this.displayHints.mask,t,e)},this.applyWildcardMask=function(t,e){var n=new i;return n.applyMask(this.displayHints.wildcardMask,t,e)},this.removeMask=function(t){var e=new i;return e.removeMask(this.displayHints.mask,t)}};return t.PaymentProductField=r,r}),define("GCsdk.PaymentProduct",["GCsdk.core","GCsdk.BasicPaymentProduct","GCsdk.PaymentProductField"],function(t,e,n){var i=function(t,e,i){if(t.fields)for(var r=0,o=t.fields.length;r<o;r++){var s=new n(t.fields[r]);e.push(s),i[s.id]=s}},r=function(t){var n=new e(t);return n.json=t,n.paymentProductFields=[],n.paymentProductFieldById={},i(n.json,n.paymentProductFields,n.paymentProductFieldById),n};return t.PaymentProduct=r,r}),define("GCsdk.PaymentProductGroup",["GCsdk.core","GCsdk.BasicPaymentProduct","GCsdk.PaymentProductField"],function(t,e,n){var i=function(t,e,i){if(t.fields)for(var r=0,o=t.fields.length;r<o;r++){var s=new n(t.fields[r]);e.push(s),i[s.id]=s}},r=function(t){var n=new e(t);return n.json=t,n.json.type="group",n.paymentProductFields=[],n.paymentProductFieldById={},i(n.json,n.paymentProductFields,n.paymentProductFieldById),n};return t.PaymentProductGroup=r,r}),define("GCsdk.BasicPaymentProducts",["GCsdk.core","GCsdk.BasicPaymentProduct"],function(t,e){var n=function(t,n,i,r,o,s){if(t.paymentProducts)for(var a=0,u=t.paymentProducts.length;a<u;a++){var c=new e(t.paymentProducts[a]);if(n.push(c),r[c.id]=c,c.accountsOnFile)for(var l=c.accountsOnFile,d=0,p=l.length;d<p;d++){var h=l[d];i.push(h),o[h.id]=h,s[h.id]=c}}},i=function(t){this.basicPaymentProducts=[],this.basicPaymentProductById={},this.basicPaymentProductByAccountOnFileId={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,n(t,this.basicPaymentProducts,this.accountsOnFile,this.basicPaymentProductById,this.accountOnFileById,this.basicPaymentProductByAccountOnFileId)};return t.BasicPaymentProducts=i,i}),define("GCsdk.BasicPaymentProductGroups",["GCsdk.core","GCsdk.BasicPaymentProductGroup"],function(t,e){var n=function(t,n,i,r,o){if(t.paymentProductGroups)for(var s=0,a=t.paymentProductGroups.length;s<a;s++){var u=new e(t.paymentProductGroups[s]);if(n.push(u),r[u.id]=u,u.accountsOnFile)for(var c=u.accountsOnFile,l=0,d=c.length;l<d;l++){var p=c[l];i.push(p),o[p.id]=p}}},i=function(t){this.basicPaymentProductGroups=[],this.basicPaymentProductGroupById={},this.accountsOnFile=[],this.accountOnFileById={},this.json=t,n(t,this.basicPaymentProductGroups,this.accountsOnFile,this.basicPaymentProductGroupById,this.accountOnFileById)};return t.BasicPaymentProductGroups=i,i}),define("GCsdk.BasicPaymentItems",["GCsdk.core"],function(t){"use strict";var e=function(t,e,n){var i=[];if(e){for(var r=0,o=e.basicPaymentProductGroups.length;r<o;r++)for(var s=e.basicPaymentProductGroups[r].id,a=!1,u=0,c=t.basicPaymentProducts.length;u<c;u++){var l=t.basicPaymentProducts[u].paymentProductGroup;l===s&&a===!1?(t.basicPaymentProducts.splice(u,1,e.basicPaymentProductGroups[r]),a=!0):l===s&&a===!0&&i.push(u)}for(var r=i.length-1,o=0;r>=o;r--)t.basicPaymentProducts.splice(i[r],1)}n.basicPaymentItems=JSON.parse(JSON.stringify(t.basicPaymentProducts));for(var r=0,o=n.basicPaymentItems.length;r<o;r++){var d=n.basicPaymentItems[r];if(n.basicPaymentItemById[d.id]=d,d.accountsOnFile)for(var p=d.accountsOnFile,u=0,c=p.length;u<c;u++){var h=p[u];n.accountsOnFile.push(h),n.accountOnFileById[h.id]=h}}},n=function(t,n){this.basicPaymentItems=[],this.basicPaymentItemById={},this.accountsOnFile=[],this.accountOnFileById={},e(t,n,this)};return t.BasicPaymentItems=n,n}),define("GCsdk.PaymentRequest",["GCsdk.core"],function(t){var e=function(t){var e={},n=null,i=null,r=!1;this.isValid=function(){var t=this.getErrorMessageIds(),e=this.getPaymentProduct();if(!e)return!1;for(var n=!0,i=0;i<e.paymentProductFields.length;i++){var r=e.paymentProductFields[i];if(r.dataRestrictions.isRequired){var o=this.getValue(r.id);o||this.getAccountOnFile()||(n=!1)}}return 0===t.length&&n},this.setValue=function(t,n){e[t]=n},this.setTokenize=function(t){r=t},this.getTokenize=function(){return r},this.getErrorMessageIds=function(){var t=[];for(key in e){var i=n.paymentProductFieldById[key];i&&(t=t.concat(i.getErrorCodes(e[key])))}return t},this.getValue=function(t){return e[t]},this.getValues=function(){return e},this.getMaskedValue=function(t){var e=n.paymentProductFieldById[t],i=e.applyMask(this.getValue(t));return i.formattedValue()},this.getMaskedValues=function(){var t=e,i=[];for(var r in t){var o=n.paymentProductFieldById[r],s=o.applyMask(this.getValue(r));i[r]=s.formattedValue}return i},this.getUnmaskedValues=function(){var t=e,i=[];for(var r in t){var o=n.paymentProductFieldById[r];if(o){var s=o.applyMask(this.getValue(r)),a=s.formattedValue;i[r]=o.removeMask(a)}}return i},this.setPaymentProduct=function(t){"group"!==t.type&&(n=t)},this.getPaymentProduct=function(){return n},this.setAccountOnFile=function(t){for(var n=0,r=t.attributes.length;n<r;n++){var o=t.attributes[n];delete e[o.key]}i=t},this.getAccountOnFile=function(){return i},this.getClientSessionID=function(){return t}};return t.PaymentRequest=e,e}),define("GCsdk.C2SPaymentProductContext",["GCsdk.core"],function(t){var e=function(t){this.totalAmount=t.totalAmount,this.countryCode=t.countryCode,this.isRecurring=t.isRecurring,this.currency=t.currency,this.locale=t.locale};return t.C2SPaymentProductContext=e,e}),define("GCsdk.Session",["GCsdk.core","GCsdk.C2SCommunicator","GCsdk.C2SCommunicatorConfiguration","GCsdk.IinDetailsResponse","GCsdk.promise","GCsdk.C2SPaymentProductContext","GCsdk.BasicPaymentProducts","GCsdk.BasicPaymentProductGroups","GCsdk.PaymentProduct","GCsdk.PaymentProductGroup","GCsdk.BasicPaymentItems","GCsdk.PaymentRequest","GCsdk.Encryptor"],function(t,e,n,i,r,o,s,a,u,c,l,d,p){var h=function(t,i){var h,f,y,m,g,v,C=new n(t),P=new e(C,i),b=this;this.apiBaseUrl=C.apiBaseUrl,this.assetsBaseUrl=C.assetsBaseUrl,this.getBasicPaymentProducts=function(t){var e=new r,n=new o(t);return P.getBasicPaymentProducts(n).then(function(n){y=t;var i=new s(n);e.resolve(i)},function(){e.reject()}),e},this.getBasicPaymentProductGroups=function(t){var e=new r,n=new o(t);return P.getBasicPaymentProductGroups(n).then(function(n){y=t;var i=new a(n);e.resolve(i)},function(){e.reject()}),e},this.getBasicPaymentItems=function(t,e){var n=new r;return e?b.getBasicPaymentProducts(t).then(function(e){b.getBasicPaymentProductGroups(t).then(function(t){var i=new l(e,t);n.resolve(i)},function(){n.reject()})},function(){n.reject()}):b.getBasicPaymentProducts(t).then(function(t){var e=new l(t,null);n.resolve(e)},function(){n.reject()}),n},this.getPaymentProduct=function(t,e){var n=new r;h=t;var i=new o(y||e);return P.getPaymentProduct(t,i).then(function(t){f=new u(t),n.resolve(f)},function(){f=null,n.reject()}),n},this.getPaymentProductGroup=function(t,e){var n=new r;g=t;var i=new o(y||e);return P.getPaymentProductGroup(t,i).then(function(t){v=new c(t),n.resolve(v)},function(){v=null,n.reject()}),n},this.getIinDetails=function(t,e){t=t.replace(/ /g,"").substring(0,6);var n=new o(y||e);return P.getPaymentProductIdByCreditCardNumber(t,n)},this.getPublicKey=function(){return P.getPublicKey()},this.getPaymentProductDirectory=function(t,e,n){return P.getPaymentProductDirectory(t,e,n)},this.convertAmount=function(t,e,n){return P.convertAmount(t,e,n)},this.getPaymentRequest=function(){return m||(m=new d(t.clientSessionID)),m},this.getEncryptor=function(){var t=P.getPublicKey();return new p(t)}};return t.Session=h,h});
//# sourceMappingURL=gcsdk.noEncrypt.min.js.map
